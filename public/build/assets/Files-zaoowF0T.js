import{d as we,l as st,v as ot,u as e,o as f,c as x,n as ce,p as ut,r as $,q as nt,s as rt,C as B,a as l,m as dt,w as a,b as o,h as L,e as u,t as p,f as O,g as y,F as P,i as A,W as it,j as ft}from"./app-nLh1rLCO.js";import{F as ve,_ as mt,K as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-CbpgM4a7.js";import{_ as K,a as pt,b as Q,c as j,d as Y,e as W,f as h}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DC5D3H5i.js";import{_ as N,a as E,b as q,c as T,d as ee,e as te,f as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-CcHqYpUf.js";import{_ as ye,a as xe,b as I,c as w,d as _e,e as v,f as be}from"./Skeleton.vue_vue_type_script_setup_true_lang-C0vgvkzQ.js";import{a as ct,_ as b}from"./index-CtMMYbN-.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-Bb3MhqG6.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-9ikjUkKy.js";import{u as gt,a as vt,C as Se}from"./Skeleton.vue_vue_type_script_setup_true_lang-ClmoYYpf.js";import{u as yt}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D4T7y-Kl.js";import{L as G}from"./loader-circle-Dj_hlWRf.js";import{P as De,T as Ve}from"./trash-2-h6EYBA0R.js";import{F as xt}from"./file-text-LbDx6W-f.js";import{E as _t}from"./eye-C3jy5iZz.js";import{A as bt,a as St}from"./arrow-right-CP1FoNUY.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-DWTHgTpG.js";import"./check-z7kBfe61.js";const pe=we({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(H,{emit:M}){const k=H,F=yt(k,"modelValue",M,{passive:!0,defaultValue:k.defaultValue});return(ae,J)=>st((f(),x("textarea",{"onUpdate:modelValue":J[0]||(J[0]=U=>ut(F)?F.value=U:null),"data-slot":"textarea",class:ce(e(ct)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",k.class))},null,2)),[[ot,e(F)]])}}),Dt={class:"p-6 space-y-6"},Vt={class:"flex w-full justify-between items-center"},wt={key:0},Ct={class:"flex text-md font-bold items-center"},kt={class:"grid gap-4 py-4"},Ft={class:"grid grid-cols-4 items-center gap-4"},$t={class:"grid gap-4 py-4"},Pt={class:"grid grid-cols-4 items-center gap-4"},Ut={class:"flex flex-col space-y-1"},At={class:"flex flex-col space-y-1"},Nt={class:"flex flex-col space-y-1"},Et={class:"flex flex-col space-y-1"},qt={class:"space-y-3"},Tt=["onClick"],Rt={class:"flex flex-col space-y-1"},Lt={class:"md:col-span-2"},It={class:"md:col-span-2"},Mt={class:"md:col-span-2"},zt={class:"md:col-span-2"},Bt={class:"space-y-3"},Ot=["onClick"],Kt={class:"md:col-span-2"},Qt={class:"md:col-span-2 text-right"},jt={class:"text-center text-red-500 flex items-center justify-center"},Yt=["onClick"],Wt={class:"flex items-center space-x-3"},Gt={class:"font-medium"},Ht={class:"flex items-center justify-between space-x-4"},Jt={class:"text-red-500 flex items-center justify-center"},Xt=["href"],Zt=["onClick"],ht={class:"text-wrap text-[13px]"},el={class:"text-nowrap"},tl={class:"text-nowrap"},ll={class:"text-nowrap"},al={key:0},sl=["onClick"],ol={class:"flex justify-between items-center mt-8"};function ul(H){const M=new Date(H),k=M.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),le=M.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${k} | ${le}`}const Cl=we({__name:"Files",props:{id:{}},setup(H){const M=H,k=gt(),le=[{title:"Files",href:"/admin/files/"+M.id}],F=$(1),ae=$(""),J=$([]),U=$({currentPage:1,lastPage:1,hasMorePages:!1}),Ce=async()=>(await ft.post("/graphql",{query:`
    query ($id: String!, $page: Int!, $first: Int!) {
      files(id: $id, page: $page, first: $first) {
        categoryName {
          encrypted_id
          category
        }
        authors {
          encrypted_id
          name
        }
        filesListPaginated {
          data {
            encrypted_id
            municipalStatus
            provincialStatus
            title
            firstReadingDate
            secondReadingDate
            thirdReadingDate
            ordinanceNumber
            finalTitle
            enactmentDate
            lceapprovalDate
            transmittalDate
            spslapprovalDate
            postStatus
            publishStatus
            file
            author {
              encrypted_id
              name
            }
            coAuthors {
              official {
                encrypted_id
                name
              }
            }
          }
          paginatorInfo {
            currentPage
            lastPage
            total
            perPage
            hasMorePages
          }
        }
        subCategoriesList {
          encrypted_id
          category
          parentID
          created_at
          totalFiles
        }
      }
    }
  `,variables:{id:M.id,page:F.value,first:20}})).data.data,{data:S,isPending:nl,isFetching:fe,isLoading:ke}=vt({queryKey:["fetchFiles",F],queryFn:Ce});nt(()=>{var i,t;(t=(i=S.value)==null?void 0:i.files)!=null&&t.filesListPaginated&&(J.value=S.value.files.filesListPaginated.data,U.value=S.value.files.filesListPaginated.paginatorInfo)});const ge=rt(()=>{const i=ae.value.toLowerCase();return J.value.filter(t=>{var g,s,d,r,D;return((g=t.title)==null?void 0:g.toLowerCase().includes(i))||((d=(s=t.ordinanceNumber)==null?void 0:s.toLowerCase())==null?void 0:d.includes(i))||((D=(r=t.author.name)==null?void 0:r.toLowerCase())==null?void 0:D.includes(i))})}),Fe=()=>{F.value<U.value.lastPage&&F.value++},$e=()=>{F.value>1&&F.value--},se=$(!1);function Pe(i){c.categoryID=i,se.value=!0}const c=B({categoryID:"",municipalStatus:"",title:"",author:"",coauthor:[],file:null}),Ue=()=>{c.post(route("create.file"),{onSuccess:()=>{V.success("File created and uploaded successfully"),c.reset(),se.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Error creating file"),console.error("Error")}})},Ae=async i=>{var r;const t=i.target,g=(r=t.files)==null?void 0:r[0];if(!g)return;const d=2*1024*1024;g.size>d&&(t.value="",V.error("File too large. Please select a smaller file.")),c.file=g,console.log("Selected file:",g)},Ne=()=>{c.coauthor.push("")},Ee=i=>{c.coauthor.splice(i,1)},oe=$(!1);function qe(i,t,g,s,d,r,D,ie,Ge,He,Je,Xe,Ze,he,et,tt,lt,at){n.id=i,n.categoryID=t,n.municipalStatus=g,n.provincialStatus=s,n.title=d,n.author=r,n.coauthor=D,n.firstReadingDate=ie,n.secondReadingDate=Ge,n.thirdReadingDate=He,n.ordinanceNumber=Je,n.finalTitle=Xe,n.enactmentDate=Ze,n.lceapprovalDate=he,n.transmittalDate=et,n.spslapprovalDate=tt,n.postStatus=lt,n.publishStatus=at,oe.value=!0}const n=B({id:"",categoryID:"",municipalStatus:"",provincialStatus:"",title:"",author:"",coauthor:[],firstReadingDate:"",secondReadingDate:"",thirdReadingDate:"",ordinanceNumber:"",finalTitle:"",enactmentDate:"",lceapprovalDate:"",transmittalDate:"",spslapprovalDate:"",postStatus:"",publishStatus:"",file:null}),Te=()=>{n.post(route("update.file"),{onSuccess:()=>{V.success("File updated successfully"),n.reset(),oe.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Error creating file"),console.error("Error")}})},Re=async i=>{var r;const t=i.target,g=(r=t.files)==null?void 0:r[0];if(!g)return;const d=2*1024*1024;g.size>d&&(t.value="",V.error("File too large. Please select a smaller file.")),c.file=g,console.log("Selected file:",g)},Le=()=>{n.coauthor.push("")},Ie=i=>{n.coauthor.splice(i,1)};function Me(i){return i.map(t=>t.official.encrypted_id)}const ue=$(!1);function ze(i){X.id=i,ue.value=!0}const X=B({id:""}),Be=()=>{X.delete(route("delete.file"),{onSuccess:()=>{V.success("File deleted successfully"),X.reset(),ue.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Deletion Error"),console.error("Error")}})},ne=$(!1);function Oe(i){z.id=i,ne.value=!0}const z=B({id:"",category:""}),Ke=()=>{z.post(route("create.subcategory"),{onSuccess:()=>{V.success("Subcategory created successfully"),z.reset(),ne.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Error creating category"),console.error("Error")}})},re=$(!1);function Qe(i,t){R.id=i,R.category=t,re.value=!0}const R=B({id:"",category:""}),je=()=>{R.patch(route("update.subcategory"),{onSuccess:()=>{V.success("Subcategory updated successfully"),R.reset(),re.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Error updating category"),console.error("Error")}})},de=$(!1);function Ye(i){Z.id=i,de.value=!0}const Z=B({id:""}),We=()=>{Z.delete(route("delete.subcategory"),{onSuccess:()=>{V.success("Subcategory deleted successfully"),Z.reset(),de.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Deletion Error"),console.error("Error")}})};function me(i,t={}){it.get(route(i,t))}return(i,t)=>(f(),x(P,null,[l(e(dt),{title:"Files"}),l(mt,{breadcrumbs:le},{default:a(()=>{var g;return[o("div",Dt,[o("div",Vt,[o("div",null,[!e(ke)&&!e(fe)?(f(),x("div",wt,[o("h6",Ct,[l(e(ve),{class:"h-8 w-8 mr-2 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"}),u(" "+p((g=e(S))==null?void 0:g.files.categoryName.category),1)])])):L("",!0)]),l(e(K),{open:ne.value,"onUpdate:open":t[2]||(t[2]=s=>ne.value=s)},{default:a(()=>[l(e(pt),{"as-child":""},{default:a(()=>[l(e(b),{onClick:t[0]||(t[0]=s=>{var d;return Oe((d=e(S))==null?void 0:d.files.categoryName.encrypted_id)}),class:"cursor-pointer"},{default:a(()=>t[29]||(t[29]=[u(" + New ")])),_:1})]),_:1}),l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[30]||(t[30]=[u("Add Category")])),_:1}),l(e(W),null,{default:a(()=>{var s;return[t[31]||(t[31]=u(" Create a sub-category for ")),o("b",null,p((s=e(S))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),o("form",{action:"",onSubmit:O(Ke,["prevent"])},[o("div",kt,[o("div",Ft,[l(e(m),{class:"text-right"},{default:a(()=>t[32]||(t[32]=[u("Category")])),_:1}),l(e(C),{modelValue:e(z).category,"onUpdate:modelValue":t[1]||(t[1]=s=>e(z).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(h),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(z).processing},{default:a(()=>[e(z).processing?(f(),y(e(G),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[33]||(t[33]=u(" Save"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(K),{open:re.value,"onUpdate:open":t[4]||(t[4]=s=>re.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[34]||(t[34]=[u("Edit Category")])),_:1}),l(e(W),null,{default:a(()=>t[35]||(t[35]=[u(" Edit the details of the selected category ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:O(je,["prevent"])},[o("div",$t,[o("div",Pt,[l(e(m),{class:"text-right"},{default:a(()=>t[36]||(t[36]=[u("Category")])),_:1}),l(e(C),{modelValue:e(R).category,"onUpdate:modelValue":t[3]||(t[3]=s=>e(R).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(h),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(R).processing},{default:a(()=>[e(R).processing?(f(),y(e(G),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[37]||(t[37]=u(" Save"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(K),{open:de.value,"onUpdate:open":t[5]||(t[5]=s=>de.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[38]||(t[38]=[u("Delete Subcategory")])),_:1}),l(e(W),null,{default:a(()=>t[39]||(t[39]=[u(" Are you sure you want to delete this category? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:O(We,["prevent"])},[l(e(h),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(Z).processing},{default:a(()=>[e(Z).processing?(f(),y(e(G),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[40]||(t[40]=u(" Delete"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(K),{open:se.value,"onUpdate:open":t[9]||(t[9]=s=>se.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[800px] w-full"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[41]||(t[41]=[u("Add New File")])),_:1}),l(e(W),null,{default:a(()=>{var s;return[t[42]||(t[42]=u(" Create a new file for ")),o("b",null,p((s=e(S))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),o("form",{onSubmit:O(Ue,["prevent"]),class:"space-y-6"},[o("div",Ut,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[43]||(t[43]=[u("Municipal Status")])),_:1}),l(e(N),{modelValue:e(c).municipalStatus,"onUpdate:modelValue":t[6]||(t[6]=s=>e(c).municipalStatus=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(ee),null,{default:a(()=>[l(e(te),null,{default:a(()=>t[44]||(t[44]=[u("Status")])),_:1}),l(e(_),{value:"1"},{default:a(()=>t[45]||(t[45]=[u("Draft Ordinance")])),_:1}),l(e(_),{value:"2"},{default:a(()=>t[46]||(t[46]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",At,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[47]||(t[47]=[u("Title of Ordinance")])),_:1}),l(e(pe),{modelValue:e(c).title,"onUpdate:modelValue":t[7]||(t[7]=s=>e(c).title=s),class:"w-full",required:""},null,8,["modelValue"])]),o("div",Nt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[48]||(t[48]=[u("Author")])),_:1}),l(e(N),{modelValue:e(c).author,"onUpdate:modelValue":t[8]||(t[8]=s=>e(c).author=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(T),null,{default:a(()=>{var s;return[l(e(te),null,{default:a(()=>t[49]||(t[49]=[u("Authors")])),_:1}),(f(!0),x(P,null,A((s=e(S))==null?void 0:s.files.authors,d=>(f(),y(e(ee),null,{default:a(()=>[l(e(_),{value:d.encrypted_id},{default:a(()=>[u(p(d.name),1)]),_:2},1032,["value"])]),_:2},1024))),256))]}),_:1})]),_:1},8,["modelValue"])]),o("div",Et,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[50]||(t[50]=[u("Co Authors")])),_:1}),o("div",qt,[(f(!0),x(P,null,A(e(c).coauthor,(s,d)=>(f(),x("div",{key:d,class:"flex items-center gap-2"},[l(e(N),{modelValue:e(c).coauthor[d],"onUpdate:modelValue":r=>e(c).coauthor[d]=r,required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(te),null,{default:a(()=>t[51]||(t[51]=[u("Authors")])),_:1}),l(e(ee),null,{default:a(()=>{var r;return[(f(!0),x(P,null,A((r=e(S))==null?void 0:r.files.authors,D=>(f(),y(e(_),{key:D.encrypted_id,value:D.encrypted_id},{default:a(()=>[u(p(D.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o("button",{type:"button",onClick:r=>Ee(d),class:"text-red-500 hover:text-red-700 text-sm cursor-pointer"}," ✕ ",8,Tt)]))),128)),o("button",{type:"button",onClick:Ne,class:"text-blue-500 hover:text-blue-700 text-sm cursor-pointer"}," + Add ")])]),o("div",Rt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[52]||(t[52]=[u("Upload a File")])),_:1}),l(e(C),{type:"file",class:"col-span-3",onChange:Ae,accept:".pdf",required:""})]),l(e(h),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(c).processing},{default:a(()=>[e(c).processing?(f(),y(e(G),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[53]||(t[53]=u(" Save "))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(K),{open:oe.value,"onUpdate:open":t[25]||(t[25]=s=>oe.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[800px] w-full max-h-[90vh] overflow-y-auto"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[54]||(t[54]=[u("Edit File")])),_:1}),l(e(W),null,{default:a(()=>t[55]||(t[55]=[u("Edit the selected file's details below.")])),_:1})]),_:1}),o("form",{onSubmit:O(Te,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[56]||(t[56]=[u("Municipal Status")])),_:1}),l(e(N),{modelValue:e(n).municipalStatus,"onUpdate:modelValue":t[10]||(t[10]=s=>e(n).municipalStatus=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(_),{value:"1"},{default:a(()=>t[57]||(t[57]=[u("Draft Ordinance")])),_:1}),l(e(_),{value:"2"},{default:a(()=>t[58]||(t[58]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[59]||(t[59]=[u("Provincial Status")])),_:1}),l(e(N),{modelValue:e(n).provincialStatus,"onUpdate:modelValue":t[11]||(t[11]=s=>e(n).provincialStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(_),{value:"0"},{default:a(()=>t[60]||(t[60]=[u("No Status Yet")])),_:1}),l(e(_),{value:"1"},{default:a(()=>t[61]||(t[61]=[u("Disapproved Ordinance")])),_:1}),l(e(_),{value:"2"},{default:a(()=>t[62]||(t[62]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Lt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[63]||(t[63]=[u("Title of Ordinance")])),_:1}),l(e(pe),{modelValue:e(n).title,"onUpdate:modelValue":t[12]||(t[12]=s=>e(n).title=s),class:"w-full",required:""},null,8,["modelValue"])]),o("div",It,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[64]||(t[64]=[u("Ordinance Number")])),_:1}),l(e(C),{modelValue:e(n).ordinanceNumber,"onUpdate:modelValue":t[13]||(t[13]=s=>e(n).ordinanceNumber=s),type:"text",class:"w-full"},null,8,["modelValue"])]),o("div",Mt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[65]||(t[65]=[u("Final Title")])),_:1}),l(e(pe),{modelValue:e(n).finalTitle,"onUpdate:modelValue":t[14]||(t[14]=s=>e(n).finalTitle=s),class:"w-full"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[66]||(t[66]=[u("Author")])),_:1}),l(e(N),{modelValue:e(n).author,"onUpdate:modelValue":t[15]||(t[15]=s=>e(n).author=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(T),null,{default:a(()=>{var s;return[(f(!0),x(P,null,A((s=e(S))==null?void 0:s.files.authors,d=>(f(),y(e(_),{key:d.encrypted_id,value:d.encrypted_id},{default:a(()=>[u(p(d.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1},8,["modelValue"])]),o("div",zt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[67]||(t[67]=[u("Co Authors")])),_:1}),o("div",Bt,[(f(!0),x(P,null,A(e(n).coauthor,(s,d)=>(f(),x("div",{key:d,class:"flex items-center gap-2"},[l(e(N),{modelValue:e(n).coauthor[d],"onUpdate:modelValue":r=>e(n).coauthor[d]=r,required:"",class:"flex-1"},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a co-author"})]),_:1}),l(e(T),null,{default:a(()=>{var r;return[(f(!0),x(P,null,A((r=e(S))==null?void 0:r.files.authors,D=>(f(),y(e(_),{key:D.encrypted_id,value:D.encrypted_id},{default:a(()=>[u(p(D.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o("button",{type:"button",onClick:r=>Ie(d),class:"text-red-500 cursor-pointer"},"✕",8,Ot)]))),128)),o("button",{type:"button",onClick:Le,class:"text-blue-500 text-sm cursor-pointer"}," + Add ")])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[68]||(t[68]=[u("1st Reading Date")])),_:1}),l(e(C),{modelValue:e(n).firstReadingDate,"onUpdate:modelValue":t[16]||(t[16]=s=>e(n).firstReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[69]||(t[69]=[u("2nd Reading Date")])),_:1}),l(e(C),{modelValue:e(n).secondReadingDate,"onUpdate:modelValue":t[17]||(t[17]=s=>e(n).secondReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[70]||(t[70]=[u("3rd Reading Date")])),_:1}),l(e(C),{modelValue:e(n).thirdReadingDate,"onUpdate:modelValue":t[18]||(t[18]=s=>e(n).thirdReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[71]||(t[71]=[u("Enactment Date")])),_:1}),l(e(C),{modelValue:e(n).enactmentDate,"onUpdate:modelValue":t[19]||(t[19]=s=>e(n).enactmentDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[72]||(t[72]=[u("LCE Approval Date")])),_:1}),l(e(C),{modelValue:e(n).lceapprovalDate,"onUpdate:modelValue":t[20]||(t[20]=s=>e(n).lceapprovalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[73]||(t[73]=[u("Transmittal Date")])),_:1}),l(e(C),{modelValue:e(n).transmittalDate,"onUpdate:modelValue":t[21]||(t[21]=s=>e(n).transmittalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[74]||(t[74]=[u("SPSL Approval Date")])),_:1}),l(e(C),{modelValue:e(n).spslapprovalDate,"onUpdate:modelValue":t[22]||(t[22]=s=>e(n).spslapprovalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[75]||(t[75]=[u("Post Status")])),_:1}),l(e(N),{modelValue:e(n).postStatus,"onUpdate:modelValue":t[23]||(t[23]=s=>e(n).postStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(ee),null,{default:a(()=>[l(e(te),null,{default:a(()=>t[76]||(t[76]=[u("Status")])),_:1}),l(e(_),{value:"0"},{default:a(()=>t[77]||(t[77]=[u("Not Yet")])),_:1}),l(e(_),{value:"1"},{default:a(()=>t[78]||(t[78]=[u("Posted")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[79]||(t[79]=[u("Publish Status")])),_:1}),l(e(N),{modelValue:e(n).publishStatus,"onUpdate:modelValue":t[24]||(t[24]=s=>e(n).publishStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(ee),null,{default:a(()=>[l(e(te),null,{default:a(()=>t[80]||(t[80]=[u("Status")])),_:1}),l(e(_),{value:"0"},{default:a(()=>t[81]||(t[81]=[u("Not Yet")])),_:1}),l(e(_),{value:"1"},{default:a(()=>t[82]||(t[82]=[u("Published")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Kt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[83]||(t[83]=[u("Update File")])),_:1}),l(e(C),{type:"file",onChange:Re,accept:".pdf"})]),o("div",Qt,[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(n).processing},{default:a(()=>[e(n).processing?(f(),y(e(G),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[84]||(t[84]=u(" Save "))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"]),l(e(K),{open:ue.value,"onUpdate:open":t[26]||(t[26]=s=>ue.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[85]||(t[85]=[u("Delete File")])),_:1}),l(e(W),null,{default:a(()=>t[86]||(t[86]=[u(" Are you sure you want to delete this file? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:O(Be,["prevent"])},[l(e(h),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(X).processing},{default:a(()=>[e(X).processing?(f(),y(e(G),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[87]||(t[87]=u(" Delete"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),l(e(ye),null,{default:a(()=>[l(e(xe),null,{default:a(()=>[l(e(I),null,{default:a(()=>[l(e(w),{class:"w-[50px]"},{default:a(()=>t[88]||(t[88]=[o("small",null,"#",-1)])),_:1}),l(e(w),{class:"w-[300px]"},{default:a(()=>t[89]||(t[89]=[o("small",null,"Category",-1)])),_:1}),l(e(w),null,{default:a(()=>t[90]||(t[90]=[o("small",null,"No. of Files",-1)])),_:1}),l(e(w),null,{default:a(()=>t[91]||(t[91]=[o("small",null,"Creation Date",-1)])),_:1}),l(e(w),{class:"text-right"},{default:a(()=>t[92]||(t[92]=[o("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),l(e(_e),null,{default:a(()=>{var s,d;return[e(fe)?(f(),y(e(I),{key:0},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[l(be)]),_:1})]),_:1})):((s=e(S))==null?void 0:s.files.subCategoriesList.length)==0?(f(),y(e(I),{key:1},{default:a(()=>[l(e(v),{colspan:"5"},{default:a(()=>[o("small",jt,[l(e(Se),{class:"mr-2 w-5"}),t[93]||(t[93]=u(" No Data Found "))])]),_:1})]),_:1})):(f(!0),x(P,{key:2},A((d=e(S))==null?void 0:d.files.subCategoriesList,(r,D)=>(f(),y(e(I),{key:r.id},{default:a(()=>[l(e(v),null,{default:a(()=>[o("small",null,p(D+1),1)]),_:2},1024),l(e(v),{class:"w-[300px] pr-20"},{default:a(()=>[o("a",{href:"#",onClick:ie=>me("admin.files",{id:r.encrypted_id})},[o("div",Wt,[o("div",null,[l(e(ve),{class:"h-8 w-8 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"})]),o("div",null,[o("div",Gt,p(r.category),1)])])],8,Yt)]),_:2},1024),l(e(v),null,{default:a(()=>[u(p(r.totalFiles),1)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",null,p(ul(r.created_at)),1)]),_:2},1024),l(e(v),{class:"text-right"},{default:a(()=>[l(e(b),{variant:"link",onClick:ie=>Qe(r.encrypted_id,r.category),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(De))]),_:2},1032,["onClick"]),l(e(b),{variant:"destructive",onClick:ie=>Ye(r.encrypted_id),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(Ve))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1}),o("div",Ht,[l(e(C),{modelValue:ae.value,"onUpdate:modelValue":t[27]||(t[27]=s=>ae.value=s),placeholder:"Search... (if no results, go to next page)",class:"w-full max-w-md text-sm"},null,8,["modelValue"]),l(e(b),{onClick:t[28]||(t[28]=s=>{var d;return Pe((d=e(S))==null?void 0:d.files.categoryName.encrypted_id)}),class:"cursor-pointer"},{default:a(()=>t[94]||(t[94]=[u(" + New ")])),_:1})]),l(e(ye),null,{default:a(()=>[l(e(xe),null,{default:a(()=>[l(e(I),null,{default:a(()=>[l(e(w),{class:"w-[50px]"},{default:a(()=>t[95]||(t[95]=[o("small",null,"#",-1)])),_:1}),l(e(w),{class:"w-[50px]"},{default:a(()=>t[96]||(t[96]=[o("small",null,"File",-1)])),_:1}),l(e(w),{class:"w-[300px]"},{default:a(()=>t[97]||(t[97]=[o("small",null,"Title",-1)])),_:1}),l(e(w),null,{default:a(()=>t[98]||(t[98]=[o("small",null,"Ordinance Number",-1)])),_:1}),l(e(w),null,{default:a(()=>t[99]||(t[99]=[o("small",null,"Author",-1)])),_:1}),l(e(w),null,{default:a(()=>t[100]||(t[100]=[o("small",null,"Mun. Status",-1)])),_:1}),l(e(w),null,{default:a(()=>t[101]||(t[101]=[o("small",null,"Prov. Status",-1)])),_:1}),l(e(w),{class:"text-right"},{default:a(()=>t[102]||(t[102]=[o("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),l(e(_e),null,{default:a(()=>[e(fe)?(f(),y(e(I),{key:0},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[l(be)]),_:1})]),_:1})):ge.value.length===0?(f(),y(e(I),{key:1},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[o("small",Jt,[l(e(Se),{class:"mr-2 w-5"}),t[103]||(t[103]=u(" No Data Found "))])]),_:1})]),_:1})):(f(!0),x(P,{key:2},A(ge.value,(s,d)=>(f(),y(e(I),{key:s.encrypted_id},{default:a(()=>[l(e(v),null,{default:a(()=>[o("small",null,p(d+1),1)]),_:2},1024),l(e(v),null,{default:a(()=>[o("a",{href:`/storage/files/${s.file}`,target:"_blank"},[l(e(xt),{class:"w-5 h-5 text-green-500"})],8,Xt)]),_:2},1024),l(e(v),{class:"pr-5"},{default:a(()=>[o("a",{href:"#",onClick:r=>me("admin.view-file",{id:s.encrypted_id})},[o("div",ht,p(s.title),1)],8,Zt)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",el,p(s.ordinanceNumber??"-"),1)]),_:2},1024),l(e(v),{class:"pr-5"},{default:a(()=>[o("div",tl,[o("b",null,p(s.author.name),1)]),t[105]||(t[105]=o("div",null,[o("small",{class:"text-blue-500"},"Co Authors:")],-1)),(f(!0),x(P,null,A(s.coAuthors,r=>(f(),x("div",{key:r.official.name},[o("small",ll,p(r.official.name),1)]))),128)),s.coAuthors.length==0?(f(),x("div",al,t[104]||(t[104]=[o("small",null,"None",-1)]))):L("",!0)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",{class:ce(s.municipalStatus==1?"text-wrap text-red-500":"text-wrap text-green-500")},p(s.municipalStatus==1?"Draft":"Approved"),3)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",{class:ce(s.provincialStatus==1?"text-wrap text-red-500":s.provincialStatus==2?"text-wrap text-green-500":"text-wrap text-gray-500")},p(s.provincialStatus==null?"-":s.provincialStatus==1?"Disapproved":"Approved"),3)]),_:2},1024),l(e(v),{class:"text-right"},{default:a(()=>[o("a",{href:"#",onClick:r=>me("admin.view-file",{id:s.encrypted_id})},[l(e(b),{variant:"link",class:"ml-0 cursor-pointer"},{default:a(()=>[l(e(_t))]),_:1})],8,sl),l(e(b),{variant:"link",class:"ml-0 cursor-pointer",onClick:r=>qe(s.encrypted_id,s.categoryID,s.municipalStatus,s.provincialStatus,s.title,s.author.encrypted_id,Me(s.coAuthors),s.firstReadingDate,s.secondReadingDate,s.thirdReadingDate,s.ordinanceNumber,s.finalTitle,s.enactmentDate,s.lceapprovalDate,s.transmittalDate,s.spslapprovalDate,s.postStatus,s.publishStatus)},{default:a(()=>[l(e(De))]),_:2},1032,["onClick"]),l(e(b),{variant:"destructive",class:"ml-0 cursor-pointer",onClick:r=>ze(s.encrypted_id)},{default:a(()=>[l(e(Ve))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),o("div",ol,[l(e(b),{disabled:U.value.currentPage<=1,onClick:$e,class:"cursor-pointer"},{default:a(()=>[l(e(bt))]),_:1},8,["disabled"]),o("small",null," Pages "+p(U.value.currentPage)+" of "+p(U.value.lastPage),1),l(e(b),{disabled:U.value.currentPage>=U.value.lastPage,onClick:Fe,class:"cursor-pointer"},{default:a(()=>[l(e(St))]),_:1},8,["disabled"])])])]}),_:1})],64))}});export{Cl as default};
