import{d as A,r as g,p as B,q as O,c,o as l,a,b as t,w as o,u as n,m as I,J as V,e as u,P as Q,F as x,i as y,g as U,t as i,n as k,j as W}from"./app-CcRrdmyW.js";import{_ as L}from"./index-Bl_V7f6V.js";import{F as z,_ as J}from"./NavFooter.vue_vue_type_script_setup_true_lang-DJVGY2Tk.js";import{d as F,_ as w,a as $,c as C,b as K}from"./CardTitle.vue_vue_type_script_setup_true_lang-BpvU1HvN.js";import{_ as Y,C as D,a as G}from"./SkeletonBox.vue_vue_type_script_setup_true_lang-D6e8n-oA.js";import{u as H,a as R,C as N}from"./Skeleton.vue_vue_type_script_setup_true_lang-ez4uci9I.js";import{_ as X,P as Z,F as ee}from"./SkeletonCard.vue_vue_type_script_setup_true_lang-DVglQR6_.js";import{_ as te}from"./Pagination.vue_vue_type_script_setup_true_lang-BRAFZMem.js";const se={class:"flex min-h-screen flex-col items-center bg-[#FDFDFC] p-6 text-[#1b1b18] dark:bg-[#0a0a0a] lg:justify-center lg:p-8"},ae={class:"not-has-[nav]:hidden mb-6 w-full lg:px-40"},ne={class:"flex items-center justify-between gap-4 w-full"},oe={class:"flex items-center gap-4"},le={class:"min-h-screen flex flex-col w-full"},ie={class:"flex-1 w-full lg:px-20 lg:pt-10"},re={class:"mx-5"},de={class:"flex justify-center items-center gap-2 md:mb-0"},ce={class:"grid grid-cols-1 xl:grid-cols-3 gap-4"},ue={class:"flex items-center space-x-4 rounded-md border p-4"},pe=["src"],me={class:"flex-1 space-y-1"},fe={class:"text-sm font-medium leading-none"},ge={class:"text-[13px] text-muted-foreground"},xe={class:"text-[14px] font-bold text-gray-600"},_e={class:"text-[14px]"},he={class:"mb-4 grid grid-cols-[25px_minmax(0,1fr)] items-start pb-0 last:mb-0 last:pb-0"},ve={class:"space-y-1"},be={class:"text-sm font-medium leading-none"},ye={class:"text-[12px] text-muted-foreground"},we={class:"text-gray-500 text-[13px] flex items-center gap-2"},Pe={key:0},Se={key:1},ke={class:"text-gray-500 text-[13px] flex items-center gap-2"},Le={key:0},Fe={key:1},$e={class:"text-gray-500"},Ce=["href"];function De(P){const r=new Date(P),_=r.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),m=r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${_} | ${m}`}const Ve=A({__name:"Welcome",setup(P){H();const r=g(1),_=g(""),m=g([]),f=g({currentPage:1,lastPage:1,hasMorePages:!1}),M=async()=>(await W.post("/graphql",{query:`
    query ($page: Int, $first: Int!)  {
      welcome(page: $page, first: $first) {
        filesListPaginated {
          data {
            municipalStatus
            provincialStatus
            title
            ordinanceNumber
            finalTitle
            file
            updated_at
            author {
                name
                photo
                position
            }
            coAuthors {
                official {
                    name
                    position
                }
            }
            category {
                category
            }
          }
          paginatorInfo {
            currentPage
            lastPage
            total
            perPage
            hasMorePages
          }
        }
      }
    }
  `,variables:{page:r.value,first:10}})).data.data,{data:h,isPending:Ne,isFetching:j,isLoading:Me}=R({queryKey:["guestFetchFiles",r],queryFn:M});B(()=>{var d,e;(e=(d=h.value)==null?void 0:d.welcome)!=null&&e.filesListPaginated&&(m.value=h.value.welcome.filesListPaginated.data,f.value=h.value.welcome.filesListPaginated.paginatorInfo)});const q=O(()=>{const d=_.value.toLowerCase();return m.value.filter(e=>{var s,v,p,b,S;return((s=e.title)==null?void 0:s.toLowerCase().includes(d))||((p=(v=e.ordinanceNumber)==null?void 0:v.toLowerCase())==null?void 0:p.includes(d))||((S=(b=e.author.name)==null?void 0:b.toLowerCase())==null?void 0:S.includes(d))})}),T=()=>{r.value<f.value.lastPage&&r.value++},E=()=>{r.value>1&&r.value--};return(d,e)=>(l(),c(x,null,[a(n(I),{title:"Welcome"},{default:o(()=>e[0]||(e[0]=[t("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1),t("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1)])),_:1}),t("div",se,[t("header",ae,[t("nav",ne,[e[3]||(e[3]=V('<div class="flex items-center gap-3"><img draggable="false" src="/app-logo.jpg" alt="Logo" class="h-10 w-auto"><div class="flex flex-col leading-tight"><div class="hidden sm:flex flex-col"><span class="text-base font-semibold text-[#1b1b18] text-[14px] dark:text-white"> Legislative MS </span><span class="text-sm text-gray-500 text-[12px] dark:text-gray-400"> Legislative Management System </span></div><span class="block sm:hidden text-base font-semibold text-[#1b1b18] dark:text-white"> LMS </span></div></div>',1)),t("div",oe,[a(n(Q),{href:d.route("login"),class:"inline-block rounded-sm border border-transparent px-5 py-1.5 text-sm leading-normal text-[#1b1b18] hover:border-[#19140035] dark:text-[#EDEDEC] dark:hover:border-[#3E3E3A]"},{default:o(()=>e[1]||(e[1]=[u(" Log in ")])),_:1},8,["href"]),a(L,{class:"inline-block rounded-sm"},{default:o(()=>e[2]||(e[2]=[u(" LMS ")])),_:1})])])]),t("div",le,[t("main",ie,[a(n(w),{class:"shadow-none mb-4 py-2"},{default:o(()=>[t("div",re,[a(n(F),{class:"text-center font-bold md:flex items-center gap-2 justify-center md:justify-between"},{default:o(()=>[t("div",de,[a(n(z),{class:"mb-[2px] w-5 h-auto"}),e[4]||(e[4]=u(" List of Ordinances "))]),e[5]||(e[5]=t("div",{class:"md:flex hidden"}," Municpality of Bontoc ",-1))]),_:1})])]),_:1}),t("div",ce,[n(j)?(l(),c(x,{key:0},y(3,s=>a(n(w),{class:"shadow-none"},{default:o(()=>[a(n($),{class:"text-[14px]"},{default:o(()=>[a(X)]),_:1}),a(n(C),{class:"grid gap-4"},{default:o(()=>[a(Y)]),_:1})]),_:1})),64)):(l(!0),c(x,{key:1},y(q.value,(s,v)=>(l(),U(n(w),{class:"shadow-none flex flex-col h-full"},{default:o(()=>[a(n($),{class:"text-[14px]"},{default:o(()=>[a(n(K),null,{default:o(()=>e[6]||(e[6]=[u("Ordinance Number")])),_:1}),a(n(F),null,{default:o(()=>[u(i(s.ordinanceNumber!=null?s.ordinanceNumber:"-"),1)]),_:2},1024),t("div",ue,[t("img",{draggable:"false",src:"/storage/profile/"+s.author.photo,class:"w-10 h-10 rounded-full object-cover"},null,8,pe),t("div",me,[t("p",fe,i(s.author.name),1),t("p",ge,i(s.author.position),1)]),a(n(Z),{class:"h-auto w-5"})])]),_:2},1024),a(n(C),{class:"grid gap-4"},{default:o(()=>[t("div",xe,i(s.category.category),1),t("div",null,[t("p",_e,i(s.finalTitle==null?s.title:s.finalTitle),1)]),t("div",null,[e[8]||(e[8]=t("div",{class:"text-[14px] mb-4 font-bold text-blue-500"},"Co-Authors",-1)),(l(!0),c(x,null,y(s.coAuthors,(p,b)=>(l(),c("div",he,[e[7]||(e[7]=t("span",{class:"flex h-2 w-2 translate-y-1 rounded-full bg-sky-500"},null,-1)),t("div",ve,[t("p",be,i(p.official.name),1),t("p",ye,i(p.official.position),1)])]))),256))]),t("div",we,[s.municipalStatus==1?(l(),c("div",Pe,[a(n(N),{class:"w-5 h-5 text-red-500"})])):(l(),c("div",Se,[a(n(D),{class:"w-5 h-5 text-green-500"})])),e[9]||(e[9]=u(" Municipal Status: ")),t("span",{class:k(s.municipalStatus==1?"text-red-500":"text-green-500")},i(s.municipalStatus==1?"Draft Ordinance":"Approved Ordinance"),3)]),t("div",ke,[s.provincialStatus==null||s.provincialStatus==1?(l(),c("div",Le,[a(n(N),{class:"w-5 h-5 text-red-500"})])):(l(),c("div",Fe,[a(n(D),{class:"w-5 h-5 text-green-500"})])),e[10]||(e[10]=u(" Provincial Status: ")),t("span",{class:k([s.provincialStatus==1?"text-red-500":s.provincialStatus==2?"text-green-500":"text-gray-500"])},i(s.provincialStatus==1?"Disapproved":s.provincialStatus==2?"Approved Ordinance":"No Status Yet"),3)]),t("small",$e,i(De(s.updated_at)),1)]),_:2},1024),a(n(G),{class:"mt-auto"},{default:o(()=>[a(L,{class:"w-full text-[12px] cursor-pointer"},{default:o(()=>[t("a",{href:"/storage/files/"+s.file,class:"flex items-center gap-2",target:"_blank"},[a(n(ee)),e[11]||(e[11]=u(" Open PDF File "))],8,Ce)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),a(te,{"current-page":f.value.currentPage,"last-page":f.value.lastPage,onNext:T,onPrevious:E},null,8,["current-page","last-page"])]),a(J)])])],64))}});export{Ve as default};
