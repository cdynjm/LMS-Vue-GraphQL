import{d as Z,r as q,C,c as B,o as u,a as l,u as e,m as h,w as a,b as n,e as o,f as E,g as f,h as D,F as T,i as ee,t as b,j as se}from"./app-BatLQZTx.js";import{_ as le,K as p}from"./AppLayout.vue_vue_type_script_setup_true_lang-4Yyl2RaC.js";import{_ as U,a as ae,b as N,c as S,d as F,e as P,f as K}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DAVgp71x.js";import{_ as te,a as ne,b as $,c as x,d as oe,e as m,f as re}from"./Skeleton.vue_vue_type_script_setup_true_lang-DfhNUuap.js";import{_ as c}from"./index-_3RhTcsE.js";import{_}from"./Input.vue_vue_type_script_setup_true_lang-DDANwZXd.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-CkxhH1bS.js";import{u as de,a as ie,C as ue}from"./Skeleton.vue_vue_type_script_setup_true_lang-Bept7YPG.js";import{L as j}from"./loader-circle-CKVft72U.js";import{P as me,T as fe}from"./trash-2-_vyGn-Ds.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-dK4X6TPk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-h-rMBqN2.js";const pe={class:"p-4 space-y-6"},ce={class:"flex w-full justify-between items-center"},_e={class:"grid gap-4 py-4"},ge={class:"grid grid-cols-4 items-center gap-4"},ye={class:"grid grid-cols-4 items-center gap-4"},ve={class:"grid grid-cols-4 items-center gap-4"},xe={class:"grid gap-4 py-4"},we={class:"grid grid-cols-4 items-center gap-4"},Ae={class:"grid grid-cols-4 items-center gap-4"},Ve={class:"grid grid-cols-4 items-center gap-4"},be={class:"text-center text-red-500 flex items-center justify-center"},Be=Z({__name:"Admin-Management",setup($e){const k=de(),L=[{title:"Admin Management",href:"/admin/admin-management"}],J=async()=>(await se.post("/graphql",{query:`
    query {
      admins {
        encrypted_id
        name
        email
        role
      }
    }
  `})).data.data,{isPending:R,error:ke,data:M,isFetching:qe}=ie({queryKey:["fetchAdmins"],queryFn:J}),w=q(!1);function z(){w.value=!0}const d=C({name:"",email:"",password:""}),G=()=>{d.post(route("create.admin"),{onSuccess:()=>{p.success("Admin account created successfully"),d.reset(),w.value=!1,k.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{p.error("Email already exists"),console.error("Error")}})},A=q(!1);function H(v,s,t){r.id=v,r.name=s,r.email=t,A.value=!0}const r=C({id:"",name:"",email:"",password:""}),I=()=>{r.patch(route("update.admin"),{onSuccess:()=>{p.success("Admin account updated successfully"),r.reset(),A.value=!1,k.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{p.error("Email already exists"),console.error("Error")}})},V=q(!1);function O(v){y.id=v,V.value=!0}const y=C({id:""}),W=()=>{y.delete(route("delete.admin"),{onSuccess:()=>{p.success("Admin account deleted successfully"),y.reset(),V.value=!1,k.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{p.error("Deletion Error"),console.error("Error")}})};return(v,s)=>(u(),B(T,null,[l(e(h),{title:"Admin Management"}),l(le,{breadcrumbs:L},{default:a(()=>[n("div",pe,[n("div",ce,[s[25]||(s[25]=n("h6",{class:"flex-1 text-md font-bold"},"Administrators",-1)),l(e(U),{open:w.value,"onUpdate:open":s[3]||(s[3]=t=>w.value=t)},{default:a(()=>[l(e(ae),{"as-child":""},{default:a(()=>[l(e(c),{onClick:z,class:"cursor-pointer"},{default:a(()=>s[9]||(s[9]=[o(" + New ")])),_:1})]),_:1}),l(e(N),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(S),null,{default:a(()=>[l(e(F),null,{default:a(()=>s[10]||(s[10]=[o("Add Admin")])),_:1}),l(e(P),null,{default:a(()=>s[11]||(s[11]=[o(" Enter details for a new admin ")])),_:1})]),_:1}),n("form",{action:"",onSubmit:E(G,["prevent"])},[n("div",_e,[n("div",ge,[l(e(g),{class:"text-right"},{default:a(()=>s[12]||(s[12]=[o("Name")])),_:1}),l(e(_),{modelValue:e(d).name,"onUpdate:modelValue":s[0]||(s[0]=t=>e(d).name=t),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",ye,[l(e(g),{class:"text-right"},{default:a(()=>s[13]||(s[13]=[o("Email")])),_:1}),l(e(_),{modelValue:e(d).email,"onUpdate:modelValue":s[1]||(s[1]=t=>e(d).email=t),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",ve,[l(e(g),{class:"text-start"},{default:a(()=>s[14]||(s[14]=[o("Password")])),_:1}),l(e(_),{modelValue:e(d).password,"onUpdate:modelValue":s[2]||(s[2]=t=>e(d).password=t),placeholder:"Password",type:"password",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(K),null,{default:a(()=>[l(e(c),{type:"submit",class:"cursor-pointer",disabled:e(d).processing},{default:a(()=>[e(d).processing?(u(),f(e(j),{key:0,class:"h-4 w-4 animate-spin"})):D("",!0),s[15]||(s[15]=o(" Save "))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(U),{open:A.value,"onUpdate:open":s[7]||(s[7]=t=>A.value=t)},{default:a(()=>[l(e(N),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(S),null,{default:a(()=>[l(e(F),null,{default:a(()=>s[16]||(s[16]=[o("Edit Admin")])),_:1}),l(e(P),null,{default:a(()=>s[17]||(s[17]=[o(" Update details for the admin ")])),_:1})]),_:1}),n("form",{action:"",onSubmit:E(I,["prevent"])},[n("div",xe,[n("div",we,[l(e(g),{class:"text-right"},{default:a(()=>s[18]||(s[18]=[o("Name")])),_:1}),l(e(_),{modelValue:e(r).name,"onUpdate:modelValue":s[4]||(s[4]=t=>e(r).name=t),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",Ae,[l(e(g),{class:"text-right"},{default:a(()=>s[19]||(s[19]=[o("Email")])),_:1}),l(e(_),{modelValue:e(r).email,"onUpdate:modelValue":s[5]||(s[5]=t=>e(r).email=t),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",Ve,[l(e(g),{class:"text-start"},{default:a(()=>s[20]||(s[20]=[o("Change Password")])),_:1}),l(e(_),{modelValue:e(r).password,"onUpdate:modelValue":s[6]||(s[6]=t=>e(r).password=t),placeholder:"Password",type:"password",class:"col-span-3"},null,8,["modelValue"])])]),l(e(K),null,{default:a(()=>[l(e(c),{type:"submit",class:"cursor-pointer",disabled:e(r).processing},{default:a(()=>[e(r).processing?(u(),f(e(j),{key:0,class:"h-4 w-4 animate-spin"})):D("",!0),s[21]||(s[21]=o(" Save"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(U),{open:V.value,"onUpdate:open":s[8]||(s[8]=t=>V.value=t)},{default:a(()=>[l(e(N),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(S),null,{default:a(()=>[l(e(F),null,{default:a(()=>s[22]||(s[22]=[o("Delete Admin")])),_:1}),l(e(P),null,{default:a(()=>s[23]||(s[23]=[o(" Are you sure you want to delete this admin? This action cannot be undone. ")])),_:1})]),_:1}),n("form",{action:"",onSubmit:E(W,["prevent"])},[l(e(K),null,{default:a(()=>[l(e(c),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(y).processing},{default:a(()=>[e(y).processing?(u(),f(e(j),{key:0,class:"h-4 w-4 animate-spin"})):D("",!0),s[24]||(s[24]=o(" Delete"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),l(e(te),null,{default:a(()=>[l(e(ne),null,{default:a(()=>[l(e($),null,{default:a(()=>[l(e(x),{class:"w-[50px]"},{default:a(()=>s[26]||(s[26]=[n("small",null,"#",-1)])),_:1}),l(e(x),null,{default:a(()=>s[27]||(s[27]=[n("small",null,"Name",-1)])),_:1}),l(e(x),null,{default:a(()=>s[28]||(s[28]=[n("small",null,"Email",-1)])),_:1}),l(e(x),null,{default:a(()=>s[29]||(s[29]=[n("small",null,"Role",-1)])),_:1}),l(e(x),{class:"text-right"},{default:a(()=>s[30]||(s[30]=[n("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),l(e(oe),null,{default:a(()=>{var t,Q;return[e(R)?(u(),f(e($),{key:0},{default:a(()=>[l(e(m),{colspan:"5",class:"text-center"},{default:a(()=>[l(re)]),_:1})]),_:1})):((t=e(M))==null?void 0:t.admins.length)===0?(u(),f(e($),{key:1},{default:a(()=>[l(e(m),{colspan:"10"},{default:a(()=>[n("small",be,[l(e(ue),{class:"mr-2 w-5"}),s[31]||(s[31]=o(" No Data Found "))])]),_:1})]),_:1})):(u(!0),B(T,{key:2},ee((Q=e(M))==null?void 0:Q.admins,(i,X)=>(u(),f(e($),{key:i.encrypted_id},{default:a(()=>[l(e(m),null,{default:a(()=>[n("small",null,b(X+1),1)]),_:2},1024),l(e(m),null,{default:a(()=>[o(b(i.name),1)]),_:2},1024),l(e(m),null,{default:a(()=>[o(b(i.email),1)]),_:2},1024),l(e(m),null,{default:a(()=>[o(b(i.role==1?"Admin":""),1)]),_:2},1024),l(e(m),{class:"text-right"},{default:a(()=>[l(e(c),{variant:"link",class:"ml-2 cursor-pointer",onClick:Y=>H(i.encrypted_id,i.name,i.email)},{default:a(()=>[l(e(me))]),_:2},1032,["onClick"]),l(e(c),{variant:"destructive",onClick:Y=>O(i.encrypted_id),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(fe))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1})])]),_:1})],64))}});export{Be as default};
