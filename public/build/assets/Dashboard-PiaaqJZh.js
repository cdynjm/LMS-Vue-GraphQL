import{F as O,U as T,_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-BMX_0Q05.js";import{d as A,c as i,o as n,a as e,u as t,m as B,w as a,b as o,P as w,g as c,e as d,t as l,F as g,i as C,n as F,j as U}from"./app-DyVB8uVv.js";import{u as L,a as V,C as P}from"./Skeleton.vue_vue_type_script_setup_true_lang-DsqJI58h.js";import{_ as f,a as p,b as y,c as u,d as M}from"./CardTitle.vue_vue_type_script_setup_true_lang-17b9J2b-.js";import{_ as Q,C as N,a as z}from"./SkeletonBox.vue_vue_type_script_setup_true_lang-DWuSttI3.js";import{_ as b,F as q,P as E}from"./SkeletonCard.vue_vue_type_script_setup_true_lang-BhWMyBQg.js";import{_ as K}from"./index-C937B89l.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-D04IC9SS.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DzrdwzEy.js";const Y={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4"},G={class:"text-2xl font-bold"},H={class:"text-2xl font-bold"},I={class:"text-2xl font-bold"},J={class:"grid grid-cols-1 xl:grid-cols-3 gap-4 p-4"},R={class:"flex items-center space-x-4 rounded-md border p-4"},W=["src"],X={class:"flex-1 space-y-1"},Z={class:"text-sm font-medium leading-none"},tt={class:"text-[13px] text-muted-foreground"},et={class:"text-[14px] font-bold text-gray-600"},st={class:"text-[14px]"},at={class:"mb-4 grid grid-cols-[25px_minmax(0,1fr)] items-start pb-0 last:mb-0 last:pb-0"},ot={class:"space-y-1"},rt={class:"text-sm font-medium leading-none"},nt={class:"text-[12px] text-muted-foreground"},lt={class:"text-gray-500 text-[13px] flex items-center gap-2"},it={key:0},dt={key:1},ut={class:"text-gray-500 text-[13px] flex items-center gap-2"},ct={key:0},ft={key:1},pt={class:"text-gray-500"},_t=["href"];function mt(k){const _=new Date(k),v=_.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),S=_.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${v} | ${S}`}const Ft=A({__name:"Dashboard",setup(k){const _=[{title:"Dashboard",href:"/user/dashboard"}];L();const v=async()=>(await U.post("/graphql",{query:`
        query {
            userdashboard {
                officialsCount
                categoriesCount
                filesCount
                files {
                    municipalStatus
                    provincialStatus
                    title
                    ordinanceNumber
                    finalTitle
                    file
                    updated_at
                    author {
                        name
                        photo
                        position
                    }
                    coAuthors {
                        official {
                            name
                            position
                        }
                    }
                    category {
                        category
                    }
                }
            }
        }
    `})).data.data,{isPending:S,data:m,error:xt,isFetching:x}=V({queryKey:["fetchDashboardCounts"],queryFn:v});return(h,r)=>(n(),i(g,null,[e(t(B),{title:"Dashboard"}),e(j,{breadcrumbs:_},{default:a(()=>{var D;return[o("div",Y,[e(t(w),{href:h.route("user.file-manager"),prefetch:""},{default:a(()=>[e(t(f),{class:"pt-0 shadow-none"},{default:a(()=>[e(t(p),{class:"flex items-center justify-between bg-blue-50 py-2"},{default:a(()=>[e(t(y),{class:"text-[13px]"},{default:a(()=>r[0]||(r[0]=[d("Categories")])),_:1}),e(t(O),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(x)?(n(),c(t(u),{key:0},{default:a(()=>[e(b)]),_:1})):(n(),c(t(u),{key:1},{default:a(()=>{var s;return[o("p",G,l((s=t(m))==null?void 0:s.userdashboard.categoriesCount),1)]}),_:1}))]),_:1})]),_:1},8,["href"]),e(t(w),{href:h.route("user.file-manager"),prefetch:""},{default:a(()=>[e(t(f),{class:"pt-0 shadow-none"},{default:a(()=>[e(t(p),{class:"flex items-center justify-between bg-red-50 py-2"},{default:a(()=>[e(t(y),{class:"text-[13px]"},{default:a(()=>r[1]||(r[1]=[d("Files")])),_:1}),e(t(q),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(x)?(n(),c(t(u),{key:0},{default:a(()=>[e(b)]),_:1})):(n(),c(t(u),{key:1},{default:a(()=>{var s;return[o("p",H,l((s=t(m))==null?void 0:s.userdashboard.filesCount),1)]}),_:1}))]),_:1})]),_:1},8,["href"]),e(t(w),{href:h.route("user.elected-officials"),prefetch:""},{default:a(()=>[e(t(f),{class:"pt-0 shadow-none"},{default:a(()=>[e(t(p),{class:"flex items-center justify-between bg-orange-50 py-2"},{default:a(()=>[e(t(y),{class:"text-[13px]"},{default:a(()=>r[2]||(r[2]=[d("Officials")])),_:1}),e(t(T),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(x)?(n(),c(t(u),{key:0},{default:a(()=>[e(b)]),_:1})):(n(),c(t(u),{key:1},{default:a(()=>{var s;return[o("p",I,l((s=t(m))==null?void 0:s.userdashboard.officialsCount),1)]}),_:1}))]),_:1})]),_:1},8,["href"])]),o("div",J,[t(x)?(n(),i(g,{key:0},C(3,s=>e(t(f),{class:"shadow-none"},{default:a(()=>[e(t(p),{class:"text-[14px]"},{default:a(()=>[e(b)]),_:1}),e(t(u),{class:"grid gap-4"},{default:a(()=>[e(Q)]),_:1})]),_:1})),64)):(n(!0),i(g,{key:1},C((D=t(m))==null?void 0:D.userdashboard.files,(s,ht)=>(n(),c(t(f),{class:"shadow-none flex flex-col h-full"},{default:a(()=>[e(t(p),{class:"text-[14px]"},{default:a(()=>[e(t(y),null,{default:a(()=>r[3]||(r[3]=[d("Ordinance Number")])),_:1}),e(t(M),null,{default:a(()=>[d(l(s.ordinanceNumber!=null?s.ordinanceNumber:"-"),1)]),_:2},1024),o("div",R,[o("img",{src:"/storage/profile/"+s.author.photo,class:"w-10 h-10 rounded-full object-cover"},null,8,W),o("div",X,[o("p",Z,l(s.author.name),1),o("p",tt,l(s.author.position),1)]),e(t(E),{class:"h-auto w-5"})])]),_:2},1024),e(t(u),{class:"grid gap-4"},{default:a(()=>[o("div",et,l(s.category.category),1),o("div",null,[o("p",st,l(s.finalTitle==null?s.title:s.finalTitle),1)]),o("div",null,[r[5]||(r[5]=o("div",{class:"text-[14px] mb-4 font-bold text-blue-500"},"Co-Authors",-1)),(n(!0),i(g,null,C(s.coAuthors,($,gt)=>(n(),i("div",at,[r[4]||(r[4]=o("span",{class:"flex h-2 w-2 translate-y-1 rounded-full bg-sky-500"},null,-1)),o("div",ot,[o("p",rt,l($.official.name),1),o("p",nt,l($.official.position),1)])]))),256))]),o("div",lt,[s.municipalStatus==1?(n(),i("div",it,[e(t(P),{class:"w-5 h-5 text-red-500"})])):(n(),i("div",dt,[e(t(N),{class:"w-5 h-5 text-green-500"})])),r[6]||(r[6]=d(" Municipal Status: ")),o("span",{class:F(s.municipalStatus==1?"text-red-500":"text-green-500")},l(s.municipalStatus==1?"Draft Ordinance":"Approved Ordinance"),3)]),o("div",ut,[s.provincialStatus==null||s.provincialStatus==1?(n(),i("div",ct,[e(t(P),{class:"w-5 h-5 text-red-500"})])):(n(),i("div",ft,[e(t(N),{class:"w-5 h-5 text-green-500"})])),r[7]||(r[7]=d(" Provincial Status: ")),o("span",{class:F([s.provincialStatus==1?"text-red-500":s.provincialStatus==2?"text-green-500":"text-gray-500"])},l(s.provincialStatus==1?"Disapproved":s.provincialStatus==2?"Approved Ordinance":"No Status Yet"),3)]),o("small",pt,l(mt(s.updated_at)),1)]),_:2},1024),e(t(z),{class:"mt-auto"},{default:a(()=>[e(t(K),{class:"w-full text-[12px] cursor-pointer"},{default:a(()=>[o("a",{href:"/storage/files/"+s.file,class:"flex items-center gap-2",target:"_blank"},[e(t(q)),r[8]||(r[8]=d(" Open PDF File "))],8,_t)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))])]}),_:1})],64))}});export{Ft as default};
