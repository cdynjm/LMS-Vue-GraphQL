import{d as E,r as f,p as A,c as i,o,a as s,b as e,w as n,u as a,m as B,J as O,e as d,P as I,h as Q,g as y,F as _,i as w,t as r,n as C,j as U}from"./app-CkXJHGla.js";import{_ as S}from"./index-g1c4YLHr.js";import{F as K,_ as W}from"./NavFooter.vue_vue_type_script_setup_true_lang-LizObbyu.js";import{d as P,_ as h,a as D,c as N,b as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-BgvJ3K6Q.js";import{_ as J,C as j,a as Y}from"./SkeletonBox.vue_vue_type_script_setup_true_lang-CJep_TLE.js";import{_ as G}from"./Input.vue_vue_type_script_setup_true_lang-SibYdbRM.js";import{u as H,a as R,C as k}from"./Skeleton.vue_vue_type_script_setup_true_lang-BCSU6WK9.js";import{_ as X,F as Z}from"./SkeletonCard.vue_vue_type_script_setup_true_lang-YwtksXa5.js";import{S as ee,_ as te}from"./Pagination.vue_vue_type_script_setup_true_lang-HUycKact.js";import{L as se}from"./loader-circle-O_-mCQd8.js";import{P as ae}from"./pen-BfXzQLBp.js";const le={class:"flex min-h-screen flex-col items-center bg-[#FDFDFC] p-6 text-[#1b1b18] dark:bg-[#0a0a0a] lg:justify-center lg:p-8"},ne={class:"not-has-[nav]:hidden mb-6 w-full lg:px-40"},oe={class:"flex items-center justify-between gap-4 w-full"},ie={class:"flex items-center gap-4"},re={class:"min-h-screen flex flex-col w-full"},de={class:"flex-1 w-full lg:px-20 lg:pt-10"},ce={class:"mx-5"},ue={class:"flex justify-center items-center gap-2 md:mb-0"},me={class:"flex items-center gap-2 w-full sm:w-auto my-4"},pe={key:0,class:"grid grid-cols-1 gap-4"},fe={class:"grid grid-cols-1 xl:grid-cols-3 gap-4"},ge={class:"flex items-center space-x-4 rounded-md border p-4"},xe=["src"],_e={class:"flex-1 space-y-1"},he={class:"text-sm font-medium leading-none"},ve={class:"text-[13px] text-muted-foreground"},be={class:"text-[14px] font-bold text-gray-600"},ye={class:"text-[14px]"},we={class:"mb-4 grid grid-cols-[25px_minmax(0,1fr)] items-start pb-0 last:mb-0 last:pb-0"},Se={class:"space-y-1"},Pe={class:"text-sm font-medium leading-none"},ke={class:"text-[12px] text-muted-foreground"},Fe={class:"text-gray-500 text-[13px] flex items-center gap-2"},$e={key:0},Le={key:1},Ce={class:"text-gray-500 text-[13px] flex items-center gap-2"},De={key:0},Ne={key:1},je={class:"text-gray-500"},Me=["href"];function Te(F){const g=new Date(F),c=g.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),u=g.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${c} | ${u}`}const He=E({__name:"Welcome",setup(F){const g=H(),c=f(1),u=f([]),v=f(""),x=f({currentPage:1,lastPage:1,hasMorePages:!1}),M=async()=>(await U.post("/graphql",{query:`
    query ($page: Int, $first: Int!, $search: String)  {
      welcome(page: $page, first: $first, search: $search) {
        filesListPaginated {
          data {
            municipalStatus
            provincialStatus
            title
            ordinanceNumber
            finalTitle
            file
            updated_at
            author {
                name
                photo
                position
            }
            coAuthors {
                official {
                    name
                    position
                }
            }
            category {
                category
            }
          }
          paginatorInfo {
            currentPage
            lastPage
            total
            perPage
            hasMorePages
          }
        }
      }
    }
  `,variables:{page:c.value,first:10,search:v.value}})).data.data,{data:b,isPending:$,isFetching:qe,isLoading:Ve}=R({queryKey:["guestFetchFiles",c],queryFn:M});A(()=>{var p,t;(t=(p=b.value)==null?void 0:p.welcome)!=null&&t.filesListPaginated&&(u.value=b.value.welcome.filesListPaginated.data,x.value=b.value.welcome.filesListPaginated.paginatorInfo)});const m=f(!1),T=()=>{m.value||(m.value=!0,setTimeout(()=>{g.invalidateQueries({queryKey:["guestFetchFiles"]}),m.value=!1},2e3))},q=()=>{c.value<x.value.lastPage&&c.value++},V=()=>{c.value>1&&c.value--};return(p,t)=>(o(),i(_,null,[s(a(B),{title:"Welcome"},{default:n(()=>t[1]||(t[1]=[e("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1),e("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1)])),_:1}),e("div",le,[e("header",ne,[e("nav",oe,[t[4]||(t[4]=O('<div class="flex items-center gap-3"><img draggable="false" src="/app-logo.jpg" alt="Logo" class="h-10 w-auto"><div class="flex flex-col leading-tight"><div class="hidden sm:flex flex-col"><span class="text-base font-semibold text-[#1b1b18] text-[14px] dark:text-white"> Legislative MS </span><span class="text-sm text-gray-500 text-[12px] dark:text-gray-400"> Legislative Management System </span></div><span class="block sm:hidden text-base font-semibold text-[#1b1b18] dark:text-white"> LMS </span></div></div>',1)),e("div",ie,[s(a(I),{href:p.route("login"),class:"inline-block rounded-sm border border-transparent px-5 py-1.5 text-sm leading-normal text-[#1b1b18] hover:border-[#19140035] dark:text-[#EDEDEC] dark:hover:border-[#3E3E3A]"},{default:n(()=>t[2]||(t[2]=[d(" Log in ")])),_:1},8,["href"]),s(S,{class:"inline-block rounded-sm"},{default:n(()=>t[3]||(t[3]=[d(" LMS ")])),_:1})])])]),e("div",re,[e("main",de,[s(a(h),{class:"shadow-none mb-4 py-2"},{default:n(()=>[e("div",ce,[s(a(P),{class:"text-center font-bold md:flex items-center gap-2 justify-center md:justify-between"},{default:n(()=>[e("div",ue,[s(a(K),{class:"mb-[2px] w-5 h-auto"}),t[5]||(t[5]=d(" List of Ordinances "))]),t[6]||(t[6]=e("div",{class:"md:flex hidden"}," Municpality of Bontoc ",-1))]),_:1})])]),_:1}),e("div",me,[s(a(G),{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=l=>v.value=l),placeholder:"Search...",class:"w-full bg-white shadow-none sm:w-full text-sm"},null,8,["modelValue"]),s(S,{onClick:T,disabled:m.value,class:"text-sm flex items-center gap-1"},{default:n(()=>[m.value?(o(),y(a(se),{key:0,class:"h-4 w-4 animate-spin"})):(o(),y(a(ee),{key:1}))]),_:1},8,["disabled"])]),u.value.length==0&&!a($)?(o(),i("div",pe,[s(a(h),{class:"shadow-none"},{default:n(()=>[s(a(P),{class:"text-red-500 flex items-center justify-center text-[12px] gap-2"},{default:n(()=>[s(a(k),{class:"w-5 h-auto"}),t[7]||(t[7]=d(" No Data Found "))]),_:1})]),_:1})])):Q("",!0),e("div",fe,[a($)?(o(),i(_,{key:0},w(3,l=>s(a(h),{class:"shadow-none"},{default:n(()=>[s(a(D),{class:"text-[14px]"},{default:n(()=>[s(X)]),_:1}),s(a(N),{class:"grid gap-4"},{default:n(()=>[s(J)]),_:1})]),_:1})),64)):(o(!0),i(_,{key:1},w(u.value,(l,Ee)=>(o(),y(a(h),{class:"shadow-none flex flex-col h-full"},{default:n(()=>[s(a(D),{class:"text-[14px]"},{default:n(()=>[s(a(z),null,{default:n(()=>t[8]||(t[8]=[d("Ordinance Number")])),_:1}),s(a(P),null,{default:n(()=>[d(r(l.ordinanceNumber!=null?l.ordinanceNumber:"-"),1)]),_:2},1024),e("div",ge,[e("img",{draggable:"false",src:"/storage/profile/"+l.author.photo,class:"w-10 h-10 rounded-full object-cover"},null,8,xe),e("div",_e,[e("p",he,r(l.author.name),1),e("p",ve,r(l.author.position),1)]),s(a(ae),{class:"h-auto w-5"})])]),_:2},1024),s(a(N),{class:"grid gap-4"},{default:n(()=>[e("div",be,r(l.category.category),1),e("div",null,[e("p",ye,r(l.finalTitle==null?l.title:l.finalTitle),1)]),e("div",null,[t[10]||(t[10]=e("div",{class:"text-[14px] mb-4 font-bold text-blue-500"},"Co-Authors",-1)),(o(!0),i(_,null,w(l.coAuthors,(L,Ae)=>(o(),i("div",we,[t[9]||(t[9]=e("span",{class:"flex h-2 w-2 translate-y-1 rounded-full bg-sky-500"},null,-1)),e("div",Se,[e("p",Pe,r(L.official.name),1),e("p",ke,r(L.official.position),1)])]))),256))]),e("div",Fe,[l.municipalStatus==1?(o(),i("div",$e,[s(a(k),{class:"w-5 h-5 text-red-500"})])):(o(),i("div",Le,[s(a(j),{class:"w-5 h-5 text-green-500"})])),t[11]||(t[11]=d(" Municipal Status: ")),e("span",{class:C(l.municipalStatus==1?"text-red-500":"text-green-500")},r(l.municipalStatus==1?"Draft Ordinance":"Approved Ordinance"),3)]),e("div",Ce,[l.provincialStatus==null||l.provincialStatus==1?(o(),i("div",De,[s(a(k),{class:"w-5 h-5 text-red-500"})])):(o(),i("div",Ne,[s(a(j),{class:"w-5 h-5 text-green-500"})])),t[12]||(t[12]=d(" Provincial Status: ")),e("span",{class:C([l.provincialStatus==1?"text-red-500":l.provincialStatus==2?"text-green-500":"text-gray-500"])},r(l.provincialStatus==1?"Disapproved":l.provincialStatus==2?"Approved Ordinance":"No Status Yet"),3)]),e("small",je,r(Te(l.updated_at)),1)]),_:2},1024),s(a(Y),{class:"mt-auto"},{default:n(()=>[s(S,{class:"w-full text-[12px] cursor-pointer"},{default:n(()=>[e("a",{href:"/storage/files/"+l.file,class:"flex items-center gap-2",target:"_blank"},[s(a(Z)),t[13]||(t[13]=d(" Open PDF File "))],8,Me)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),s(te,{"current-page":x.value.currentPage,"last-page":x.value.lastPage,onNext:q,onPrevious:V},null,8,["current-page","last-page"])]),s(W)])])],64))}});export{He as default};
