import{d as Fe,k as ut,v as rt,u as e,o as r,c as p,n as ve,l as it,r as C,p as dt,C as M,a as l,m as ft,w as a,b as o,h as R,e as n,t as c,f as z,g as v,F as k,i as $,j as mt}from"./app-r35j7Rcc.js";import{a as ye,_ as pt,K as S}from"./AppLayout.vue_vue_type_script_setup_true_lang-sTN53pOW.js";import{_ as B,a as ct,b as Q,c as K,d as j,e as Y,f as X}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-jLPNA8qZ.js";import{_ as U,a as P,b as N,c as E,d as Z,e as ee,f as y}from"./SelectValue.vue_vue_type_script_setup_true_lang-8frkc5nJ.js";import{_ as ce,d as xe,a as _e,c as be,b as gt}from"./CardTitle.vue_vue_type_script_setup_true_lang-BbwJc-8m.js";import{_ as vt,C as Se,a as yt}from"./SkeletonBox.vue_vue_type_script_setup_true_lang-RYZ66Qob.js";import{_ as xt,a as _t,b as fe,c as te,d as bt,e as I,f as St}from"./Skeleton.vue_vue_type_script_setup_true_lang-FIXnN18y.js";import{u as Dt,a as Vt,_ as x}from"./index-D4vKOpLz.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-CdqRZQtJ.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-D1kRE4hG.js";import{u as wt,a as Ct,C as me}from"./Skeleton.vue_vue_type_script_setup_true_lang-hkv5MpH6.js";import{_ as De,F as kt}from"./SkeletonCard.vue_vue_type_script_setup_true_lang-DrK6i3-i.js";import{S as Ft,_ as $t}from"./Pagination.vue_vue_type_script_setup_true_lang-DbQoG3vi.js";import{F as Ve}from"./NavFooter.vue_vue_type_script_setup_true_lang--EsPG4FC.js";import{L}from"./loader-circle-Dr6douII.js";import{P as we,T as Ce}from"./trash-2-D_x4YTrK.js";import{F as Ut}from"./file-pen-line-CtZA7fIf.js";import{E as Pt}from"./eye-Clv6BttE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bbn2Ea5e.js";import"./check-BuQgXWcw.js";const ge=Fe({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(G,{emit:q}){const D=G,F=Dt(D,"modelValue",q,{passive:!0,defaultValue:D.defaultValue});return(ae,h)=>ut((r(),p("textarea",{"onUpdate:modelValue":h[0]||(h[0]=O=>it(F)?F.value=O:null),"data-slot":"textarea",class:ve(e(Vt)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",D.class))},null,2)),[[rt,e(F)]])}}),Nt={class:"p-4 space-y-6"},Et={class:"flex w-full justify-between items-center"},At={key:0},qt={key:1},Tt={class:"flex text-md font-bold items-center"},Rt={class:"grid gap-4 py-4"},It={class:"grid grid-cols-4 items-center gap-4"},Lt={class:"grid gap-4 py-4"},ht={class:"grid grid-cols-4 items-center gap-4"},Ot={class:"flex flex-col space-y-1"},Mt={class:"flex flex-col space-y-1"},zt={class:"flex flex-col space-y-1"},Bt={class:"flex flex-col space-y-1"},Qt={class:"space-y-3"},Kt=["onClick"],jt={class:"flex flex-col space-y-1"},Yt={class:"md:col-span-2"},Gt={class:"md:col-span-2"},Ht={class:"md:col-span-2"},Jt={class:"md:col-span-2"},Wt={class:"space-y-3"},Xt=["onClick"],Zt={class:"md:col-span-2"},el={class:"md:col-span-2 text-right"},tl={class:"flex items-center gap-2 w-full sm:w-auto"},ll={class:"text-center text-red-500 flex items-center justify-center"},al={class:"flex items-center space-x-3"},sl={class:"font-medium"},ol={class:"flex flex-wrap items-center justify-between gap-4"},nl={class:"flex text-md font-bold items-center"},ul={key:0,class:"grid grid-cols-1 gap-4"},rl={class:"grid grid-cols-1 xl:grid-cols-3 gap-4"},il={class:"flex items-center space-x-4 rounded-md border p-4"},dl=["src"],fl={class:"flex-1 space-y-1"},ml={class:"text-sm font-medium leading-none"},pl={class:"text-[13px] text-muted-foreground"},cl={class:"text-[14px]"},gl={class:"mb-4 grid grid-cols-[25px_minmax(0,1fr)] items-start pb-0 last:mb-0 last:pb-0"},vl={class:"space-y-1"},yl={class:"text-sm font-medium leading-none"},xl={class:"text-[12px] text-muted-foreground"},_l={class:"text-gray-500 text-[13px] flex items-center gap-2"},bl={key:0},Sl={key:1},Dl={class:"text-gray-500 text-[13px] flex items-center gap-2"},Vl={key:0},wl={key:1},Cl={class:"text-gray-500"},kl=["href"];function ke(G){const q=new Date(G),D=q.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),le=q.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${D} | ${le}`}const Hl=Fe({__name:"Files",props:{id:{}},setup(G){const q=G,D=wt(),le=[{title:"Files",href:"/admin/files/"+q.id}],F=C(1),ae=C([]),h=C(""),O=C({currentPage:1,lastPage:1,hasMorePages:!1}),$e=async()=>(await mt.post("/graphql",{query:`
    query ($id: String!, $page: Int!, $first: Int!, $search: String) {
      files(id: $id, page: $page, first: $first, search: $search) {
        categoryName {
          encrypted_id
          category
        }
        authors {
          encrypted_id
          name
        }
        filesListPaginated {
          data {
            encrypted_id
            municipalStatus
            provincialStatus
            title
            firstReadingDate
            secondReadingDate
            thirdReadingDate
            ordinanceNumber
            finalTitle
            enactmentDate
            lceapprovalDate
            transmittalDate
            spslapprovalDate
            postStatus
            publishStatus
            file
            updated_at
            author {
              encrypted_id
              name
              position
              photo
            }
            coAuthors {
              official {
                encrypted_id
                name
                position
              }
            }
          }
          paginatorInfo {
            currentPage
            lastPage
            total
            perPage
            hasMorePages
          }
        }
        subCategoriesList {
          encrypted_id
          category
          parentID
          created_at
          totalFiles
        }
      }
    }
  `,variables:{id:q.id,page:F.value,first:20,search:h.value}})).data.data,{data:_,isPending:Fl,isFetching:se,isLoading:$l}=Ct({queryKey:["fetchFiles",F],queryFn:$e});dt(()=>{var f,t;(t=(f=_.value)==null?void 0:f.files)!=null&&t.filesListPaginated&&(ae.value=_.value.files.filesListPaginated.data,O.value=_.value.files.filesListPaginated.paginatorInfo)});const H=C(!1),Ue=()=>{H.value||(H.value=!0,setTimeout(()=>{D.invalidateQueries({queryKey:["fetchFiles"]}),H.value=!1},2e3))},Pe=()=>{F.value<O.value.lastPage&&F.value++},Ne=()=>{F.value>1&&F.value--},oe=C(!1);function Ee(f){g.categoryID=f,oe.value=!0}const g=M({categoryID:"",municipalStatus:"",title:"",author:"",coauthor:[],file:null}),Ae=()=>{g.post(route("create.file"),{onSuccess:()=>{S.success("File created and uploaded successfully"),g.reset(),oe.value=!1,D.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{S.error("Error creating file"),console.error("Error")}})},qe=async f=>{var i;const t=f.target,b=(i=t.files)==null?void 0:i[0];if(!b)return;const d=2*1024*1024;b.size>d&&(t.value="",S.error("File too large. Please select a smaller file.")),g.file=b,console.log("Selected file:",b)},Te=()=>{g.coauthor.push("")},Re=f=>{g.coauthor.splice(f,1)},ne=C(!1);function Ie(f,t,b,s,d,i,w,pe,We,Xe,Ze,et,tt,lt,at,st,ot,nt){u.id=f,u.categoryID=t,u.municipalStatus=b,u.provincialStatus=s,u.title=d,u.author=i,u.coauthor=w,u.firstReadingDate=pe,u.secondReadingDate=We,u.thirdReadingDate=Xe,u.ordinanceNumber=Ze,u.finalTitle=et,u.enactmentDate=tt,u.lceapprovalDate=lt,u.transmittalDate=at,u.spslapprovalDate=st,u.postStatus=ot,u.publishStatus=nt,ne.value=!0}const u=M({id:"",categoryID:"",municipalStatus:"",provincialStatus:"",title:"",author:"",coauthor:[],firstReadingDate:"",secondReadingDate:"",thirdReadingDate:"",ordinanceNumber:"",finalTitle:"",enactmentDate:"",lceapprovalDate:"",transmittalDate:"",spslapprovalDate:"",postStatus:"",publishStatus:"",file:null}),Le=()=>{u.post(route("update.file"),{onSuccess:()=>{S.success("File updated successfully"),u.reset(),ne.value=!1,D.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{S.error("Error creating file"),console.error("Error")}})},he=async f=>{var i;const t=f.target,b=(i=t.files)==null?void 0:i[0];if(!b)return;const d=2*1024*1024;b.size>d&&(t.value="",S.error("File too large. Please select a smaller file.")),g.file=b,console.log("Selected file:",b)},Oe=()=>{u.coauthor.push("")},Me=f=>{u.coauthor.splice(f,1)};function ze(f){return f.map(t=>t.official.encrypted_id)}const ue=C(!1);function Be(f){J.id=f,ue.value=!0}const J=M({id:""}),Qe=()=>{J.delete(route("delete.file"),{onSuccess:()=>{S.success("File deleted successfully"),J.reset(),ue.value=!1,D.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{S.error("Deletion Error"),console.error("Error")}})},re=C(!1);function Ke(f){T.id=f,re.value=!0}const T=M({id:"",category:""}),je=()=>{T.post(route("create.subcategory"),{onSuccess:()=>{S.success("Subcategory created successfully"),T.reset(),re.value=!1,D.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{S.error("Error creating category"),console.error("Error")}})},ie=C(!1);function Ye(f,t){A.id=f,A.category=t,ie.value=!0}const A=M({id:"",category:""}),Ge=()=>{A.patch(route("update.subcategory"),{onSuccess:()=>{S.success("Subcategory updated successfully"),A.reset(),ie.value=!1,D.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{S.error("Error updating category"),console.error("Error")}})},de=C(!1);function He(f){W.id=f,de.value=!0}const W=M({id:""}),Je=()=>{W.delete(route("delete.subcategory"),{onSuccess:()=>{S.success("Subcategory deleted successfully"),W.reset(),de.value=!1,D.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{S.error("Deletion Error"),console.error("Error")}})};return(f,t)=>(r(),p(k,null,[l(e(ft),{title:"Files"}),l(pt,{breadcrumbs:le},{default:a(()=>{var b;return[o("div",Nt,[o("div",Et,[e(se)?(r(),p("div",At,[l(De)])):(r(),p("div",qt,[o("h6",Tt,[l(e(Ve),{class:"h-8 w-8 mr-2 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"}),n(" "+c((b=e(_))==null?void 0:b.files.categoryName.category),1)])])),l(e(B),{open:re.value,"onUpdate:open":t[2]||(t[2]=s=>re.value=s)},{default:a(()=>[l(e(ct),{"as-child":""},{default:a(()=>[l(e(x),{onClick:t[0]||(t[0]=s=>{var d;return Ke((d=e(_))==null?void 0:d.files.categoryName.encrypted_id)}),class:"cursor-pointer"},{default:a(()=>t[29]||(t[29]=[n(" + New ")])),_:1})]),_:1}),l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(K),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[30]||(t[30]=[n("Add Category")])),_:1}),l(e(Y),null,{default:a(()=>{var s;return[t[31]||(t[31]=n(" Create a sub-category for ")),o("b",null,c((s=e(_))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),o("form",{action:"",onSubmit:z(je,["prevent"])},[o("div",Rt,[o("div",It,[l(e(m),{class:"text-right"},{default:a(()=>t[32]||(t[32]=[n("Category")])),_:1}),l(e(V),{modelValue:e(T).category,"onUpdate:modelValue":t[1]||(t[1]=s=>e(T).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(X),null,{default:a(()=>[l(e(x),{type:"submit",class:"cursor-pointer",disabled:e(T).processing},{default:a(()=>[e(T).processing?(r(),v(e(L),{key:0,class:"h-4 w-4 animate-spin"})):R("",!0),t[33]||(t[33]=n(" Save "))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(B),{open:ie.value,"onUpdate:open":t[4]||(t[4]=s=>ie.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(K),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[34]||(t[34]=[n("Edit Category")])),_:1}),l(e(Y),null,{default:a(()=>t[35]||(t[35]=[n(" Edit the details of the selected category ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:z(Ge,["prevent"])},[o("div",Lt,[o("div",ht,[l(e(m),{class:"text-right"},{default:a(()=>t[36]||(t[36]=[n("Category")])),_:1}),l(e(V),{modelValue:e(A).category,"onUpdate:modelValue":t[3]||(t[3]=s=>e(A).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(X),null,{default:a(()=>[l(e(x),{type:"submit",class:"cursor-pointer",disabled:e(A).processing},{default:a(()=>[e(A).processing?(r(),v(e(L),{key:0,class:"h-4 w-4 animate-spin"})):R("",!0),t[37]||(t[37]=n(" Save "))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(B),{open:de.value,"onUpdate:open":t[5]||(t[5]=s=>de.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(K),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[38]||(t[38]=[n("Delete Subcategory")])),_:1}),l(e(Y),null,{default:a(()=>t[39]||(t[39]=[n(" Are you sure you want to delete this category? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:z(Je,["prevent"])},[l(e(X),null,{default:a(()=>[l(e(x),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(W).processing},{default:a(()=>[e(W).processing?(r(),v(e(L),{key:0,class:"h-4 w-4 animate-spin"})):R("",!0),t[40]||(t[40]=n(" Delete "))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(B),{open:oe.value,"onUpdate:open":t[9]||(t[9]=s=>oe.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[800px] w-full"},{default:a(()=>[l(e(K),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[41]||(t[41]=[n("Add New File")])),_:1}),l(e(Y),null,{default:a(()=>{var s;return[t[42]||(t[42]=n(" Create a new file for ")),o("b",null,c((s=e(_))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),o("form",{onSubmit:z(Ae,["prevent"]),class:"space-y-6"},[o("div",Ot,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[43]||(t[43]=[n("Municipal Status")])),_:1}),l(e(U),{modelValue:e(g).municipalStatus,"onUpdate:modelValue":t[6]||(t[6]=s=>e(g).municipalStatus=s),required:""},{default:a(()=>[l(e(P),{class:"w-full"},{default:a(()=>[l(e(N),{placeholder:"Select a status"})]),_:1}),l(e(E),null,{default:a(()=>[l(e(Z),null,{default:a(()=>[l(e(ee),null,{default:a(()=>t[44]||(t[44]=[n("Status")])),_:1}),l(e(y),{value:"1"},{default:a(()=>t[45]||(t[45]=[n("Draft Ordinance")])),_:1}),l(e(y),{value:"2"},{default:a(()=>t[46]||(t[46]=[n("Approved Ordinance")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Mt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[47]||(t[47]=[n("Title of Ordinance")])),_:1}),l(e(ge),{modelValue:e(g).title,"onUpdate:modelValue":t[7]||(t[7]=s=>e(g).title=s),class:"w-full",required:""},null,8,["modelValue"])]),o("div",zt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[48]||(t[48]=[n("Author")])),_:1}),l(e(U),{modelValue:e(g).author,"onUpdate:modelValue":t[8]||(t[8]=s=>e(g).author=s),required:""},{default:a(()=>[l(e(P),{class:"w-full"},{default:a(()=>[l(e(N),{placeholder:"Select an author"})]),_:1}),l(e(E),null,{default:a(()=>{var s;return[l(e(ee),null,{default:a(()=>t[49]||(t[49]=[n("Authors")])),_:1}),(r(!0),p(k,null,$((s=e(_))==null?void 0:s.files.authors,d=>(r(),v(e(Z),null,{default:a(()=>[l(e(y),{value:d.encrypted_id},{default:a(()=>[n(c(d.name),1)]),_:2},1032,["value"])]),_:2},1024))),256))]}),_:1})]),_:1},8,["modelValue"])]),o("div",Bt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[50]||(t[50]=[n("Co Authors")])),_:1}),o("div",Qt,[(r(!0),p(k,null,$(e(g).coauthor,(s,d)=>(r(),p("div",{key:d,class:"flex items-center gap-2"},[l(e(U),{modelValue:e(g).coauthor[d],"onUpdate:modelValue":i=>e(g).coauthor[d]=i,required:""},{default:a(()=>[l(e(P),{class:"w-full"},{default:a(()=>[l(e(N),{placeholder:"Select an author"})]),_:1}),l(e(E),null,{default:a(()=>[l(e(ee),null,{default:a(()=>t[51]||(t[51]=[n("Authors")])),_:1}),l(e(Z),null,{default:a(()=>{var i;return[(r(!0),p(k,null,$((i=e(_))==null?void 0:i.files.authors,w=>(r(),v(e(y),{key:w.encrypted_id,value:w.encrypted_id},{default:a(()=>[n(c(w.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o("button",{type:"button",onClick:i=>Re(d),class:"text-red-500 hover:text-red-700 text-sm cursor-pointer"}," ✕ ",8,Kt)]))),128)),o("button",{type:"button",onClick:Te,class:"text-blue-500 hover:text-blue-700 text-sm cursor-pointer"}," + Add ")])]),o("div",jt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[52]||(t[52]=[n("Upload a File")])),_:1}),l(e(V),{type:"file",class:"col-span-3",onChange:qe,accept:".pdf",required:""})]),l(e(X),null,{default:a(()=>[l(e(x),{type:"submit",class:"cursor-pointer",disabled:e(g).processing},{default:a(()=>[e(g).processing?(r(),v(e(L),{key:0,class:"h-4 w-4 animate-spin"})):R("",!0),t[53]||(t[53]=n(" Save "))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(B),{open:ne.value,"onUpdate:open":t[25]||(t[25]=s=>ne.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[800px] w-full max-h-[90vh] overflow-y-auto"},{default:a(()=>[l(e(K),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[54]||(t[54]=[n("Edit File")])),_:1}),l(e(Y),null,{default:a(()=>t[55]||(t[55]=[n("Edit the selected file's details below.")])),_:1})]),_:1}),o("form",{onSubmit:z(Le,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[56]||(t[56]=[n("Municipal Status")])),_:1}),l(e(U),{modelValue:e(u).municipalStatus,"onUpdate:modelValue":t[10]||(t[10]=s=>e(u).municipalStatus=s),required:""},{default:a(()=>[l(e(P),{class:"w-full"},{default:a(()=>[l(e(N),{placeholder:"Select a status"})]),_:1}),l(e(E),null,{default:a(()=>[l(e(y),{value:"1"},{default:a(()=>t[57]||(t[57]=[n("Draft Ordinance")])),_:1}),l(e(y),{value:"2"},{default:a(()=>t[58]||(t[58]=[n("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[59]||(t[59]=[n("Provincial Status")])),_:1}),l(e(U),{modelValue:e(u).provincialStatus,"onUpdate:modelValue":t[11]||(t[11]=s=>e(u).provincialStatus=s)},{default:a(()=>[l(e(P),{class:"w-full"},{default:a(()=>[l(e(N),{placeholder:"Select a status"})]),_:1}),l(e(E),null,{default:a(()=>[l(e(y),{value:"0"},{default:a(()=>t[60]||(t[60]=[n("No Status Yet")])),_:1}),l(e(y),{value:"1"},{default:a(()=>t[61]||(t[61]=[n("Disapproved Ordinance")])),_:1}),l(e(y),{value:"2"},{default:a(()=>t[62]||(t[62]=[n("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Yt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[63]||(t[63]=[n("Title of Ordinance")])),_:1}),l(e(ge),{modelValue:e(u).title,"onUpdate:modelValue":t[12]||(t[12]=s=>e(u).title=s),class:"w-full",required:""},null,8,["modelValue"])]),o("div",Gt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[64]||(t[64]=[n("Ordinance Number")])),_:1}),l(e(V),{modelValue:e(u).ordinanceNumber,"onUpdate:modelValue":t[13]||(t[13]=s=>e(u).ordinanceNumber=s),type:"text",class:"w-full"},null,8,["modelValue"])]),o("div",Ht,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[65]||(t[65]=[n("Final Title")])),_:1}),l(e(ge),{modelValue:e(u).finalTitle,"onUpdate:modelValue":t[14]||(t[14]=s=>e(u).finalTitle=s),class:"w-full"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[66]||(t[66]=[n("Author")])),_:1}),l(e(U),{modelValue:e(u).author,"onUpdate:modelValue":t[15]||(t[15]=s=>e(u).author=s),required:""},{default:a(()=>[l(e(P),{class:"w-full"},{default:a(()=>[l(e(N),{placeholder:"Select an author"})]),_:1}),l(e(E),null,{default:a(()=>{var s;return[(r(!0),p(k,null,$((s=e(_))==null?void 0:s.files.authors,d=>(r(),v(e(y),{key:d.encrypted_id,value:d.encrypted_id},{default:a(()=>[n(c(d.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1},8,["modelValue"])]),o("div",Jt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[67]||(t[67]=[n("Co Authors")])),_:1}),o("div",Wt,[(r(!0),p(k,null,$(e(u).coauthor,(s,d)=>(r(),p("div",{key:d,class:"flex items-center gap-2"},[l(e(U),{modelValue:e(u).coauthor[d],"onUpdate:modelValue":i=>e(u).coauthor[d]=i,required:"",class:"flex-1"},{default:a(()=>[l(e(P),{class:"w-full"},{default:a(()=>[l(e(N),{placeholder:"Select a co-author"})]),_:1}),l(e(E),null,{default:a(()=>{var i;return[(r(!0),p(k,null,$((i=e(_))==null?void 0:i.files.authors,w=>(r(),v(e(y),{key:w.encrypted_id,value:w.encrypted_id},{default:a(()=>[n(c(w.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o("button",{type:"button",onClick:i=>Me(d),class:"text-red-500 cursor-pointer"},"✕",8,Xt)]))),128)),o("button",{type:"button",onClick:Oe,class:"text-blue-500 text-sm cursor-pointer"}," + Add ")])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[68]||(t[68]=[n("1st Reading Date")])),_:1}),l(e(V),{modelValue:e(u).firstReadingDate,"onUpdate:modelValue":t[16]||(t[16]=s=>e(u).firstReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[69]||(t[69]=[n("2nd Reading Date")])),_:1}),l(e(V),{modelValue:e(u).secondReadingDate,"onUpdate:modelValue":t[17]||(t[17]=s=>e(u).secondReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[70]||(t[70]=[n("3rd Reading Date")])),_:1}),l(e(V),{modelValue:e(u).thirdReadingDate,"onUpdate:modelValue":t[18]||(t[18]=s=>e(u).thirdReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[71]||(t[71]=[n("Enactment Date")])),_:1}),l(e(V),{modelValue:e(u).enactmentDate,"onUpdate:modelValue":t[19]||(t[19]=s=>e(u).enactmentDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[72]||(t[72]=[n("LCE Approval Date")])),_:1}),l(e(V),{modelValue:e(u).lceapprovalDate,"onUpdate:modelValue":t[20]||(t[20]=s=>e(u).lceapprovalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[73]||(t[73]=[n("Transmittal Date")])),_:1}),l(e(V),{modelValue:e(u).transmittalDate,"onUpdate:modelValue":t[21]||(t[21]=s=>e(u).transmittalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[74]||(t[74]=[n("SPSL Approval Date")])),_:1}),l(e(V),{modelValue:e(u).spslapprovalDate,"onUpdate:modelValue":t[22]||(t[22]=s=>e(u).spslapprovalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[75]||(t[75]=[n("Post Status")])),_:1}),l(e(U),{modelValue:e(u).postStatus,"onUpdate:modelValue":t[23]||(t[23]=s=>e(u).postStatus=s)},{default:a(()=>[l(e(P),{class:"w-full"},{default:a(()=>[l(e(N),{placeholder:"Select a status"})]),_:1}),l(e(E),null,{default:a(()=>[l(e(Z),null,{default:a(()=>[l(e(ee),null,{default:a(()=>t[76]||(t[76]=[n("Status")])),_:1}),l(e(y),{value:"0"},{default:a(()=>t[77]||(t[77]=[n("Not Yet")])),_:1}),l(e(y),{value:"1"},{default:a(()=>t[78]||(t[78]=[n("Posted")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[79]||(t[79]=[n("Publish Status")])),_:1}),l(e(U),{modelValue:e(u).publishStatus,"onUpdate:modelValue":t[24]||(t[24]=s=>e(u).publishStatus=s)},{default:a(()=>[l(e(P),{class:"w-full"},{default:a(()=>[l(e(N),{placeholder:"Select a status"})]),_:1}),l(e(E),null,{default:a(()=>[l(e(Z),null,{default:a(()=>[l(e(ee),null,{default:a(()=>t[80]||(t[80]=[n("Status")])),_:1}),l(e(y),{value:"0"},{default:a(()=>t[81]||(t[81]=[n("Not Yet")])),_:1}),l(e(y),{value:"1"},{default:a(()=>t[82]||(t[82]=[n("Published")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Zt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[83]||(t[83]=[n("Update File")])),_:1}),l(e(V),{type:"file",onChange:he,accept:".pdf"})]),o("div",el,[l(e(x),{type:"submit",class:"cursor-pointer",disabled:e(u).processing},{default:a(()=>[e(u).processing?(r(),v(e(L),{key:0,class:"h-4 w-4 animate-spin"})):R("",!0),t[84]||(t[84]=n(" Save "))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"]),l(e(B),{open:ue.value,"onUpdate:open":t[26]||(t[26]=s=>ue.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(K),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[85]||(t[85]=[n("Delete File")])),_:1}),l(e(Y),null,{default:a(()=>t[86]||(t[86]=[n(" Are you sure you want to delete this file? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:z(Qe,["prevent"])},[l(e(X),null,{default:a(()=>[l(e(x),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(J).processing},{default:a(()=>[e(J).processing?(r(),v(e(L),{key:0,class:"h-4 w-4 animate-spin"})):R("",!0),t[87]||(t[87]=n(" Delete "))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),o("div",tl,[l(e(V),{modelValue:h.value,"onUpdate:modelValue":t[27]||(t[27]=s=>h.value=s),placeholder:"Search...",class:"w-full sm:w-72 text-sm"},null,8,["modelValue"]),l(e(x),{onClick:Ue,disabled:H.value,class:"text-sm flex items-center gap-1"},{default:a(()=>[H.value?(r(),v(e(L),{key:0,class:"h-4 w-4 animate-spin"})):(r(),v(e(Ft),{key:1}))]),_:1},8,["disabled"])]),l(e(xt),null,{default:a(()=>[l(e(_t),null,{default:a(()=>[l(e(fe),null,{default:a(()=>[l(e(te),{class:"w-[50px]"},{default:a(()=>t[88]||(t[88]=[o("small",null,"#",-1)])),_:1}),l(e(te),{class:"w-[300px]"},{default:a(()=>t[89]||(t[89]=[o("small",null,"Category",-1)])),_:1}),l(e(te),null,{default:a(()=>t[90]||(t[90]=[o("small",null,"No. of Files",-1)])),_:1}),l(e(te),null,{default:a(()=>t[91]||(t[91]=[o("small",null,"Creation Date",-1)])),_:1}),l(e(te),{class:"text-right"},{default:a(()=>t[92]||(t[92]=[o("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),l(e(bt),null,{default:a(()=>{var s,d;return[e(se)?(r(),v(e(fe),{key:0},{default:a(()=>[l(e(I),{colspan:"10",class:"text-center"},{default:a(()=>[l(St)]),_:1})]),_:1})):((s=e(_))==null?void 0:s.files.subCategoriesList.length)===0?(r(),v(e(fe),{key:1},{default:a(()=>[l(e(I),{colspan:"5"},{default:a(()=>[o("small",ll,[l(e(me),{class:"mr-2 w-5"}),t[93]||(t[93]=n(" No Data Found "))])]),_:1})]),_:1})):(r(!0),p(k,{key:2},$((d=e(_))==null?void 0:d.files.subCategoriesList,(i,w)=>(r(),v(e(fe),{key:i.id},{default:a(()=>[l(e(I),null,{default:a(()=>[o("small",null,c(w+1),1)]),_:2},1024),l(e(I),{class:"w-[300px] pr-20"},{default:a(()=>[l(ye,{href:f.route("admin.files",{id:i.encrypted_id}),prefetch:""},{default:a(()=>[o("div",al,[o("div",null,[l(e(Ve),{class:"h-8 w-8 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"})]),o("div",null,[o("div",sl,c(i.category),1)])])]),_:2},1032,["href"])]),_:2},1024),l(e(I),null,{default:a(()=>[n(c(i.totalFiles),1)]),_:2},1024),l(e(I),null,{default:a(()=>[o("small",null,c(ke(i.created_at)),1)]),_:2},1024),l(e(I),{class:"text-right"},{default:a(()=>[l(e(x),{variant:"link",onClick:pe=>Ye(i.encrypted_id,i.category),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(we))]),_:2},1032,["onClick"]),l(e(x),{variant:"destructive",onClick:pe=>He(i.encrypted_id),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(Ce))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1}),o("div",ol,[o("h6",nl,[l(e(Ut),{class:"h-8 w-8 mr-2 flex-shrink-0 rounded-full border p-1 text-green-500"}),t[94]||(t[94]=n(" Files "))]),l(e(x),{onClick:t[28]||(t[28]=s=>{var d;return Ee((d=e(_))==null?void 0:d.files.categoryName.encrypted_id)}),class:"text-sm"},{default:a(()=>t[95]||(t[95]=[n(" + New ")])),_:1})]),ae.value.length===0&&!e(se)?(r(),p("div",ul,[l(e(ce),{class:"shadow-none"},{default:a(()=>[l(e(xe),{class:"text-red-500 flex items-center justify-center text-[12px] gap-2"},{default:a(()=>[l(e(me),{class:"w-5 h-auto"}),t[96]||(t[96]=n(" No Data Found "))]),_:1})]),_:1})])):R("",!0),o("div",rl,[e(se)?(r(),p(k,{key:0},$(3,s=>l(e(ce),{class:"shadow-none"},{default:a(()=>[l(e(_e),{class:"text-[14px]"},{default:a(()=>[l(De)]),_:1}),l(e(be),{class:"grid gap-4"},{default:a(()=>[l(vt)]),_:1})]),_:1})),64)):(r(!0),p(k,{key:1},$(ae.value,(s,d)=>(r(),v(e(ce),{class:"shadow-none flex flex-col h-full"},{default:a(()=>[l(e(_e),{class:"text-[14px]"},{default:a(()=>[l(e(gt),null,{default:a(()=>t[97]||(t[97]=[n("Ordinance Number")])),_:1}),l(e(xe),null,{default:a(()=>[n(c(s.ordinanceNumber!=null?s.ordinanceNumber:"-"),1)]),_:2},1024),o("div",il,[o("img",{draggable:"false",src:"/storage/profile/"+s.author.photo,class:"w-10 h-10 rounded-full object-cover"},null,8,dl),o("div",fl,[o("p",ml,c(s.author.name),1),o("p",pl,c(s.author.position),1)]),l(ye,{href:f.route("admin.view-file",{id:s.encrypted_id}),prefetch:""},{default:a(()=>[l(e(x),{variant:"link",class:"ml-0 cursor-pointer"},{default:a(()=>[l(e(Pt))]),_:1})]),_:2},1032,["href"])])]),_:2},1024),l(e(be),{class:"grid gap-4"},{default:a(()=>[o("div",null,[o("p",cl,c(s.finalTitle==null?s.title:s.finalTitle),1)]),o("div",null,[t[99]||(t[99]=o("div",{class:"text-[14px] mb-4 font-bold text-blue-500"},"Co-Authors",-1)),(r(!0),p(k,null,$(s.coAuthors,(i,w)=>(r(),p("div",gl,[t[98]||(t[98]=o("span",{class:"flex h-2 w-2 translate-y-1 rounded-full bg-sky-500"},null,-1)),o("div",vl,[o("p",yl,c(i.official.name),1),o("p",xl,c(i.official.position),1)])]))),256))]),o("div",_l,[s.municipalStatus==1?(r(),p("div",bl,[l(e(me),{class:"w-5 h-5 text-red-500"})])):(r(),p("div",Sl,[l(e(Se),{class:"w-5 h-5 text-green-500"})])),t[100]||(t[100]=n(" Municipal Status: ")),o("span",{class:ve(s.municipalStatus==1?"text-red-500":"text-green-500")},c(s.municipalStatus==1?"Draft Ordinance":"Approved Ordinance"),3)]),o("div",Dl,[s.provincialStatus==null||s.provincialStatus==1?(r(),p("div",Vl,[l(e(me),{class:"w-5 h-5 text-red-500"})])):(r(),p("div",wl,[l(e(Se),{class:"w-5 h-5 text-green-500"})])),t[101]||(t[101]=n(" Provincial Status: ")),o("span",{class:ve([s.provincialStatus==1?"text-red-500":s.provincialStatus==2?"text-green-500":"text-gray-500"])},c(s.provincialStatus==1?"Disapproved":s.provincialStatus==2?"Approved Ordinance":"No Status Yet"),3)]),o("small",Cl,c(ke(s.updated_at)),1)]),_:2},1024),l(e(yt),{class:"mt-auto"},{default:a(()=>[l(e(x),{class:"text-[12px] cursor-pointer"},{default:a(()=>[o("a",{href:"/storage/files/"+s.file,class:"flex items-center gap-2",target:"_blank"},[l(e(kt)),t[102]||(t[102]=n(" Open PDF File "))],8,kl)]),_:2},1024),l(e(x),{variant:"link",class:"ml-0 cursor-pointer",onClick:i=>Ie(s.encrypted_id,s.categoryID,s.municipalStatus,s.provincialStatus,s.title,s.author.encrypted_id,ze(s.coAuthors),s.firstReadingDate,s.secondReadingDate,s.thirdReadingDate,s.ordinanceNumber,s.finalTitle,s.enactmentDate,s.lceapprovalDate,s.transmittalDate,s.spslapprovalDate,s.postStatus,s.publishStatus)},{default:a(()=>[l(e(we))]),_:2},1032,["onClick"]),l(e(x),{variant:"destructive",class:"ml-0 cursor-pointer",onClick:i=>Be(s.encrypted_id)},{default:a(()=>[l(e(Ce))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),l($t,{"current-page":O.value.currentPage,"last-page":O.value.lastPage,onNext:Pe,onPrevious:Ne},null,8,["current-page","last-page"])])]}),_:1})],64))}});export{Hl as default};
