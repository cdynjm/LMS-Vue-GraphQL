import{d as I,r as _,C as v,c as S,o as C,a as s,u as e,m as J,w as a,b as o,h as V,t as R,e as l,f as x,g as W,F as X,j as Y}from"./app-BJDzPrDL.js";import{_ as Z,K as n}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bl_4tx1W.js";import{_ as b,a as h,b as $,c as F,d as w,e as q,f as E}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DZBTWMzb.js";import{_ as ee,a as te,b as D,c as u,d as se,e as ae}from"./TableHeader.vue_vue_type_script_setup_true_lang-BlNiHr2w.js";import{_ as c}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BV3_Q5DQ.js";import{_ as k,a as K}from"./Label.vue_vue_type_script_setup_true_lang-BAqj8qoh.js";import{u as le,a as oe}from"./useQuery-BAcSG7FZ.js";import{L as re}from"./loader-circle-BEiknnwn.js";import"./useForwardExpose-D91kPfCk.js";import"./RovingFocusGroup-fDnD0j3W.js";const ne={class:"p-6 space-y-6"},ie={class:"flex w-full justify-between items-center"},de={key:0},ue={class:"flex-1 text-md font-bold"},fe={class:"grid gap-4 py-4"},ce={class:"grid grid-cols-4 items-center gap-4"},me={class:"grid gap-4 py-4"},pe={class:"grid grid-cols-4 items-center gap-4"},ge={class:"text-center text-green-500 flex items-center justify-center"},Ne=I({__name:"Files",props:{id:{}},setup(Q){const m=le(),U=[{title:"Files",href:"/admin/files"}],B=Q,L=async()=>(await Y.post("/graphql",{query:`
    query ($id: String!) {
      files (id: $id) {
        categoryName {
            encrypted_id
            category
        }
      }
    }
  `,variables:{id:B.id}})).data.data,{isPending:j,error:ye,data:A,isFetching:T,isLoading:M}=oe({queryKey:["fetchFiles"],queryFn:L}),f=_(!1);function O(){f.value=!0}const i=v({category:""}),P=()=>{i.post(route("create.category"),{onSuccess:()=>{n.success("Category created successfully"),i.reset(),f.value=!1,m.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{n.error("Error creating category"),console.error("Error")}})},p=_(!1),d=v({id:"",category:""}),z=()=>{d.patch(route("update.category"),{onSuccess:()=>{n.success("Category updated successfully"),d.reset(),p.value=!1,m.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{n.error("Error updating category"),console.error("Error")}})},g=_(!1),y=v({id:""}),G=()=>{y.delete(route("delete.category"),{onSuccess:()=>{n.success("Category deleted successfully"),y.reset(),g.value=!1,m.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{n.error("Deletion Error"),console.error("Error")}})};return(H,t)=>(C(),S(X,null,[s(e(J),{title:"Files"}),s(Z,{breadcrumbs:U},{default:a(()=>{var N;return[o("div",ne,[o("div",ie,[o("div",null,[!e(M)&&!e(T)?(C(),S("div",de,[o("h6",ue,R((N=e(A))==null?void 0:N.files.categoryName.category),1)])):V("",!0)]),s(e(b),{open:f.value,"onUpdate:open":t[1]||(t[1]=r=>f.value=r)},{default:a(()=>[s(e(h),{"as-child":""},{default:a(()=>[s(e(c),{onClick:O,class:"cursor-pointer"},{default:a(()=>t[5]||(t[5]=[l(" + New ")])),_:1})]),_:1}),s(e($),{class:"sm:max-w-[600px]"},{default:a(()=>[s(e(F),null,{default:a(()=>[s(e(w),null,{default:a(()=>t[6]||(t[6]=[l("Add Category")])),_:1}),s(e(q),null,{default:a(()=>t[7]||(t[7]=[l(" Create a new category for the files ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:x(P,["prevent"])},[o("div",fe,[o("div",ce,[s(e(k),{class:"text-right"},{default:a(()=>t[8]||(t[8]=[l("Category")])),_:1}),s(e(K),{modelValue:e(i).category,"onUpdate:modelValue":t[0]||(t[0]=r=>e(i).category=r),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),s(e(E),null,{default:a(()=>[s(e(c),{type:"submit",class:"cursor-pointer",disabled:e(i).processing},{default:a(()=>t[9]||(t[9]=[l("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),s(e(b),{open:p.value,"onUpdate:open":t[3]||(t[3]=r=>p.value=r)},{default:a(()=>[s(e($),{class:"sm:max-w-[600px]"},{default:a(()=>[s(e(F),null,{default:a(()=>[s(e(w),null,{default:a(()=>t[10]||(t[10]=[l("Edit Category")])),_:1}),s(e(q),null,{default:a(()=>t[11]||(t[11]=[l(" Edit the details of the selected category ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:x(z,["prevent"])},[o("div",me,[o("div",pe,[s(e(k),{class:"text-right"},{default:a(()=>t[12]||(t[12]=[l("Category")])),_:1}),s(e(K),{modelValue:e(d).category,"onUpdate:modelValue":t[2]||(t[2]=r=>e(d).category=r),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),s(e(E),null,{default:a(()=>[s(e(c),{type:"submit",class:"cursor-pointer",disabled:e(d).processing},{default:a(()=>t[13]||(t[13]=[l("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),s(e(b),{open:g.value,"onUpdate:open":t[4]||(t[4]=r=>g.value=r)},{default:a(()=>[s(e($),{class:"sm:max-w-[600px]"},{default:a(()=>[s(e(F),null,{default:a(()=>[s(e(w),null,{default:a(()=>t[14]||(t[14]=[l("Delete Official")])),_:1}),s(e(q),null,{default:a(()=>t[15]||(t[15]=[l(" Are you sure you want to delete this official? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:x(G,["prevent"])},[s(e(E),null,{default:a(()=>[s(e(c),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(y).processing},{default:a(()=>t[16]||(t[16]=[l("Delete")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),s(e(ee),null,{default:a(()=>[s(e(te),null,{default:a(()=>[s(e(D),null,{default:a(()=>[s(e(u),{class:"w-[50px]"},{default:a(()=>t[17]||(t[17]=[l("#")])),_:1}),s(e(u),{class:"w-[300px]"},{default:a(()=>t[18]||(t[18]=[l("Category")])),_:1}),s(e(u),null,{default:a(()=>t[19]||(t[19]=[l("No. of Files")])),_:1}),s(e(u),null,{default:a(()=>t[20]||(t[20]=[l("Creation Date")])),_:1}),s(e(u),{class:"text-right"},{default:a(()=>t[21]||(t[21]=[l("Actions")])),_:1})]),_:1})]),_:1}),s(e(se),null,{default:a(()=>[e(j)?(C(),W(e(D),{key:0},{default:a(()=>[s(e(ae),{colspan:"10",class:"text-center"},{default:a(()=>[o("small",ge,[s(e(re),{class:"mr-2 w-5"}),t[22]||(t[22]=l(" Loading... "))])]),_:1})]),_:1})):V("",!0)]),_:1})]),_:1})])]}),_:1})],64))}});export{Ne as default};
