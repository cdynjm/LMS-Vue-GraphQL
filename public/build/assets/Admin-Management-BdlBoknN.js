import{d as Z,r as k,C,c as T,o as u,a as l,u as e,m as h,w as t,b as n,e as o,f as E,g as f,h as D,F as B,i as ee,t as V,j as se}from"./app-GRqBZMjc.js";import{_ as le,K as p}from"./AppLayout.vue_vue_type_script_setup_true_lang-9TLh6anP.js";import{_ as S,a as te,b as N,c as U,d as F,e as K,f as P}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-Bhv6gbBm.js";import{_ as ae,a as ne,b as $,c as x,d as oe,e as m,f as re}from"./Skeleton.vue_vue_type_script_setup_true_lang-D5cQhWyB.js";import{_ as c}from"./index-vWOFmHOK.js";import{_}from"./Input.vue_vue_type_script_setup_true_lang-74Cw-skh.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-C_3EFTP-.js";import{u as de,a as ie,C as ue}from"./Skeleton.vue_vue_type_script_setup_true_lang-DzjwEdNu.js";import{L as M}from"./loader-circle-C3z9O4bL.js";import{P as me,T as fe}from"./trash-2-BoX7hGXv.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-BAyLt7ny.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CgS9jI4z.js";const pe={class:"p-4 space-y-6"},ce={class:"flex w-full justify-between items-center"},_e={class:"grid gap-4 py-4"},ge={class:"grid grid-cols-4 items-center gap-4"},ye={class:"grid grid-cols-4 items-center gap-4"},ve={class:"grid grid-cols-4 items-center gap-4"},xe={class:"grid gap-4 py-4"},we={class:"grid grid-cols-4 items-center gap-4"},Ae={class:"grid grid-cols-4 items-center gap-4"},be={class:"grid grid-cols-4 items-center gap-4"},Ve={class:"text-center text-red-500 flex items-center justify-center"},Te=Z({__name:"Admin-Management",setup($e){const q=de(),L=[{title:"Admin Management",href:"/admin/admin-management"}],R=async()=>{var a;return(await se.post("/graphql",{query:`
    query {
      admins {
        encrypted_id
        name
        email
        role
      }
    }
  `},{headers:{"X-CSRF-TOKEN":(a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).data.data},{isPending:X,error:qe,data:j,isFetching:ke}=ie({queryKey:["fetchAdmins"],queryFn:R}),w=k(!1);function J(){w.value=!0}const d=C({name:"",email:"",password:""}),H=()=>{d.post(route("create.admin"),{onSuccess:()=>{p.success("Admin account created successfully"),d.reset(),w.value=!1,q.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{p.error("Email already exists"),console.error("Error")}})},A=k(!1);function O(v,s,a){r.id=v,r.name=s,r.email=a,A.value=!0}const r=C({id:"",name:"",email:"",password:""}),W=()=>{r.patch(route("update.admin"),{onSuccess:()=>{p.success("Admin account updated successfully"),r.reset(),A.value=!1,q.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{p.error("Email already exists"),console.error("Error")}})},b=k(!1);function z(v){y.id=v,b.value=!0}const y=C({id:""}),G=()=>{y.delete(route("delete.admin"),{onSuccess:()=>{p.success("Admin account deleted successfully"),y.reset(),b.value=!1,q.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{p.error("Deletion Error"),console.error("Error")}})};return(v,s)=>(u(),T(B,null,[l(e(h),{title:"Admin Management"}),l(le,{breadcrumbs:L},{default:t(()=>[n("div",pe,[n("div",ce,[s[25]||(s[25]=n("h6",{class:"flex-1 text-md font-bold"},"Administrators",-1)),l(e(S),{open:w.value,"onUpdate:open":s[3]||(s[3]=a=>w.value=a)},{default:t(()=>[l(e(te),{"as-child":""},{default:t(()=>[l(e(c),{onClick:J,class:"cursor-pointer"},{default:t(()=>s[9]||(s[9]=[o(" + New ")])),_:1})]),_:1}),l(e(N),{class:"sm:max-w-[600px]"},{default:t(()=>[l(e(U),null,{default:t(()=>[l(e(F),null,{default:t(()=>s[10]||(s[10]=[o("Add Admin")])),_:1}),l(e(K),null,{default:t(()=>s[11]||(s[11]=[o(" Enter details for a new admin ")])),_:1})]),_:1}),n("form",{action:"",onSubmit:E(H,["prevent"])},[n("div",_e,[n("div",ge,[l(e(g),{class:"text-right"},{default:t(()=>s[12]||(s[12]=[o("Name")])),_:1}),l(e(_),{modelValue:e(d).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(d).name=a),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",ye,[l(e(g),{class:"text-right"},{default:t(()=>s[13]||(s[13]=[o("Email")])),_:1}),l(e(_),{modelValue:e(d).email,"onUpdate:modelValue":s[1]||(s[1]=a=>e(d).email=a),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",ve,[l(e(g),{class:"text-start"},{default:t(()=>s[14]||(s[14]=[o("Password")])),_:1}),l(e(_),{modelValue:e(d).password,"onUpdate:modelValue":s[2]||(s[2]=a=>e(d).password=a),placeholder:"Password",type:"password",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(P),null,{default:t(()=>[l(e(c),{type:"submit",class:"cursor-pointer",disabled:e(d).processing},{default:t(()=>[e(d).processing?(u(),f(e(M),{key:0,class:"h-4 w-4 animate-spin"})):D("",!0),s[15]||(s[15]=o(" Save "))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(S),{open:A.value,"onUpdate:open":s[7]||(s[7]=a=>A.value=a)},{default:t(()=>[l(e(N),{class:"sm:max-w-[600px]"},{default:t(()=>[l(e(U),null,{default:t(()=>[l(e(F),null,{default:t(()=>s[16]||(s[16]=[o("Edit Admin")])),_:1}),l(e(K),null,{default:t(()=>s[17]||(s[17]=[o(" Update details for the admin ")])),_:1})]),_:1}),n("form",{action:"",onSubmit:E(W,["prevent"])},[n("div",xe,[n("div",we,[l(e(g),{class:"text-right"},{default:t(()=>s[18]||(s[18]=[o("Name")])),_:1}),l(e(_),{modelValue:e(r).name,"onUpdate:modelValue":s[4]||(s[4]=a=>e(r).name=a),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",Ae,[l(e(g),{class:"text-right"},{default:t(()=>s[19]||(s[19]=[o("Email")])),_:1}),l(e(_),{modelValue:e(r).email,"onUpdate:modelValue":s[5]||(s[5]=a=>e(r).email=a),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",be,[l(e(g),{class:"text-start"},{default:t(()=>s[20]||(s[20]=[o("Change Password")])),_:1}),l(e(_),{modelValue:e(r).password,"onUpdate:modelValue":s[6]||(s[6]=a=>e(r).password=a),placeholder:"Password",type:"password",class:"col-span-3"},null,8,["modelValue"])])]),l(e(P),null,{default:t(()=>[l(e(c),{type:"submit",class:"cursor-pointer",disabled:e(r).processing},{default:t(()=>[e(r).processing?(u(),f(e(M),{key:0,class:"h-4 w-4 animate-spin"})):D("",!0),s[21]||(s[21]=o(" Save"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(S),{open:b.value,"onUpdate:open":s[8]||(s[8]=a=>b.value=a)},{default:t(()=>[l(e(N),{class:"sm:max-w-[600px]"},{default:t(()=>[l(e(U),null,{default:t(()=>[l(e(F),null,{default:t(()=>s[22]||(s[22]=[o("Delete Admin")])),_:1}),l(e(K),null,{default:t(()=>s[23]||(s[23]=[o(" Are you sure you want to delete this admin? This action cannot be undone. ")])),_:1})]),_:1}),n("form",{action:"",onSubmit:E(G,["prevent"])},[l(e(P),null,{default:t(()=>[l(e(c),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(y).processing},{default:t(()=>[e(y).processing?(u(),f(e(M),{key:0,class:"h-4 w-4 animate-spin"})):D("",!0),s[24]||(s[24]=o(" Delete"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),l(e(ae),null,{default:t(()=>[l(e(ne),null,{default:t(()=>[l(e($),null,{default:t(()=>[l(e(x),{class:"w-[50px]"},{default:t(()=>s[26]||(s[26]=[n("small",null,"#",-1)])),_:1}),l(e(x),null,{default:t(()=>s[27]||(s[27]=[n("small",null,"Name",-1)])),_:1}),l(e(x),null,{default:t(()=>s[28]||(s[28]=[n("small",null,"Email",-1)])),_:1}),l(e(x),null,{default:t(()=>s[29]||(s[29]=[n("small",null,"Role",-1)])),_:1}),l(e(x),{class:"text-right"},{default:t(()=>s[30]||(s[30]=[n("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),l(e(oe),null,{default:t(()=>{var a,Q;return[e(X)?(u(),f(e($),{key:0},{default:t(()=>[l(e(m),{colspan:"5",class:"text-center"},{default:t(()=>[l(re)]),_:1})]),_:1})):((a=e(j))==null?void 0:a.admins.length)===0?(u(),f(e($),{key:1},{default:t(()=>[l(e(m),{colspan:"10"},{default:t(()=>[n("small",Ve,[l(e(ue),{class:"mr-2 w-5"}),s[31]||(s[31]=o(" No Data Found "))])]),_:1})]),_:1})):(u(!0),T(B,{key:2},ee((Q=e(j))==null?void 0:Q.admins,(i,I)=>(u(),f(e($),{key:i.encrypted_id},{default:t(()=>[l(e(m),null,{default:t(()=>[n("small",null,V(I+1),1)]),_:2},1024),l(e(m),null,{default:t(()=>[o(V(i.name),1)]),_:2},1024),l(e(m),null,{default:t(()=>[o(V(i.email),1)]),_:2},1024),l(e(m),null,{default:t(()=>[o(V(i.role==1?"Admin":""),1)]),_:2},1024),l(e(m),{class:"text-right"},{default:t(()=>[l(e(c),{variant:"link",class:"ml-2 cursor-pointer",onClick:Y=>O(i.encrypted_id,i.name,i.email)},{default:t(()=>[l(e(me))]),_:2},1032,["onClick"]),l(e(c),{variant:"destructive",onClick:Y=>z(i.encrypted_id),class:"ml-2 cursor-pointer"},{default:t(()=>[l(e(fe))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1})])]),_:1})],64))}});export{Te as default};
