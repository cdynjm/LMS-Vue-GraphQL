import{d as Y,r as q,C,c as M,o as g,a as l,u as e,m as Z,w as t,b as o,e as a,f as E,g as D,h as Q,F as B,i as h,t as V,j as ee}from"./app-BJDzPrDL.js";import{_ as se,K as m}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bl_4tx1W.js";import{_ as k,a as le,b as U,c as N,d as S,e as F,f as P}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DZBTWMzb.js";import{_ as te,a as ae,b,c as y,d as ne,e as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-BlNiHr2w.js";import{_ as f}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BV3_Q5DQ.js";import{_ as p,a as c}from"./Label.vue_vue_type_script_setup_true_lang-BAqj8qoh.js";import{u as oe,a as re}from"./useQuery-BAcSG7FZ.js";import{L as de}from"./loader-circle-BEiknnwn.js";import{C as ie,P as ue,T as me}from"./trash-2-B-0WXpey.js";import"./useForwardExpose-D91kPfCk.js";import"./RovingFocusGroup-fDnD0j3W.js";const fe={class:"p-6 space-y-6"},pe={class:"flex w-full justify-between items-center"},ce={class:"grid gap-4 py-4"},_e={class:"grid grid-cols-4 items-center gap-4"},ge={class:"grid grid-cols-4 items-center gap-4"},ye={class:"grid grid-cols-4 items-center gap-4"},ve={class:"grid gap-4 py-4"},xe={class:"grid grid-cols-4 items-center gap-4"},we={class:"grid grid-cols-4 items-center gap-4"},Ae={class:"grid grid-cols-4 items-center gap-4"},Ve={class:"text-center text-green-500 flex items-center justify-center"},be={class:"text-center text-red-500 flex items-center justify-center"},Qe=Y({__name:"Admin-Management",setup($e){const $=oe(),L=[{title:"Admin Management",href:"/admin/admin-management"}],T=async()=>(await ee.post("/graphql",{query:`
    query {
      admins {
        encrypted_id
        name
        email
        role
      }
    }
  `})).data.data,{isPending:J,error:qe,data:j,isFetching:Ce}=re({queryKey:["fetchAdmins"],queryFn:T}),v=q(!1);function R(){v.value=!0}const d=C({name:"",email:"",password:""}),z=()=>{d.post(route("create.admin"),{onSuccess:()=>{m.success("Admin account created successfully"),d.reset(),v.value=!1,$.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{m.error("Email already exists"),console.error("Error")}})},x=q(!1);function G(_,s,n){r.id=_,r.name=s,r.email=n,x.value=!0}const r=C({id:"",name:"",email:"",password:""}),H=()=>{r.patch(route("update.admin"),{onSuccess:()=>{m.success("Admin account updated successfully"),r.reset(),x.value=!1,$.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{m.error("Email already exists"),console.error("Error")}})},w=q(!1);function I(_){A.id=_,w.value=!0}const A=C({id:""}),O=()=>{A.delete(route("delete.admin"),{onSuccess:()=>{m.success("Admin account deleted successfully"),A.reset(),w.value=!1,$.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{m.error("Deletion Error"),console.error("Error")}})};return(_,s)=>(g(),M(B,null,[l(e(Z),{title:"Admin Management"}),l(se,{breadcrumbs:L},{default:t(()=>[o("div",fe,[o("div",pe,[s[25]||(s[25]=o("h6",{class:"flex-1 text-md font-bold"},"Administrators",-1)),l(e(k),{open:v.value,"onUpdate:open":s[3]||(s[3]=n=>v.value=n)},{default:t(()=>[l(e(le),{"as-child":""},{default:t(()=>[l(e(f),{onClick:R,class:"cursor-pointer"},{default:t(()=>s[9]||(s[9]=[a(" + New ")])),_:1})]),_:1}),l(e(U),{class:"sm:max-w-[600px]"},{default:t(()=>[l(e(N),null,{default:t(()=>[l(e(S),null,{default:t(()=>s[10]||(s[10]=[a("Add Admin")])),_:1}),l(e(F),null,{default:t(()=>s[11]||(s[11]=[a(" Enter details for a new admin ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:E(z,["prevent"])},[o("div",ce,[o("div",_e,[l(e(p),{class:"text-right"},{default:t(()=>s[12]||(s[12]=[a("Name")])),_:1}),l(e(c),{modelValue:e(d).name,"onUpdate:modelValue":s[0]||(s[0]=n=>e(d).name=n),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),o("div",ge,[l(e(p),{class:"text-right"},{default:t(()=>s[13]||(s[13]=[a("Email")])),_:1}),l(e(c),{modelValue:e(d).email,"onUpdate:modelValue":s[1]||(s[1]=n=>e(d).email=n),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),o("div",ye,[l(e(p),{class:"text-start"},{default:t(()=>s[14]||(s[14]=[a("Password")])),_:1}),l(e(c),{modelValue:e(d).password,"onUpdate:modelValue":s[2]||(s[2]=n=>e(d).password=n),placeholder:"Password",type:"password",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(P),null,{default:t(()=>[l(e(f),{type:"submit",class:"cursor-pointer",disabled:e(d).processing},{default:t(()=>s[15]||(s[15]=[a("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(k),{open:x.value,"onUpdate:open":s[7]||(s[7]=n=>x.value=n)},{default:t(()=>[l(e(U),{class:"sm:max-w-[600px]"},{default:t(()=>[l(e(N),null,{default:t(()=>[l(e(S),null,{default:t(()=>s[16]||(s[16]=[a("Edit Admin")])),_:1}),l(e(F),null,{default:t(()=>s[17]||(s[17]=[a(" Update details for the admin ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:E(H,["prevent"])},[o("div",ve,[o("div",xe,[l(e(p),{class:"text-right"},{default:t(()=>s[18]||(s[18]=[a("Name")])),_:1}),l(e(c),{modelValue:e(r).name,"onUpdate:modelValue":s[4]||(s[4]=n=>e(r).name=n),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),o("div",we,[l(e(p),{class:"text-right"},{default:t(()=>s[19]||(s[19]=[a("Email")])),_:1}),l(e(c),{modelValue:e(r).email,"onUpdate:modelValue":s[5]||(s[5]=n=>e(r).email=n),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),o("div",Ae,[l(e(p),{class:"text-start"},{default:t(()=>s[20]||(s[20]=[a("Change Password")])),_:1}),l(e(c),{modelValue:e(r).password,"onUpdate:modelValue":s[6]||(s[6]=n=>e(r).password=n),placeholder:"Password",type:"password",class:"col-span-3"},null,8,["modelValue"])])]),l(e(P),null,{default:t(()=>[l(e(f),{type:"submit",class:"cursor-pointer",disabled:e(r).processing},{default:t(()=>s[21]||(s[21]=[a("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(k),{open:w.value,"onUpdate:open":s[8]||(s[8]=n=>w.value=n)},{default:t(()=>[l(e(U),{class:"sm:max-w-[600px]"},{default:t(()=>[l(e(N),null,{default:t(()=>[l(e(S),null,{default:t(()=>s[22]||(s[22]=[a("Delete Admin")])),_:1}),l(e(F),null,{default:t(()=>s[23]||(s[23]=[a(" Are you sure you want to delete this admin? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:E(O,["prevent"])},[l(e(P),null,{default:t(()=>[l(e(f),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(A).processing},{default:t(()=>s[24]||(s[24]=[a("Delete")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),l(e(te),null,{default:t(()=>[l(e(ae),null,{default:t(()=>[l(e(b),null,{default:t(()=>[l(e(y),{class:"w-[50px]"},{default:t(()=>s[26]||(s[26]=[a("#")])),_:1}),l(e(y),null,{default:t(()=>s[27]||(s[27]=[a("Name")])),_:1}),l(e(y),null,{default:t(()=>s[28]||(s[28]=[a("Email")])),_:1}),l(e(y),null,{default:t(()=>s[29]||(s[29]=[a("Role")])),_:1}),l(e(y),{class:"text-right"},{default:t(()=>s[30]||(s[30]=[a("Actions")])),_:1})]),_:1})]),_:1}),l(e(ne),null,{default:t(()=>{var n,K;return[e(J)?(g(),D(e(b),{key:0},{default:t(()=>[l(e(u),{colspan:"5",class:"text-center"},{default:t(()=>[o("small",Ve,[l(e(de),{class:"mr-2 w-5"}),s[31]||(s[31]=a(" Loading... "))])]),_:1})]),_:1})):Q("",!0),((n=e(j))==null?void 0:n.admins.length)==0?(g(),D(e(b),{key:1},{default:t(()=>[l(e(u),{colspan:"10"},{default:t(()=>[o("small",be,[l(e(ie),{class:"mr-2 w-5"}),s[32]||(s[32]=a(" No Data Found "))])]),_:1})]),_:1})):Q("",!0),(g(!0),M(B,null,h((K=e(j))==null?void 0:K.admins,(i,W)=>(g(),D(e(b),{key:i.encrypted_id},{default:t(()=>[l(e(u),null,{default:t(()=>[o("small",null,V(W+1),1)]),_:2},1024),l(e(u),null,{default:t(()=>[a(V(i.name),1)]),_:2},1024),l(e(u),null,{default:t(()=>[a(V(i.email),1)]),_:2},1024),l(e(u),null,{default:t(()=>[a(V(i.role==1?"Admin":""),1)]),_:2},1024),l(e(u),{class:"text-right"},{default:t(()=>[l(e(f),{variant:"link",class:"ml-2 cursor-pointer",onClick:X=>G(i.encrypted_id,i.name,i.email)},{default:t(()=>[l(e(ue))]),_:2},1032,["onClick"]),l(e(f),{variant:"destructive",onClick:X=>I(i.encrypted_id),class:"ml-2 cursor-pointer"},{default:t(()=>[l(e(me))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1})])]),_:1})],64))}});export{Qe as default};
