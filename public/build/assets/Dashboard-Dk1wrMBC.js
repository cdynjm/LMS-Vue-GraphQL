import{F as j,U as A,_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-CbpgM4a7.js";import{d as T,k as U,c as d,o as r,a as e,u as t,m as B,w as a,b as o,g as c,e as u,t as i,F as y,i as v,n as D,j as M}from"./app-nLh1rLCO.js";import{u as L,a as V,C as F}from"./Skeleton.vue_vue_type_script_setup_true_lang-ClmoYYpf.js";import{_ as p,a as f,b as x,c as l}from"./CardTitle.vue_vue_type_script_setup_true_lang-B4lOO7VA.js";import{_ as I,a as Q}from"./SkeletonBox.vue_vue_type_script_setup_true_lang-ClPhgR7B.js";import{_ as g}from"./SkeletonCard.vue_vue_type_script_setup_true_lang-CXErVxGT.js";import{c as z,_ as E}from"./index-CtMMYbN-.js";import{F as $,P as H}from"./pen-o7onskE2.js";import{C as N}from"./circle-check-big-DEp7wC9k.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-DWTHgTpG.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D4T7y-Kl.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=z("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Y={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 p-4"},G={class:"text-2xl font-bold"},J={class:"text-2xl font-bold"},R={class:"text-2xl font-bold"},W={class:"text-2xl font-bold"},X={class:"grid grid-cols-1 xl:grid-cols-3 gap-4 p-4"},Z={class:"flex items-center space-x-4 rounded-md border p-4"},tt=["src"],et={class:"flex-1 space-y-1"},st={class:"text-sm font-medium leading-none"},at={class:"text-[13px] text-muted-foreground"},ot={class:"text-[14px]"},nt={class:"mb-4 grid grid-cols-[25px_minmax(0,1fr)] items-start pb-0 last:mb-0 last:pb-0"},rt={class:"space-y-1"},it={class:"text-sm font-medium leading-none"},lt={class:"text-[12px] text-muted-foreground"},dt={class:"text-gray-500 text-[13px] flex items-center gap-2"},ct={key:0},ut={key:1},pt={class:"text-gray-500 text-[13px] flex items-center gap-2"},ft={key:0},_t={key:1},mt={class:"text-gray-500"},xt=["href"];function gt(k){const h=new Date(k),b=h.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),w=h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${b} | ${w}`}const jt=T({__name:"Dashboard",setup(k){const h=[{title:"Dashboard",href:"/admin/dashboard"}];L();const b=async()=>(await M.post("/graphql",{query:`
        query {
            dashboard {
                adminsCount
                officialsCount
                categoriesCount
                filesCount
                files {
                    municipalStatus
                    provincialStatus
                    title
                    ordinanceNumber
                    finalTitle
                    file
                    updated_at
                    author {
                        name
                        photo
                        position
                    }
                    coAuthors {
                        official {
                            name
                            position
                        }
                    }
                }
            }
        }
    `})).data.data,{isPending:w,data:_,error:ht,isFetching:m}=V({queryKey:["fetchDashboardCounts"],queryFn:b});return(q,n)=>{const P=U("CardDescription");return r(),d(y,null,[e(t(B),{title:"Dashboard"}),e(O,{breadcrumbs:h},{default:a(()=>{var C;return[o("div",Y,[e(t(p),{class:"pt-0 shadow-none"},{default:a(()=>[e(t(f),{class:"flex items-center justify-between bg-green-50 py-2"},{default:a(()=>[e(t(x),{class:"text-[13px]"},{default:a(()=>n[0]||(n[0]=[u("Admins")])),_:1}),e(t(K),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(m)?(r(),c(t(l),{key:0},{default:a(()=>[e(g)]),_:1})):(r(),c(t(l),{key:1},{default:a(()=>{var s;return[o("p",G,i((s=t(_))==null?void 0:s.dashboard.adminsCount),1)]}),_:1}))]),_:1}),e(t(p),{class:"pt-0 shadow-none"},{default:a(()=>[e(t(f),{class:"flex items-center justify-between bg-blue-50 py-2"},{default:a(()=>[e(t(x),{class:"text-[13px]"},{default:a(()=>n[1]||(n[1]=[u("Categories")])),_:1}),e(t(j),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(m)?(r(),c(t(l),{key:0},{default:a(()=>[e(g)]),_:1})):(r(),c(t(l),{key:1},{default:a(()=>{var s;return[o("p",J,i((s=t(_))==null?void 0:s.dashboard.categoriesCount),1)]}),_:1}))]),_:1}),e(t(p),{class:"pt-0 shadow-none"},{default:a(()=>[e(t(f),{class:"flex items-center justify-between bg-red-50 py-2"},{default:a(()=>[e(t(x),{class:"text-[13px]"},{default:a(()=>n[2]||(n[2]=[u("Files")])),_:1}),e(t($),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(m)?(r(),c(t(l),{key:0},{default:a(()=>[e(g)]),_:1})):(r(),c(t(l),{key:1},{default:a(()=>{var s;return[o("p",R,i((s=t(_))==null?void 0:s.dashboard.filesCount),1)]}),_:1}))]),_:1}),e(t(p),{class:"pt-0 shadow-none"},{default:a(()=>[e(t(f),{class:"flex items-center justify-between bg-orange-50 py-2"},{default:a(()=>[e(t(x),{class:"text-[13px]"},{default:a(()=>n[3]||(n[3]=[u("Officials")])),_:1}),e(t(A),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(m)?(r(),c(t(l),{key:0},{default:a(()=>[e(g)]),_:1})):(r(),c(t(l),{key:1},{default:a(()=>{var s;return[o("p",W,i((s=t(_))==null?void 0:s.dashboard.officialsCount),1)]}),_:1}))]),_:1})]),o("div",X,[t(m)?(r(),d(y,{key:0},v(3,s=>e(t(p),{class:"shadow-none"},{default:a(()=>[e(t(f),{class:"text-[14px]"},{default:a(()=>[e(g)]),_:1}),e(t(l),{class:"grid gap-4"},{default:a(()=>[e(I)]),_:1})]),_:1})),64)):(r(!0),d(y,{key:1},v((C=t(_))==null?void 0:C.dashboard.files,(s,yt)=>(r(),c(t(p),{class:"shadow-none flex flex-col h-full"},{default:a(()=>[e(t(f),{class:"text-[14px]"},{default:a(()=>[e(t(x),null,{default:a(()=>n[4]||(n[4]=[u("Ordinance Number")])),_:1}),e(P,null,{default:a(()=>[u(i(s.ordinanceNumber!=null?s.ordinanceNumber:"-"),1)]),_:2},1024),o("div",Z,[o("img",{src:"/storage/profile/"+s.author.photo,class:"w-10 h-10 rounded-full object-cover"},null,8,tt),o("div",et,[o("p",st,i(s.author.name),1),o("p",at,i(s.author.position),1)]),e(t(H),{class:"h-auto w-5"})])]),_:2},1024),e(t(l),{class:"grid gap-4"},{default:a(()=>[o("div",null,[o("p",ot,i(s.finalTitle==null?s.title:s.finalTitle),1)]),o("div",null,[n[6]||(n[6]=o("div",{class:"text-[14px] mb-4 font-bold text-blue-500"},"Co-Authors",-1)),(r(!0),d(y,null,v(s.coAuthors,(S,bt)=>(r(),d("div",nt,[n[5]||(n[5]=o("span",{class:"flex h-2 w-2 translate-y-1 rounded-full bg-sky-500"},null,-1)),o("div",rt,[o("p",it,i(S.official.name),1),o("p",lt,i(S.official.position),1)])]))),256))]),o("div",dt,[s.municipalStatus==1?(r(),d("div",ct,[e(t(F),{class:"w-5 h-5 text-red-500"})])):(r(),d("div",ut,[e(t(N),{class:"w-5 h-5 text-green-500"})])),n[7]||(n[7]=u(" Municipal Status: ")),o("span",{class:D(s.municipalStatus==1?"text-red-500":"text-green-500")},i(s.municipalStatus==1?"Draft Ordinance":"Approved Ordinance"),3)]),o("div",pt,[s.provincialStatus==null||s.provincialStatus==1?(r(),d("div",ft,[e(t(F),{class:"w-5 h-5 text-red-500"})])):(r(),d("div",_t,[e(t(N),{class:"w-5 h-5 text-green-500"})])),n[8]||(n[8]=u(" Provincial Status: ")),o("span",{class:D([s.provincialStatus==1?"text-red-500":s.provincialStatus==2?"text-green-500":"text-gray-500"])},i(s.provincialStatus==1?"Disapproved":s.provincialStatus==2?"Approved Ordinance":"No Status Yet"),3)]),o("small",mt,i(gt(s.updated_at)),1)]),_:2},1024),e(t(Q),{class:"mt-auto"},{default:a(()=>[e(t(E),{class:"w-full text-[12px] cursor-pointer"},{default:a(()=>[o("a",{href:"/storage/files/"+s.file,class:"flex items-center gap-2",target:"_blank"},[e(t($)),n[9]||(n[9]=u(" Open PDF File "))],8,xt)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))])]}),_:1})],64)}}});export{jt as default};
