import{d as we,l as he,v as et,u as e,o as i,c as v,n as fe,p as tt,r as U,q as lt,s as at,C as Q,a as l,m as st,w as a,b as o,h as O,e as u,t as p,f as B,F,i as N,g as w,P as ot,j as ut}from"./app-DltaBB11.js";import{F as ge,_ as rt,K as C}from"./AppLayout.vue_vue_type_script_setup_true_lang-B_rYgpEX.js";import{_ as H,a as nt,b as Z,c as G,d as J,e as W,f as ae}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-CfEfPMjX.js";import{_ as R,a as T,b as I,c as M,d as de,e as ie,f as $}from"./SelectValue.vue_vue_type_script_setup_true_lang-V4MuWHny.js";import{_ as ye,a as ve,b as q,c as D,d as xe,e as g,C as _e,P as be,T as Ve}from"./TableHeader.vue_vue_type_script_setup_true_lang-BLPhPzaT.js";import{c as se,a as dt,_ as b}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BEIvP4IS.js";import{_ as m,a as y}from"./Label.vue_vue_type_script_setup_true_lang-DzDeqfqm.js";import{u as it,a as ft}from"./useQuery-Bpw1J7Dh.js";import{u as mt}from"./useForwardExpose-BgQODMAl.js";import{L as De}from"./loader-circle-UgZFkQcg.js";import"./RovingFocusGroup--VtYsp-Q.js";import"./check-CVrsL8gE.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=se("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=se("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=se("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=se("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Se=we({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(A,{emit:V}){const E=A,k=mt(E,"modelValue",V,{passive:!0,defaultValue:E.defaultValue});return(Y,j)=>he((i(),v("textarea",{"onUpdate:modelValue":j[0]||(j[0]=P=>tt(k)?k.value=P:null),"data-slot":"textarea",class:fe(e(dt)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",E.class))},null,2)),[[et,e(k)]])}}),vt={class:"p-6 space-y-6"},xt={class:"flex w-full justify-between items-center"},_t={key:0},bt={class:"flex text-md font-bold items-center"},Vt={class:"grid gap-4 py-4"},Dt={class:"grid grid-cols-4 items-center gap-4"},St={class:"grid gap-4 py-4"},wt={class:"grid grid-cols-4 items-center gap-4"},Ct={class:"flex flex-col space-y-1"},kt={class:"flex flex-col space-y-1"},Ft={class:"flex flex-col space-y-1"},$t={class:"flex flex-col space-y-1"},At={class:"space-y-3"},Pt=["onClick"],Ut={class:"flex flex-col space-y-1"},Nt={class:"md:col-span-2"},qt={class:"md:col-span-2"},Et={class:"space-y-3"},Lt=["onClick"],Rt={class:"md:col-span-2"},Tt={class:"md:col-span-2 text-right"},It={class:"text-center text-green-500 flex items-center justify-center"},Mt={class:"text-center text-red-500 flex items-center justify-center"},zt={class:"flex items-center space-x-3"},Ot={class:"font-medium"},jt={class:"flex items-center justify-between space-x-4"},Kt={class:"text-green-500 flex items-center justify-center"},Qt={class:"text-red-500 flex items-center justify-center"},Bt=["href"],Ht={class:"text-nowrap"},Zt={class:"text-nowrap"},Gt={class:"text-nowrap"},Jt={class:"text-nowrap"},Wt={key:0},Xt={class:"flex justify-between items-center mt-8"};function Yt(A){const V=new Date(A),E=V.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),X=V.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${E} | ${X}`}function ht(A,V=50){return A.length<=V?A:A.slice(0,V).trim()+"..."}const ml=we({__name:"Files",props:{id:{}},setup(A){const V=it(),E=[{title:"Files",href:"/admin/files"}],X=A,k=U(1),Y=U(""),j=U([]),P=U({currentPage:1,lastPage:1,hasMorePages:!1}),Ce=async()=>(await ut.post("/graphql",{query:`
    query ($id: String!, $page: Int!, $first: Int!) {
      files(id: $id, page: $page, first: $first) {
        categoryName {
          encrypted_id
          category
        }
        authors {
          encrypted_id
          name
        }
        filesListPaginated {
          data {
            encrypted_id
            municipalStatus
            provincialStatus
            title
            firstReadingDate
            secondReadingDate
            thirdReadingDate
            ordinanceNumber
            finalTitle
            enactmentDate
            lceapprovalDate
            transmittalDate
            spslapprovalDate
            postStatus
            publishStatus
            file
            author {
              encrypted_id
              name
            }
            coAuthors {
              official {
                encrypted_id
                name
              }
            }
          }
          paginatorInfo {
            currentPage
            lastPage
            total
            perPage
            hasMorePages
          }
        }
        subCategoriesList {
          encrypted_id
          category
          parentID
          created_at
          totalFiles
        }
      }
    }
  `,variables:{id:X.id,page:k.value,first:20}})).data.data,{data:x,isPending:me,isFetching:oe,isLoading:ue}=ft({queryKey:["fetchFiles",k],queryFn:Ce});lt(()=>{var f,t;(t=(f=x.value)==null?void 0:f.files)!=null&&t.filesListPaginated&&(j.value=x.value.files.filesListPaginated.data,P.value=x.value.files.filesListPaginated.paginatorInfo)});const pe=at(()=>{const f=Y.value.toLowerCase();return j.value.filter(t=>{var S,s,n,d,_;return((S=t.title)==null?void 0:S.toLowerCase().includes(f))||((n=(s=t.ordinanceNumber)==null?void 0:s.toLowerCase())==null?void 0:n.includes(f))||((_=(d=t.author.name)==null?void 0:d.toLowerCase())==null?void 0:_.includes(f))})}),ke=()=>{k.value<P.value.lastPage&&k.value++},Fe=()=>{k.value>1&&k.value--},K=U(!1);function $e(f){c.categoryID=f,K.value=!0}const c=Q({categoryID:"",municipalStatus:"",title:"",author:"",coauthor:[],file:null}),Ae=()=>{c.post(route("create.file"),{onSuccess:()=>{C.success("File created and uploaded successfully"),c.reset(),K.value=!1,V.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{C.error("Error creating file"),console.error("Error")}})},ce=async f=>{var d;const t=f.target,S=(d=t.files)==null?void 0:d[0];if(!S)return;const n=2*1024*1024;S.size>n&&(t.value="",C.error("File too large. Please select a smaller file.")),c.file=S,console.log("Selected file:",S)},Pe=()=>{c.coauthor.push("")},Ue=f=>{c.coauthor.splice(f,1)},re=U(!1);function Ne(f,t,S,s,n,d,_,ne,Ke,Qe,Be,He,Ze,Ge,Je,We,Xe,Ye){r.id=f,r.categoryID=t,r.municipalStatus=S,r.provincialStatus=s,r.title=n,r.author=d,r.coauthor=_,r.firstReadingDate=ne,r.secondReadingDate=Ke,r.thirdReadingDate=Qe,r.ordinanceNumber=Be,r.finalTitle=He,r.enactmentDate=Ze,r.lceapprovalDate=Ge,r.transmittalDate=Je,r.spslapprovalDate=We,r.postStatus=Xe,r.publishStatus=Ye,re.value=!0}const r=Q({id:"",categoryID:"",municipalStatus:"",provincialStatus:"",title:"",author:"",coauthor:[],firstReadingDate:"",secondReadingDate:"",thirdReadingDate:"",ordinanceNumber:"",finalTitle:"",enactmentDate:"",lceapprovalDate:"",transmittalDate:"",spslapprovalDate:"",postStatus:"",publishStatus:"",file:null}),qe=()=>{c.post(route("create.file"),{onSuccess:()=>{C.success("File created and uploaded successfully"),c.reset(),K.value=!1,V.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{C.error("Error creating file"),console.error("Error")}})},Ee=()=>{r.coauthor.push("")},Le=f=>{r.coauthor.splice(f,1)};function Re(f){return f.map(t=>t.official.encrypted_id)}const h=U(!1);function Te(f){z.id=f,h.value=!0}const z=Q({id:"",category:""}),Ie=()=>{z.post(route("create.subcategory"),{onSuccess:()=>{C.success("Subcategory created successfully"),z.reset(),h.value=!1,V.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{C.error("Error creating category"),console.error("Error")}})},ee=U(!1);function Me(f,t){L.id=f,L.category=t,ee.value=!0}const L=Q({id:"",category:""}),ze=()=>{L.patch(route("update.subcategory"),{onSuccess:()=>{C.success("Subcategory updated successfully"),L.reset(),ee.value=!1,V.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{C.error("Error updating category"),console.error("Error")}})},te=U(!1);function Oe(f){le.id=f,te.value=!0}const le=Q({id:""}),je=()=>{le.delete(route("delete.subcategory"),{onSuccess:()=>{C.success("Subcategory deleted successfully"),le.reset(),te.value=!1,V.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{C.error("Deletion Error"),console.error("Error")}})};return(f,t)=>(i(),v(F,null,[l(e(st),{title:"Files"}),l(rt,{breadcrumbs:E},{default:a(()=>{var S;return[o("div",vt,[o("div",xt,[o("div",null,[!e(ue)&&!e(oe)?(i(),v("div",_t,[o("h6",bt,[l(e(ge),{class:"h-8 w-8 mr-2 flex-shrink-0 rounded-full border p-1 text-muted-foreground"}),u(" "+p((S=e(x))==null?void 0:S.files.categoryName.category),1)])])):O("",!0)]),l(e(H),{open:h.value,"onUpdate:open":t[2]||(t[2]=s=>h.value=s)},{default:a(()=>[l(e(nt),{"as-child":""},{default:a(()=>[l(e(b),{onClick:t[0]||(t[0]=s=>{var n;return Te((n=e(x))==null?void 0:n.files.categoryName.encrypted_id)}),class:"cursor-pointer"},{default:a(()=>t[28]||(t[28]=[u(" + New ")])),_:1})]),_:1}),l(e(Z),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(G),null,{default:a(()=>[l(e(J),null,{default:a(()=>t[29]||(t[29]=[u("Add Category")])),_:1}),l(e(W),null,{default:a(()=>{var s;return[t[30]||(t[30]=u(" Create a sub-category for ")),o("b",null,p((s=e(x))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),o("form",{action:"",onSubmit:B(Ie,["prevent"])},[o("div",Vt,[o("div",Dt,[l(e(m),{class:"text-right"},{default:a(()=>t[31]||(t[31]=[u("Category")])),_:1}),l(e(y),{modelValue:e(z).category,"onUpdate:modelValue":t[1]||(t[1]=s=>e(z).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(ae),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(z).processing},{default:a(()=>t[32]||(t[32]=[u("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(H),{open:ee.value,"onUpdate:open":t[4]||(t[4]=s=>ee.value=s)},{default:a(()=>[l(e(Z),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(G),null,{default:a(()=>[l(e(J),null,{default:a(()=>t[33]||(t[33]=[u("Edit Category")])),_:1}),l(e(W),null,{default:a(()=>t[34]||(t[34]=[u(" Edit the details of the selected category ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:B(ze,["prevent"])},[o("div",St,[o("div",wt,[l(e(m),{class:"text-right"},{default:a(()=>t[35]||(t[35]=[u("Category")])),_:1}),l(e(y),{modelValue:e(L).category,"onUpdate:modelValue":t[3]||(t[3]=s=>e(L).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(ae),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(L).processing},{default:a(()=>t[36]||(t[36]=[u("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(H),{open:te.value,"onUpdate:open":t[5]||(t[5]=s=>te.value=s)},{default:a(()=>[l(e(Z),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(G),null,{default:a(()=>[l(e(J),null,{default:a(()=>t[37]||(t[37]=[u("Delete Subcategory")])),_:1}),l(e(W),null,{default:a(()=>t[38]||(t[38]=[u(" Are you sure you want to delete this category? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:B(je,["prevent"])},[l(e(ae),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(le).processing},{default:a(()=>t[39]||(t[39]=[u("Delete")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(H),{open:K.value,"onUpdate:open":t[9]||(t[9]=s=>K.value=s)},{default:a(()=>[l(e(Z),{class:"sm:max-w-[800px] w-full"},{default:a(()=>[l(e(G),null,{default:a(()=>[l(e(J),null,{default:a(()=>t[40]||(t[40]=[u("Add New File")])),_:1}),l(e(W),null,{default:a(()=>{var s;return[t[41]||(t[41]=u(" Create a new file for ")),o("b",null,p((s=e(x))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),o("form",{onSubmit:B(Ae,["prevent"]),class:"space-y-6"},[o("div",Ct,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[42]||(t[42]=[u("Municipal Status")])),_:1}),l(e(R),{modelValue:e(c).municipalStatus,"onUpdate:modelValue":t[6]||(t[6]=s=>e(c).municipalStatus=s),required:""},{default:a(()=>[l(e(T),{class:"w-full"},{default:a(()=>[l(e(I),{placeholder:"Select a status"})]),_:1}),l(e(M),null,{default:a(()=>[l(e(de),null,{default:a(()=>[l(e(ie),null,{default:a(()=>t[43]||(t[43]=[u("Status")])),_:1}),l(e($),{value:"1"},{default:a(()=>t[44]||(t[44]=[u("Draft Ordinance")])),_:1}),l(e($),{value:"2"},{default:a(()=>t[45]||(t[45]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",kt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[46]||(t[46]=[u("Title of Ordinance")])),_:1}),l(e(Se),{modelValue:e(c).title,"onUpdate:modelValue":t[7]||(t[7]=s=>e(c).title=s),class:"w-full"},null,8,["modelValue"])]),o("div",Ft,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[47]||(t[47]=[u("Author")])),_:1}),l(e(R),{modelValue:e(c).author,"onUpdate:modelValue":t[8]||(t[8]=s=>e(c).author=s),required:""},{default:a(()=>[l(e(T),{class:"w-full"},{default:a(()=>[l(e(I),{placeholder:"Select an author"})]),_:1}),l(e(M),null,{default:a(()=>{var s;return[l(e(ie),null,{default:a(()=>t[48]||(t[48]=[u("Authors")])),_:1}),(i(!0),v(F,null,N((s=e(x))==null?void 0:s.files.authors,n=>(i(),w(e(de),null,{default:a(()=>[l(e($),{value:n.encrypted_id},{default:a(()=>[u(p(n.name),1)]),_:2},1032,["value"])]),_:2},1024))),256))]}),_:1})]),_:1},8,["modelValue"])]),o("div",$t,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[49]||(t[49]=[u("Co Authors")])),_:1}),o("div",At,[(i(!0),v(F,null,N(e(c).coauthor,(s,n)=>(i(),v("div",{key:n,class:"flex items-center gap-2"},[l(e(R),{modelValue:e(c).coauthor[n],"onUpdate:modelValue":d=>e(c).coauthor[n]=d,required:""},{default:a(()=>[l(e(T),{class:"w-full"},{default:a(()=>[l(e(I),{placeholder:"Select an author"})]),_:1}),l(e(M),null,{default:a(()=>[l(e(ie),null,{default:a(()=>t[50]||(t[50]=[u("Authors")])),_:1}),l(e(de),null,{default:a(()=>{var d;return[(i(!0),v(F,null,N((d=e(x))==null?void 0:d.files.authors,_=>(i(),w(e($),{key:_.encrypted_id,value:_.encrypted_id},{default:a(()=>[u(p(_.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o("button",{type:"button",onClick:d=>Ue(n),class:"text-red-500 hover:text-red-700 text-sm cursor-pointer"}," ✕ ",8,Pt)]))),128)),o("button",{type:"button",onClick:Pe,class:"text-blue-500 hover:text-blue-700 text-sm cursor-pointer"}," + Add ")])]),o("div",Ut,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[51]||(t[51]=[u("Upload a File")])),_:1}),l(e(y),{type:"file",class:"col-span-3",onChange:ce,accept:".pdf",required:""})]),l(e(ae),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(c).processing},{default:a(()=>t[52]||(t[52]=[u(" Save ")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(H),{open:re.value,"onUpdate:open":t[25]||(t[25]=s=>re.value=s)},{default:a(()=>[l(e(Z),{class:"sm:max-w-[800px] w-full max-h-[90vh] overflow-y-auto"},{default:a(()=>[l(e(G),null,{default:a(()=>[l(e(J),null,{default:a(()=>t[53]||(t[53]=[u("Edit File")])),_:1}),l(e(W),null,{default:a(()=>t[54]||(t[54]=[u("Edit the selected file's details below.")])),_:1})]),_:1}),o("form",{onSubmit:B(qe,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[55]||(t[55]=[u("Municipal Status")])),_:1}),l(e(R),{modelValue:e(r).municipalStatus,"onUpdate:modelValue":t[10]||(t[10]=s=>e(r).municipalStatus=s),required:""},{default:a(()=>[l(e(T),{class:"w-full"},{default:a(()=>[l(e(I),{placeholder:"Select a status"})]),_:1}),l(e(M),null,{default:a(()=>[l(e($),{value:"1"},{default:a(()=>t[56]||(t[56]=[u("Draft Ordinance")])),_:1}),l(e($),{value:"2"},{default:a(()=>t[57]||(t[57]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[58]||(t[58]=[u("Provincial Status")])),_:1}),l(e(R),{modelValue:e(r).provincialStatus,"onUpdate:modelValue":t[11]||(t[11]=s=>e(r).provincialStatus=s),required:""},{default:a(()=>[l(e(T),{class:"w-full"},{default:a(()=>[l(e(I),{placeholder:"Select a status"})]),_:1}),l(e(M),null,{default:a(()=>[l(e($),{value:"1"},{default:a(()=>t[59]||(t[59]=[u("Draft Ordinance")])),_:1}),l(e($),{value:"2"},{default:a(()=>t[60]||(t[60]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Nt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[61]||(t[61]=[u("Title of Ordinance")])),_:1}),l(e(Se),{modelValue:e(r).title,"onUpdate:modelValue":t[12]||(t[12]=s=>e(r).title=s),class:"w-full"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[62]||(t[62]=[u("Author")])),_:1}),l(e(R),{modelValue:e(r).author,"onUpdate:modelValue":t[13]||(t[13]=s=>e(r).author=s),required:""},{default:a(()=>[l(e(T),{class:"w-full"},{default:a(()=>[l(e(I),{placeholder:"Select an author"})]),_:1}),l(e(M),null,{default:a(()=>{var s;return[(i(!0),v(F,null,N((s=e(x))==null?void 0:s.files.authors,n=>(i(),w(e($),{key:n.encrypted_id,value:n.encrypted_id},{default:a(()=>[u(p(n.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1},8,["modelValue"])]),o("div",qt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[63]||(t[63]=[u("Co Authors")])),_:1}),o("div",Et,[(i(!0),v(F,null,N(e(r).coauthor,(s,n)=>(i(),v("div",{key:n,class:"flex items-center gap-2"},[l(e(R),{modelValue:e(r).coauthor[n],"onUpdate:modelValue":d=>e(r).coauthor[n]=d,required:"",class:"flex-1"},{default:a(()=>[l(e(T),{class:"w-full"},{default:a(()=>[l(e(I),{placeholder:"Select a co-author"})]),_:1}),l(e(M),null,{default:a(()=>{var d;return[(i(!0),v(F,null,N((d=e(x))==null?void 0:d.files.authors,_=>(i(),w(e($),{key:_.encrypted_id,value:_.encrypted_id},{default:a(()=>[u(p(_.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o("button",{type:"button",onClick:d=>Le(n),class:"text-red-500 cursor-pointer"},"✕",8,Lt)]))),128)),o("button",{type:"button",onClick:Ee,class:"text-blue-500 text-sm cursor-pointer"}," + Add ")])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[64]||(t[64]=[u("Ordinance Number")])),_:1}),l(e(y),{modelValue:e(r).ordinanceNumber,"onUpdate:modelValue":t[14]||(t[14]=s=>e(r).ordinanceNumber=s),type:"text",class:"w-full"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[65]||(t[65]=[u("Final Title")])),_:1}),l(e(y),{modelValue:e(r).finalTitle,"onUpdate:modelValue":t[15]||(t[15]=s=>e(r).finalTitle=s),type:"text",class:"w-full"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[66]||(t[66]=[u("1st Reading Date")])),_:1}),l(e(y),{modelValue:e(r).firstReadingDate,"onUpdate:modelValue":t[16]||(t[16]=s=>e(r).firstReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[67]||(t[67]=[u("2nd Reading Date")])),_:1}),l(e(y),{modelValue:e(r).secondReadingDate,"onUpdate:modelValue":t[17]||(t[17]=s=>e(r).secondReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[68]||(t[68]=[u("3rd Reading Date")])),_:1}),l(e(y),{modelValue:e(r).thirdReadingDate,"onUpdate:modelValue":t[18]||(t[18]=s=>e(r).thirdReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[69]||(t[69]=[u("Enactment Date")])),_:1}),l(e(y),{modelValue:e(r).enactmentDate,"onUpdate:modelValue":t[19]||(t[19]=s=>e(r).enactmentDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[70]||(t[70]=[u("LCE Approval Date")])),_:1}),l(e(y),{modelValue:e(r).lceapprovalDate,"onUpdate:modelValue":t[20]||(t[20]=s=>e(r).lceapprovalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[71]||(t[71]=[u("Transmittal Date")])),_:1}),l(e(y),{modelValue:e(r).transmittalDate,"onUpdate:modelValue":t[21]||(t[21]=s=>e(r).transmittalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[72]||(t[72]=[u("SPSL Approval Date")])),_:1}),l(e(y),{modelValue:e(r).spslapprovalDate,"onUpdate:modelValue":t[22]||(t[22]=s=>e(r).spslapprovalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[73]||(t[73]=[u("Post Status")])),_:1}),l(e(y),{modelValue:e(r).postStatus,"onUpdate:modelValue":t[23]||(t[23]=s=>e(r).postStatus=s)},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[74]||(t[74]=[u("Publish Status")])),_:1}),l(e(y),{modelValue:e(r).publishStatus,"onUpdate:modelValue":t[24]||(t[24]=s=>e(r).publishStatus=s)},null,8,["modelValue"])]),o("div",Rt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[75]||(t[75]=[u("Update File")])),_:1}),l(e(y),{type:"file",onChange:ce,accept:".pdf"})]),o("div",Tt,[l(e(b),{type:"submit",disabled:e(r).processing},{default:a(()=>t[76]||(t[76]=[u(" Save Changes ")])),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"])]),l(e(ye),null,{default:a(()=>[l(e(ve),null,{default:a(()=>[l(e(q),null,{default:a(()=>[l(e(D),{class:"w-[50px]"},{default:a(()=>t[77]||(t[77]=[o("small",null,"#",-1)])),_:1}),l(e(D),{class:"w-[300px]"},{default:a(()=>t[78]||(t[78]=[o("small",null,"Category",-1)])),_:1}),l(e(D),null,{default:a(()=>t[79]||(t[79]=[o("small",null,"No. of Files",-1)])),_:1}),l(e(D),null,{default:a(()=>t[80]||(t[80]=[o("small",null,"Creation Date",-1)])),_:1}),l(e(D),{class:"text-right"},{default:a(()=>t[81]||(t[81]=[o("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),!e(ue)&&!e(oe)?(i(),w(e(xe),{key:0},{default:a(()=>{var s,n;return[e(me)?(i(),w(e(q),{key:0},{default:a(()=>[l(e(g),{colspan:"10",class:"text-center"},{default:a(()=>[o("small",It,[l(e(De),{class:"mr-2 w-5"}),t[82]||(t[82]=u(" Loading... "))])]),_:1})]),_:1})):O("",!0),((s=e(x))==null?void 0:s.files.subCategoriesList.length)==0?(i(),w(e(q),{key:1},{default:a(()=>[l(e(g),{colspan:"5"},{default:a(()=>[o("small",Mt,[l(e(_e),{class:"mr-2 w-5"}),t[83]||(t[83]=u(" No Data Found "))])]),_:1})]),_:1})):O("",!0),(i(!0),v(F,null,N((n=e(x))==null?void 0:n.files.subCategoriesList,(d,_)=>(i(),w(e(q),{key:d.id},{default:a(()=>[l(e(g),null,{default:a(()=>[o("small",null,p(_+1),1)]),_:2},1024),l(e(g),{class:"w-[300px] pr-20"},{default:a(()=>[l(e(ot),{href:f.route("admin.files",{id:d.encrypted_id})},{default:a(()=>[o("div",zt,[o("div",null,[l(e(ge),{class:"h-8 w-8 flex-shrink-0 rounded-full border p-1 text-muted-foreground"})]),o("div",null,[o("div",Ot,p(d.category),1)])])]),_:2},1032,["href"])]),_:2},1024),l(e(g),null,{default:a(()=>[u(p(d.totalFiles),1)]),_:2},1024),l(e(g),null,{default:a(()=>[o("small",null,p(Yt(d.created_at)),1)]),_:2},1024),l(e(g),{class:"text-right"},{default:a(()=>[l(e(b),{variant:"link",onClick:ne=>Me(d.encrypted_id,d.category),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(be))]),_:2},1032,["onClick"]),l(e(b),{variant:"destructive",onClick:ne=>Oe(d.encrypted_id),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(Ve))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})):O("",!0)]),_:1}),o("div",jt,[l(e(y),{modelValue:Y.value,"onUpdate:modelValue":t[26]||(t[26]=s=>Y.value=s),placeholder:"Search... (if no results, go to next page)",class:"w-full max-w-md text-sm"},null,8,["modelValue"]),l(e(b),{onClick:t[27]||(t[27]=s=>{var n;return $e((n=e(x))==null?void 0:n.files.categoryName.encrypted_id)}),class:"cursor-pointer"},{default:a(()=>t[84]||(t[84]=[u(" + New ")])),_:1})]),l(e(ye),null,{default:a(()=>[l(e(ve),null,{default:a(()=>[l(e(q),null,{default:a(()=>[l(e(D),{class:"w-[50px]"},{default:a(()=>t[85]||(t[85]=[o("small",null,"#",-1)])),_:1}),l(e(D),{class:"w-[50px]"},{default:a(()=>t[86]||(t[86]=[o("small",null,"File",-1)])),_:1}),l(e(D),{class:"w-[300px]"},{default:a(()=>t[87]||(t[87]=[o("small",null,"Title",-1)])),_:1}),l(e(D),null,{default:a(()=>t[88]||(t[88]=[o("small",null,"Ordinance Number",-1)])),_:1}),l(e(D),null,{default:a(()=>t[89]||(t[89]=[o("small",null,"Author",-1)])),_:1}),l(e(D),null,{default:a(()=>t[90]||(t[90]=[o("small",null,"Mun. Status",-1)])),_:1}),l(e(D),null,{default:a(()=>t[91]||(t[91]=[o("small",null,"Prov. Status",-1)])),_:1}),l(e(D),{class:"text-right"},{default:a(()=>t[92]||(t[92]=[o("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),!e(ue)&&!e(oe)?(i(),w(e(xe),{key:0},{default:a(()=>[e(me)?(i(),w(e(q),{key:0},{default:a(()=>[l(e(g),{colspan:"10",class:"text-center"},{default:a(()=>[o("small",Kt,[l(e(De),{class:"mr-2 w-5"}),t[93]||(t[93]=u(" Loading... "))])]),_:1})]),_:1})):pe.value.length===0?(i(),w(e(q),{key:1},{default:a(()=>[l(e(g),{colspan:"10",class:"text-center"},{default:a(()=>[o("small",Qt,[l(e(_e),{class:"mr-2 w-5"}),t[94]||(t[94]=u(" No Data Found "))])]),_:1})]),_:1})):(i(!0),v(F,{key:2},N(pe.value,(s,n)=>(i(),w(e(q),{key:s.encrypted_id},{default:a(()=>[l(e(g),null,{default:a(()=>[o("small",null,p(n+1),1)]),_:2},1024),l(e(g),null,{default:a(()=>[o("a",{href:`/storage/files/${s.file}`,target:"_blank"},[l(e(yt),{class:"w-5 h-5 text-green-500"})],8,Bt)]),_:2},1024),l(e(g),{class:"pr-5"},{default:a(()=>[o("div",Ht,p(ht(s.title)),1)]),_:2},1024),l(e(g),null,{default:a(()=>[o("small",Zt,p(s.ordinanceNumber??"-"),1)]),_:2},1024),l(e(g),{class:"pr-5"},{default:a(()=>[o("div",Gt,[o("b",null,p(s.author.name),1)]),t[96]||(t[96]=o("div",null,[o("small",{class:"text-blue-500"},"Co Authors:")],-1)),(i(!0),v(F,null,N(s.coAuthors,d=>(i(),v("div",{key:d.official.name},[o("small",Jt,p(d.official.name),1)]))),128)),s.coAuthors.length==0?(i(),v("div",Wt,t[95]||(t[95]=[o("small",null,"None",-1)]))):O("",!0)]),_:2},1024),l(e(g),null,{default:a(()=>[o("small",{class:fe(s.municipalStatus==1?"text-wrap text-red-500":"text-wrap text-green-500")},p(s.municipalStatus==1?"Draft":"Approved"),3)]),_:2},1024),l(e(g),null,{default:a(()=>[o("small",{class:fe(s.provincialStatus===1?"text-wrap text-red-500":s.provincialStatus===2?"text-wrap text-green-500":"text-wrap text-gray-500")},p(s.provincialStatus===null?"-":s.provincialStatus===1?"Draft":"Approved"),3)]),_:2},1024),l(e(g),{class:"text-right"},{default:a(()=>[l(e(b),{variant:"link",class:"ml-0 cursor-pointer"},{default:a(()=>[l(e(gt))]),_:1}),l(e(b),{variant:"link",class:"ml-0 cursor-pointer",onClick:d=>Ne(s.encrypted_id,s.categoryID,s.municipalStatus,s.provincialStatus,s.title,s.author.encrypted_id,Re(s.coAuthors),s.firstReadingDate,s.secondReadingDate,s.thirdReadingDate,s.ordinanceNumber,s.finalTitle,s.enactmentDate,s.lceapprovalDate,s.transmittalDate,s.spslapprovalDate,s.postStatus,s.publishStatus)},{default:a(()=>[l(e(be))]),_:2},1032,["onClick"]),l(e(b),{variant:"destructive",class:"ml-0 cursor-pointer"},{default:a(()=>[l(e(Ve))]),_:1})]),_:2},1024)]),_:2},1024))),128))]),_:1})):O("",!0)]),_:1}),o("div",Xt,[l(e(b),{disabled:P.value.currentPage<=1,onClick:Fe,class:"cursor-pointer"},{default:a(()=>[l(e(pt))]),_:1},8,["disabled"]),o("small",null," Pages "+p(P.value.currentPage)+" of "+p(P.value.lastPage),1),l(e(b),{disabled:P.value.currentPage>=P.value.lastPage,onClick:ke,class:"cursor-pointer"},{default:a(()=>[l(e(ct))]),_:1},8,["disabled"])])])]}),_:1})],64))}});export{ml as default};
