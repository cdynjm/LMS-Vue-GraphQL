import{d as we,k as st,v as ot,u as e,o as f,c as y,n as ce,l as ut,r as $,p as nt,q as rt,C as z,a as l,m as dt,w as a,b as o,h as B,e as u,t as p,f as O,F as P,i as A,g as k,W as it,j as ft}from"./app-DHsF0IA1.js";import{F as ye,_ as mt,K as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-DE7cgF8p.js";import{_ as j,a as pt,b as K,c as Q,d as Y,e as W,f as J}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-suuVuAvA.js";import{_ as N,a as E,b as q,c as T,d as X,e as Z,f as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-gH9m4R27.js";import{_ as xe,a as _e,b as R,c as V,d as be,e as v}from"./TableHeader.vue_vue_type_script_setup_true_lang-BmD9G1Dp.js";import{a as ct,_}from"./index-6cUSjxrQ.js";import{_ as m,a as C}from"./Label.vue_vue_type_script_setup_true_lang-vnfdSghp.js";import{u as gt,a as vt}from"./useQuery-Necv2RVO.js";import{u as yt}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BFOrUi-q.js";import{L as Se}from"./loader-circle-ClXyFffX.js";import{C as De}from"./circle-minus-Dxbi3F9c.js";import{P as Ve,T as Ce}from"./trash-2-DK9zjJZy.js";import{F as xt,A as _t,a as bt}from"./file-text-BFXQkhHA.js";import{E as St}from"./eye-DJ3eROsO.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-BBl_mVvc.js";import"./check-BFRu8gQU.js";const pe=we({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(G,{emit:L}){const w=G,F=yt(w,"modelValue",L,{passive:!0,defaultValue:w.defaultValue});return(ee,H)=>st((f(),y("textarea",{"onUpdate:modelValue":H[0]||(H[0]=U=>ut(F)?F.value=U:null),"data-slot":"textarea",class:ce(e(ct)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",w.class))},null,2)),[[ot,e(F)]])}}),Dt={class:"p-6 space-y-6"},Vt={class:"flex w-full justify-between items-center"},Ct={key:0},wt={class:"flex text-md font-bold items-center"},kt={class:"grid gap-4 py-4"},Ft={class:"grid grid-cols-4 items-center gap-4"},$t={class:"grid gap-4 py-4"},Pt={class:"grid grid-cols-4 items-center gap-4"},Ut={class:"flex flex-col space-y-1"},At={class:"flex flex-col space-y-1"},Nt={class:"flex flex-col space-y-1"},Et={class:"flex flex-col space-y-1"},qt={class:"space-y-3"},Tt=["onClick"],Rt={class:"flex flex-col space-y-1"},Lt={class:"md:col-span-2"},It={class:"md:col-span-2"},Mt={class:"md:col-span-2"},zt={class:"md:col-span-2"},Bt={class:"space-y-3"},Ot=["onClick"],jt={class:"md:col-span-2"},Kt={class:"md:col-span-2 text-right"},Qt={class:"text-center text-green-500 flex items-center justify-center"},Yt={class:"text-center text-red-500 flex items-center justify-center"},Wt=["onClick"],Gt={class:"flex items-center space-x-3"},Ht={class:"font-medium"},Jt={class:"flex items-center justify-between space-x-4"},Xt={class:"text-green-500 flex items-center justify-center"},Zt={class:"text-red-500 flex items-center justify-center"},ht=["href"],el=["onClick"],tl={class:"text-wrap text-[13px]"},ll={class:"text-nowrap"},al={class:"text-nowrap"},sl={class:"text-nowrap"},ol={key:0},ul=["onClick"],nl={class:"flex justify-between items-center mt-8"};function rl(G){const L=new Date(G),w=L.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),h=L.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${w} | ${h}`}const wl=we({__name:"Files",props:{id:{}},setup(G){const L=G,w=gt(),h=[{title:"Files",href:"/admin/files/"+L.id}],F=$(1),ee=$(""),H=$([]),U=$({currentPage:1,lastPage:1,hasMorePages:!1}),ke=async()=>(await ft.post("/graphql",{query:`
    query ($id: String!, $page: Int!, $first: Int!) {
      files(id: $id, page: $page, first: $first) {
        categoryName {
          encrypted_id
          category
        }
        authors {
          encrypted_id
          name
        }
        filesListPaginated {
          data {
            encrypted_id
            municipalStatus
            provincialStatus
            title
            firstReadingDate
            secondReadingDate
            thirdReadingDate
            ordinanceNumber
            finalTitle
            enactmentDate
            lceapprovalDate
            transmittalDate
            spslapprovalDate
            postStatus
            publishStatus
            file
            author {
              encrypted_id
              name
            }
            coAuthors {
              official {
                encrypted_id
                name
              }
            }
          }
          paginatorInfo {
            currentPage
            lastPage
            total
            perPage
            hasMorePages
          }
        }
        subCategoriesList {
          encrypted_id
          category
          parentID
          created_at
          totalFiles
        }
      }
    }
  `,variables:{id:L.id,page:F.value,first:20}})).data.data,{data:b,isPending:ge,isFetching:ie,isLoading:fe}=vt({queryKey:["fetchFiles",F],queryFn:ke});nt(()=>{var i,t;(t=(i=b.value)==null?void 0:i.files)!=null&&t.filesListPaginated&&(H.value=b.value.files.filesListPaginated.data,U.value=b.value.files.filesListPaginated.paginatorInfo)});const ve=rt(()=>{const i=ee.value.toLowerCase();return H.value.filter(t=>{var g,s,d,r,S;return((g=t.title)==null?void 0:g.toLowerCase().includes(i))||((d=(s=t.ordinanceNumber)==null?void 0:s.toLowerCase())==null?void 0:d.includes(i))||((S=(r=t.author.name)==null?void 0:r.toLowerCase())==null?void 0:S.includes(i))})}),Fe=()=>{F.value<U.value.lastPage&&F.value++},$e=()=>{F.value>1&&F.value--},te=$(!1);function Pe(i){c.categoryID=i,te.value=!0}const c=z({categoryID:"",municipalStatus:"",title:"",author:"",coauthor:[],file:null}),Ue=()=>{c.post(route("create.file"),{onSuccess:()=>{D.success("File created and uploaded successfully"),c.reset(),te.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Error creating file"),console.error("Error")}})},Ae=async i=>{var r;const t=i.target,g=(r=t.files)==null?void 0:r[0];if(!g)return;const d=2*1024*1024;g.size>d&&(t.value="",D.error("File too large. Please select a smaller file.")),c.file=g,console.log("Selected file:",g)},Ne=()=>{c.coauthor.push("")},Ee=i=>{c.coauthor.splice(i,1)},le=$(!1);function qe(i,t,g,s,d,r,S,de,Ge,He,Je,Xe,Ze,he,et,tt,lt,at){n.id=i,n.categoryID=t,n.municipalStatus=g,n.provincialStatus=s,n.title=d,n.author=r,n.coauthor=S,n.firstReadingDate=de,n.secondReadingDate=Ge,n.thirdReadingDate=He,n.ordinanceNumber=Je,n.finalTitle=Xe,n.enactmentDate=Ze,n.lceapprovalDate=he,n.transmittalDate=et,n.spslapprovalDate=tt,n.postStatus=lt,n.publishStatus=at,le.value=!0}const n=z({id:"",categoryID:"",municipalStatus:"",provincialStatus:"",title:"",author:"",coauthor:[],firstReadingDate:"",secondReadingDate:"",thirdReadingDate:"",ordinanceNumber:"",finalTitle:"",enactmentDate:"",lceapprovalDate:"",transmittalDate:"",spslapprovalDate:"",postStatus:"",publishStatus:"",file:null}),Te=()=>{n.post(route("update.file"),{onSuccess:()=>{D.success("File updated successfully"),n.reset(),le.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Error creating file"),console.error("Error")}})},Re=async i=>{var r;const t=i.target,g=(r=t.files)==null?void 0:r[0];if(!g)return;const d=2*1024*1024;g.size>d&&(t.value="",D.error("File too large. Please select a smaller file.")),c.file=g,console.log("Selected file:",g)},Le=()=>{n.coauthor.push("")},Ie=i=>{n.coauthor.splice(i,1)};function Me(i){return i.map(t=>t.official.encrypted_id)}const ae=$(!1);function ze(i){se.id=i,ae.value=!0}const se=z({id:""}),Be=()=>{se.delete(route("delete.file"),{onSuccess:()=>{D.success("File deleted successfully"),se.reset(),ae.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Deletion Error"),console.error("Error")}})},oe=$(!1);function Oe(i){M.id=i,oe.value=!0}const M=z({id:"",category:""}),je=()=>{M.post(route("create.subcategory"),{onSuccess:()=>{D.success("Subcategory created successfully"),M.reset(),oe.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Error creating category"),console.error("Error")}})},ue=$(!1);function Ke(i,t){I.id=i,I.category=t,ue.value=!0}const I=z({id:"",category:""}),Qe=()=>{I.patch(route("update.subcategory"),{onSuccess:()=>{D.success("Subcategory updated successfully"),I.reset(),ue.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Error updating category"),console.error("Error")}})},ne=$(!1);function Ye(i){re.id=i,ne.value=!0}const re=z({id:""}),We=()=>{re.delete(route("delete.subcategory"),{onSuccess:()=>{D.success("Subcategory deleted successfully"),re.reset(),ne.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Deletion Error"),console.error("Error")}})};function me(i,t={}){it.get(route(i,t))}return(i,t)=>(f(),y(P,null,[l(e(dt),{title:"Files"}),l(mt,{breadcrumbs:h},{default:a(()=>{var g;return[o("div",Dt,[o("div",Vt,[o("div",null,[!e(fe)&&!e(ie)?(f(),y("div",Ct,[o("h6",wt,[l(e(ye),{class:"h-8 w-8 mr-2 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"}),u(" "+p((g=e(b))==null?void 0:g.files.categoryName.category),1)])])):B("",!0)]),l(e(j),{open:oe.value,"onUpdate:open":t[2]||(t[2]=s=>oe.value=s)},{default:a(()=>[l(e(pt),{"as-child":""},{default:a(()=>[l(e(_),{onClick:t[0]||(t[0]=s=>{var d;return Oe((d=e(b))==null?void 0:d.files.categoryName.encrypted_id)}),class:"cursor-pointer"},{default:a(()=>t[29]||(t[29]=[u(" + New ")])),_:1})]),_:1}),l(e(K),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[30]||(t[30]=[u("Add Category")])),_:1}),l(e(W),null,{default:a(()=>{var s;return[t[31]||(t[31]=u(" Create a sub-category for ")),o("b",null,p((s=e(b))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),o("form",{action:"",onSubmit:O(je,["prevent"])},[o("div",kt,[o("div",Ft,[l(e(m),{class:"text-right"},{default:a(()=>t[32]||(t[32]=[u("Category")])),_:1}),l(e(C),{modelValue:e(M).category,"onUpdate:modelValue":t[1]||(t[1]=s=>e(M).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(J),null,{default:a(()=>[l(e(_),{type:"submit",class:"cursor-pointer",disabled:e(M).processing},{default:a(()=>t[33]||(t[33]=[u("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(j),{open:ue.value,"onUpdate:open":t[4]||(t[4]=s=>ue.value=s)},{default:a(()=>[l(e(K),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[34]||(t[34]=[u("Edit Category")])),_:1}),l(e(W),null,{default:a(()=>t[35]||(t[35]=[u(" Edit the details of the selected category ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:O(Qe,["prevent"])},[o("div",$t,[o("div",Pt,[l(e(m),{class:"text-right"},{default:a(()=>t[36]||(t[36]=[u("Category")])),_:1}),l(e(C),{modelValue:e(I).category,"onUpdate:modelValue":t[3]||(t[3]=s=>e(I).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(J),null,{default:a(()=>[l(e(_),{type:"submit",class:"cursor-pointer",disabled:e(I).processing},{default:a(()=>t[37]||(t[37]=[u("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(j),{open:ne.value,"onUpdate:open":t[5]||(t[5]=s=>ne.value=s)},{default:a(()=>[l(e(K),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[38]||(t[38]=[u("Delete Subcategory")])),_:1}),l(e(W),null,{default:a(()=>t[39]||(t[39]=[u(" Are you sure you want to delete this category? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:O(We,["prevent"])},[l(e(J),null,{default:a(()=>[l(e(_),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(re).processing},{default:a(()=>t[40]||(t[40]=[u("Delete")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(j),{open:te.value,"onUpdate:open":t[9]||(t[9]=s=>te.value=s)},{default:a(()=>[l(e(K),{class:"sm:max-w-[800px] w-full"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[41]||(t[41]=[u("Add New File")])),_:1}),l(e(W),null,{default:a(()=>{var s;return[t[42]||(t[42]=u(" Create a new file for ")),o("b",null,p((s=e(b))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),o("form",{onSubmit:O(Ue,["prevent"]),class:"space-y-6"},[o("div",Ut,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[43]||(t[43]=[u("Municipal Status")])),_:1}),l(e(N),{modelValue:e(c).municipalStatus,"onUpdate:modelValue":t[6]||(t[6]=s=>e(c).municipalStatus=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(X),null,{default:a(()=>[l(e(Z),null,{default:a(()=>t[44]||(t[44]=[u("Status")])),_:1}),l(e(x),{value:"1"},{default:a(()=>t[45]||(t[45]=[u("Draft Ordinance")])),_:1}),l(e(x),{value:"2"},{default:a(()=>t[46]||(t[46]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",At,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[47]||(t[47]=[u("Title of Ordinance")])),_:1}),l(e(pe),{modelValue:e(c).title,"onUpdate:modelValue":t[7]||(t[7]=s=>e(c).title=s),class:"w-full",required:""},null,8,["modelValue"])]),o("div",Nt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[48]||(t[48]=[u("Author")])),_:1}),l(e(N),{modelValue:e(c).author,"onUpdate:modelValue":t[8]||(t[8]=s=>e(c).author=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(T),null,{default:a(()=>{var s;return[l(e(Z),null,{default:a(()=>t[49]||(t[49]=[u("Authors")])),_:1}),(f(!0),y(P,null,A((s=e(b))==null?void 0:s.files.authors,d=>(f(),k(e(X),null,{default:a(()=>[l(e(x),{value:d.encrypted_id},{default:a(()=>[u(p(d.name),1)]),_:2},1032,["value"])]),_:2},1024))),256))]}),_:1})]),_:1},8,["modelValue"])]),o("div",Et,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[50]||(t[50]=[u("Co Authors")])),_:1}),o("div",qt,[(f(!0),y(P,null,A(e(c).coauthor,(s,d)=>(f(),y("div",{key:d,class:"flex items-center gap-2"},[l(e(N),{modelValue:e(c).coauthor[d],"onUpdate:modelValue":r=>e(c).coauthor[d]=r,required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(Z),null,{default:a(()=>t[51]||(t[51]=[u("Authors")])),_:1}),l(e(X),null,{default:a(()=>{var r;return[(f(!0),y(P,null,A((r=e(b))==null?void 0:r.files.authors,S=>(f(),k(e(x),{key:S.encrypted_id,value:S.encrypted_id},{default:a(()=>[u(p(S.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o("button",{type:"button",onClick:r=>Ee(d),class:"text-red-500 hover:text-red-700 text-sm cursor-pointer"}," ✕ ",8,Tt)]))),128)),o("button",{type:"button",onClick:Ne,class:"text-blue-500 hover:text-blue-700 text-sm cursor-pointer"}," + Add ")])]),o("div",Rt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[52]||(t[52]=[u("Upload a File")])),_:1}),l(e(C),{type:"file",class:"col-span-3",onChange:Ae,accept:".pdf",required:""})]),l(e(J),null,{default:a(()=>[l(e(_),{type:"submit",class:"cursor-pointer",disabled:e(c).processing},{default:a(()=>t[53]||(t[53]=[u(" Save ")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(j),{open:le.value,"onUpdate:open":t[25]||(t[25]=s=>le.value=s)},{default:a(()=>[l(e(K),{class:"sm:max-w-[800px] w-full max-h-[90vh] overflow-y-auto"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[54]||(t[54]=[u("Edit File")])),_:1}),l(e(W),null,{default:a(()=>t[55]||(t[55]=[u("Edit the selected file's details below.")])),_:1})]),_:1}),o("form",{onSubmit:O(Te,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[56]||(t[56]=[u("Municipal Status")])),_:1}),l(e(N),{modelValue:e(n).municipalStatus,"onUpdate:modelValue":t[10]||(t[10]=s=>e(n).municipalStatus=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(x),{value:"1"},{default:a(()=>t[57]||(t[57]=[u("Draft Ordinance")])),_:1}),l(e(x),{value:"2"},{default:a(()=>t[58]||(t[58]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[59]||(t[59]=[u("Provincial Status")])),_:1}),l(e(N),{modelValue:e(n).provincialStatus,"onUpdate:modelValue":t[11]||(t[11]=s=>e(n).provincialStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(x),{value:"0"},{default:a(()=>t[60]||(t[60]=[u("No Status Yet")])),_:1}),l(e(x),{value:"1"},{default:a(()=>t[61]||(t[61]=[u("Disapproved Ordinance")])),_:1}),l(e(x),{value:"2"},{default:a(()=>t[62]||(t[62]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Lt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[63]||(t[63]=[u("Title of Ordinance")])),_:1}),l(e(pe),{modelValue:e(n).title,"onUpdate:modelValue":t[12]||(t[12]=s=>e(n).title=s),class:"w-full",required:""},null,8,["modelValue"])]),o("div",It,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[64]||(t[64]=[u("Ordinance Number")])),_:1}),l(e(C),{modelValue:e(n).ordinanceNumber,"onUpdate:modelValue":t[13]||(t[13]=s=>e(n).ordinanceNumber=s),type:"text",class:"w-full"},null,8,["modelValue"])]),o("div",Mt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[65]||(t[65]=[u("Final Title")])),_:1}),l(e(pe),{modelValue:e(n).finalTitle,"onUpdate:modelValue":t[14]||(t[14]=s=>e(n).finalTitle=s),class:"w-full"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[66]||(t[66]=[u("Author")])),_:1}),l(e(N),{modelValue:e(n).author,"onUpdate:modelValue":t[15]||(t[15]=s=>e(n).author=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(T),null,{default:a(()=>{var s;return[(f(!0),y(P,null,A((s=e(b))==null?void 0:s.files.authors,d=>(f(),k(e(x),{key:d.encrypted_id,value:d.encrypted_id},{default:a(()=>[u(p(d.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1},8,["modelValue"])]),o("div",zt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[67]||(t[67]=[u("Co Authors")])),_:1}),o("div",Bt,[(f(!0),y(P,null,A(e(n).coauthor,(s,d)=>(f(),y("div",{key:d,class:"flex items-center gap-2"},[l(e(N),{modelValue:e(n).coauthor[d],"onUpdate:modelValue":r=>e(n).coauthor[d]=r,required:"",class:"flex-1"},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a co-author"})]),_:1}),l(e(T),null,{default:a(()=>{var r;return[(f(!0),y(P,null,A((r=e(b))==null?void 0:r.files.authors,S=>(f(),k(e(x),{key:S.encrypted_id,value:S.encrypted_id},{default:a(()=>[u(p(S.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o("button",{type:"button",onClick:r=>Ie(d),class:"text-red-500 cursor-pointer"},"✕",8,Ot)]))),128)),o("button",{type:"button",onClick:Le,class:"text-blue-500 text-sm cursor-pointer"}," + Add ")])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[68]||(t[68]=[u("1st Reading Date")])),_:1}),l(e(C),{modelValue:e(n).firstReadingDate,"onUpdate:modelValue":t[16]||(t[16]=s=>e(n).firstReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[69]||(t[69]=[u("2nd Reading Date")])),_:1}),l(e(C),{modelValue:e(n).secondReadingDate,"onUpdate:modelValue":t[17]||(t[17]=s=>e(n).secondReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[70]||(t[70]=[u("3rd Reading Date")])),_:1}),l(e(C),{modelValue:e(n).thirdReadingDate,"onUpdate:modelValue":t[18]||(t[18]=s=>e(n).thirdReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[71]||(t[71]=[u("Enactment Date")])),_:1}),l(e(C),{modelValue:e(n).enactmentDate,"onUpdate:modelValue":t[19]||(t[19]=s=>e(n).enactmentDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[72]||(t[72]=[u("LCE Approval Date")])),_:1}),l(e(C),{modelValue:e(n).lceapprovalDate,"onUpdate:modelValue":t[20]||(t[20]=s=>e(n).lceapprovalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[73]||(t[73]=[u("Transmittal Date")])),_:1}),l(e(C),{modelValue:e(n).transmittalDate,"onUpdate:modelValue":t[21]||(t[21]=s=>e(n).transmittalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[74]||(t[74]=[u("SPSL Approval Date")])),_:1}),l(e(C),{modelValue:e(n).spslapprovalDate,"onUpdate:modelValue":t[22]||(t[22]=s=>e(n).spslapprovalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[75]||(t[75]=[u("Post Status")])),_:1}),l(e(N),{modelValue:e(n).postStatus,"onUpdate:modelValue":t[23]||(t[23]=s=>e(n).postStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(X),null,{default:a(()=>[l(e(Z),null,{default:a(()=>t[76]||(t[76]=[u("Status")])),_:1}),l(e(x),{value:"0"},{default:a(()=>t[77]||(t[77]=[u("Not Yet")])),_:1}),l(e(x),{value:"1"},{default:a(()=>t[78]||(t[78]=[u("Posted")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[79]||(t[79]=[u("Publish Status")])),_:1}),l(e(N),{modelValue:e(n).publishStatus,"onUpdate:modelValue":t[24]||(t[24]=s=>e(n).publishStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(X),null,{default:a(()=>[l(e(Z),null,{default:a(()=>t[80]||(t[80]=[u("Status")])),_:1}),l(e(x),{value:"0"},{default:a(()=>t[81]||(t[81]=[u("Not Yet")])),_:1}),l(e(x),{value:"1"},{default:a(()=>t[82]||(t[82]=[u("Published")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",jt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[83]||(t[83]=[u("Update File")])),_:1}),l(e(C),{type:"file",onChange:Re,accept:".pdf"})]),o("div",Kt,[l(e(_),{type:"submit",class:"cursor-pointer",disabled:e(n).processing},{default:a(()=>t[84]||(t[84]=[u(" Save Changes ")])),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"]),l(e(j),{open:ae.value,"onUpdate:open":t[26]||(t[26]=s=>ae.value=s)},{default:a(()=>[l(e(K),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[85]||(t[85]=[u("Delete File")])),_:1}),l(e(W),null,{default:a(()=>t[86]||(t[86]=[u(" Are you sure you want to delete this file? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:O(Be,["prevent"])},[l(e(J),null,{default:a(()=>[l(e(_),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(se).processing},{default:a(()=>t[87]||(t[87]=[u("Delete")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),l(e(xe),null,{default:a(()=>[l(e(_e),null,{default:a(()=>[l(e(R),null,{default:a(()=>[l(e(V),{class:"w-[50px]"},{default:a(()=>t[88]||(t[88]=[o("small",null,"#",-1)])),_:1}),l(e(V),{class:"w-[300px]"},{default:a(()=>t[89]||(t[89]=[o("small",null,"Category",-1)])),_:1}),l(e(V),null,{default:a(()=>t[90]||(t[90]=[o("small",null,"No. of Files",-1)])),_:1}),l(e(V),null,{default:a(()=>t[91]||(t[91]=[o("small",null,"Creation Date",-1)])),_:1}),l(e(V),{class:"text-right"},{default:a(()=>t[92]||(t[92]=[o("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),!e(fe)&&!e(ie)?(f(),k(e(be),{key:0},{default:a(()=>{var s,d;return[e(ge)?(f(),k(e(R),{key:0},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[o("small",Qt,[l(e(Se),{class:"mr-2 w-5"}),t[93]||(t[93]=u(" Loading... "))])]),_:1})]),_:1})):B("",!0),((s=e(b))==null?void 0:s.files.subCategoriesList.length)==0?(f(),k(e(R),{key:1},{default:a(()=>[l(e(v),{colspan:"5"},{default:a(()=>[o("small",Yt,[l(e(De),{class:"mr-2 w-5"}),t[94]||(t[94]=u(" No Data Found "))])]),_:1})]),_:1})):B("",!0),(f(!0),y(P,null,A((d=e(b))==null?void 0:d.files.subCategoriesList,(r,S)=>(f(),k(e(R),{key:r.id},{default:a(()=>[l(e(v),null,{default:a(()=>[o("small",null,p(S+1),1)]),_:2},1024),l(e(v),{class:"w-[300px] pr-20"},{default:a(()=>[o("a",{href:"#",onClick:de=>me("admin.files",{id:r.encrypted_id})},[o("div",Gt,[o("div",null,[l(e(ye),{class:"h-8 w-8 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"})]),o("div",null,[o("div",Ht,p(r.category),1)])])],8,Wt)]),_:2},1024),l(e(v),null,{default:a(()=>[u(p(r.totalFiles),1)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",null,p(rl(r.created_at)),1)]),_:2},1024),l(e(v),{class:"text-right"},{default:a(()=>[l(e(_),{variant:"link",onClick:de=>Ke(r.encrypted_id,r.category),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(Ve))]),_:2},1032,["onClick"]),l(e(_),{variant:"destructive",onClick:de=>Ye(r.encrypted_id),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(Ce))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})):B("",!0)]),_:1}),o("div",Jt,[l(e(C),{modelValue:ee.value,"onUpdate:modelValue":t[27]||(t[27]=s=>ee.value=s),placeholder:"Search... (if no results, go to next page)",class:"w-full max-w-md text-sm"},null,8,["modelValue"]),l(e(_),{onClick:t[28]||(t[28]=s=>{var d;return Pe((d=e(b))==null?void 0:d.files.categoryName.encrypted_id)}),class:"cursor-pointer"},{default:a(()=>t[95]||(t[95]=[u(" + New ")])),_:1})]),l(e(xe),null,{default:a(()=>[l(e(_e),null,{default:a(()=>[l(e(R),null,{default:a(()=>[l(e(V),{class:"w-[50px]"},{default:a(()=>t[96]||(t[96]=[o("small",null,"#",-1)])),_:1}),l(e(V),{class:"w-[50px]"},{default:a(()=>t[97]||(t[97]=[o("small",null,"File",-1)])),_:1}),l(e(V),{class:"w-[300px]"},{default:a(()=>t[98]||(t[98]=[o("small",null,"Title",-1)])),_:1}),l(e(V),null,{default:a(()=>t[99]||(t[99]=[o("small",null,"Ordinance Number",-1)])),_:1}),l(e(V),null,{default:a(()=>t[100]||(t[100]=[o("small",null,"Author",-1)])),_:1}),l(e(V),null,{default:a(()=>t[101]||(t[101]=[o("small",null,"Mun. Status",-1)])),_:1}),l(e(V),null,{default:a(()=>t[102]||(t[102]=[o("small",null,"Prov. Status",-1)])),_:1}),l(e(V),{class:"text-right"},{default:a(()=>t[103]||(t[103]=[o("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),!e(fe)&&!e(ie)?(f(),k(e(be),{key:0},{default:a(()=>[e(ge)?(f(),k(e(R),{key:0},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[o("small",Xt,[l(e(Se),{class:"mr-2 w-5"}),t[104]||(t[104]=u(" Loading... "))])]),_:1})]),_:1})):ve.value.length===0?(f(),k(e(R),{key:1},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[o("small",Zt,[l(e(De),{class:"mr-2 w-5"}),t[105]||(t[105]=u(" No Data Found "))])]),_:1})]),_:1})):(f(!0),y(P,{key:2},A(ve.value,(s,d)=>(f(),k(e(R),{key:s.encrypted_id},{default:a(()=>[l(e(v),null,{default:a(()=>[o("small",null,p(d+1),1)]),_:2},1024),l(e(v),null,{default:a(()=>[o("a",{href:`/storage/files/${s.file}`,target:"_blank"},[l(e(xt),{class:"w-5 h-5 text-green-500"})],8,ht)]),_:2},1024),l(e(v),{class:"pr-5"},{default:a(()=>[o("a",{href:"#",onClick:r=>me("admin.view-file",{id:s.encrypted_id})},[o("div",tl,p(s.title),1)],8,el)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",ll,p(s.ordinanceNumber??"-"),1)]),_:2},1024),l(e(v),{class:"pr-5"},{default:a(()=>[o("div",al,[o("b",null,p(s.author.name),1)]),t[107]||(t[107]=o("div",null,[o("small",{class:"text-blue-500"},"Co Authors:")],-1)),(f(!0),y(P,null,A(s.coAuthors,r=>(f(),y("div",{key:r.official.name},[o("small",sl,p(r.official.name),1)]))),128)),s.coAuthors.length==0?(f(),y("div",ol,t[106]||(t[106]=[o("small",null,"None",-1)]))):B("",!0)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",{class:ce(s.municipalStatus==1?"text-wrap text-red-500":"text-wrap text-green-500")},p(s.municipalStatus==1?"Draft":"Approved"),3)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",{class:ce(s.provincialStatus==1?"text-wrap text-red-500":s.provincialStatus==2?"text-wrap text-green-500":"text-wrap text-gray-500")},p(s.provincialStatus==null?"-":s.provincialStatus==1?"Disapproved":"Approved"),3)]),_:2},1024),l(e(v),{class:"text-right"},{default:a(()=>[o("a",{href:"#",onClick:r=>me("admin.view-file",{id:s.encrypted_id})},[l(e(_),{variant:"link",class:"ml-0 cursor-pointer"},{default:a(()=>[l(e(St))]),_:1})],8,ul),l(e(_),{variant:"link",class:"ml-0 cursor-pointer",onClick:r=>qe(s.encrypted_id,s.categoryID,s.municipalStatus,s.provincialStatus,s.title,s.author.encrypted_id,Me(s.coAuthors),s.firstReadingDate,s.secondReadingDate,s.thirdReadingDate,s.ordinanceNumber,s.finalTitle,s.enactmentDate,s.lceapprovalDate,s.transmittalDate,s.spslapprovalDate,s.postStatus,s.publishStatus)},{default:a(()=>[l(e(Ve))]),_:2},1032,["onClick"]),l(e(_),{variant:"destructive",class:"ml-0 cursor-pointer",onClick:r=>ze(s.encrypted_id)},{default:a(()=>[l(e(Ce))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):B("",!0)]),_:1}),o("div",nl,[l(e(_),{disabled:U.value.currentPage<=1,onClick:$e,class:"cursor-pointer"},{default:a(()=>[l(e(_t))]),_:1},8,["disabled"]),o("small",null," Pages "+p(U.value.currentPage)+" of "+p(U.value.lastPage),1),l(e(_),{disabled:U.value.currentPage>=U.value.lastPage,onClick:Fe,class:"cursor-pointer"},{default:a(()=>[l(e(bt))]),_:1},8,["disabled"])])])]}),_:1})],64))}});export{wl as default};
