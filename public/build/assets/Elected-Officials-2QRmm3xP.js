import{d as ne,r as T,C as J,c as B,o as v,a as l,u as e,m as ue,w as t,b as o,e as i,f as W,g as L,F as h,h as fe,t as C,i as me}from"./app-BLASXCO6.js";import{_ as pe,K as _}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bkv1_C0t.js";import{_ as G,a as ce,b as H,c as R,d as X,e as Y,f as Z}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-BJa50CUp.js";import{_ as U,a as k,b as D,c as F,d as I,e as A,f}from"./SelectValue.vue_vue_type_script_setup_true_lang-CpQcx9F0.js";import{_ as ge,a as _e,b as z,c as V,d as ye,e as y,f as ve}from"./Skeleton.vue_vue_type_script_setup_true_lang-BDWwP4nv.js";import{_ as b}from"./index-CAXxJZ2B.js";import{_ as u,a as m}from"./Label.vue_vue_type_script_setup_true_lang-CzB3dMdK.js";import{u as xe,a as we}from"./Skeleton.vue_vue_type_script_setup_true_lang-CvHEk0s1.js";import{C as Ve}from"./circle-minus-DRw9kFtQ.js";import{P as be,T as Se}from"./trash-2-BXVL5QOV.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-chHT-hHQ.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BTalJwBX.js";import"./check-tUSYDPNH.js";const $e={class:"p-6 space-y-6"},qe={class:"flex w-full justify-between items-center"},Ce={class:"grid gap-4 py-4"},Ee={class:"grid grid-cols-4 items-center gap-4"},Oe={class:"grid grid-cols-4 items-center gap-4"},Pe={class:"grid grid-cols-4 items-center gap-4"},Me={class:"grid grid-cols-4 items-center gap-4"},Be={class:"grid grid-cols-4 items-center gap-4"},Ue={class:"grid grid-cols-4 items-center gap-4"},ke={class:"grid grid-cols-4 items-center gap-4"},De={class:"grid gap-4 py-4"},Fe={class:"grid grid-cols-4 items-center gap-4"},Ie={class:"grid grid-cols-4 items-center gap-4"},Ae={class:"grid grid-cols-4 items-center gap-4"},ze={class:"grid grid-cols-4 items-center gap-4"},Ne={class:"grid grid-cols-4 items-center gap-4"},je={class:"grid grid-cols-4 items-center gap-4"},Ke={class:"grid grid-cols-4 items-center gap-4"},Qe={class:"text-center text-red-500 flex items-center justify-center"},Te={class:"flex items-center space-x-3"},Je=["src"],We={class:"font-medium"},Le={class:"text-gray-500"},Ge={key:0,class:"text-green-500"},He={key:1,class:"text-red-500"},ee=async(N,{quality:S=.3,type:j="image/jpeg"})=>{const $=await createImageBitmap(N),q=document.createElement("canvas");q.width=$.width,q.height=$.height;const K=q.getContext("2d");if(!K)throw new Error("Could not get canvas context");K.drawImage($,0,0);const x=await new Promise(Q=>q.toBlob(Q,j,S));if(!x)throw new Error("Image compression failed: blob is null");return new File([x],N.name,{type:x.type})},ds=ne({__name:"Elected-Officials",setup(N){const S=xe(),j=[{title:"Elected Officials",href:"/admin/elected-officials"}],$=async()=>(await me.post("/graphql",{query:`
    query {
      officials {
        encrypted_id
        name
        address
        position
        status
        photo
        user {
           email
        }
      }
    }
  `})).data.data,{isPending:q,error:K,data:x,isFetching:Q}=we({queryKey:["fetchOfficials"],queryFn:$}),E=T(!1);function se(){E.value=!0}const n=J({name:"",address:"",position:"",status:"",email:"",password:"",picture:null}),le=()=>{n.post(route("create.official"),{onSuccess:()=>{_.success("Official created successfully"),n.reset(),E.value=!1,S.invalidateQueries({queryKey:["fetchOfficials"]})},onError:()=>{_.error("Email already exists"),console.error("Error")}})},O=T(!1);function te(p,s,a,w,d,c){r.id=p,r.name=s,r.address=a,r.position=w,r.status=d,r.email=c,O.value=!0}const r=J({id:"",name:"",address:"",position:"",status:"",email:"",password:"",picture:null}),ae=()=>{r.post(route("update.official"),{onSuccess:()=>{_.success("Official updated successfully"),r.reset(),O.value=!1,S.invalidateQueries({queryKey:["fetchOfficials"]})},onError:()=>{_.error("Email already exists"),console.error("Error")}})},P=T(!1);function ie(p){M.id=p,P.value=!0}const M=J({id:""}),oe=()=>{M.delete(route("delete.official"),{onSuccess:()=>{_.success("Official deleted successfully"),M.reset(),P.value=!1,S.invalidateQueries({queryKey:["fetchOfficials"]})},onError:()=>{_.error("Deletion Error"),console.error("Error")}})},re=async p=>{var c;const s=p.target,a=(c=s.files)==null?void 0:c[0];if(!a)return;const d=2*1024*1024;if(a.type.startsWith("image"))try{a.size>d&&(s.value="",_.error("File too large. Please select a smaller file."));const g=await ee(a,{quality:.3,type:a.type});n.picture=g}catch(g){console.error("Compression error:",g)}},de=async p=>{var c;const s=p.target,a=(c=s.files)==null?void 0:c[0];if(!a)return;const d=2*1024*1024;if(a.type.startsWith("image"))try{a.size>d&&(s.value="",_.error("File too large. Please select a smaller file."));const g=await ee(a,{quality:.3,type:a.type});r.picture=g}catch(g){console.error("Compression error:",g)}};return(p,s)=>(v(),B(h,null,[l(e(ue),{title:"Elected Officials"}),l(pe,{breadcrumbs:j},{default:t(()=>[o("div",$e,[o("div",qe,[s[53]||(s[53]=o("h6",{class:"flex-1 text-md font-bold"},"Elected Officials",-1)),l(e(G),{open:E.value,"onUpdate:open":s[6]||(s[6]=a=>E.value=a)},{default:t(()=>[l(e(ce),{"as-child":""},{default:t(()=>[l(e(b),{onClick:se,class:"cursor-pointer"},{default:t(()=>s[15]||(s[15]=[i(" + New ")])),_:1})]),_:1}),l(e(H),{class:"sm:max-w-[600px]"},{default:t(()=>[l(e(R),null,{default:t(()=>[l(e(X),null,{default:t(()=>s[16]||(s[16]=[i("Add Official")])),_:1}),l(e(Y),null,{default:t(()=>s[17]||(s[17]=[i(" Enter details for a new official ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:W(le,["prevent"])},[o("div",Ce,[o("div",Ee,[l(e(u),{class:"text-right"},{default:t(()=>s[18]||(s[18]=[i("Name")])),_:1}),l(e(m),{modelValue:e(n).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(n).name=a),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),o("div",Oe,[l(e(u),{class:"text-right"},{default:t(()=>s[19]||(s[19]=[i("Address")])),_:1}),l(e(m),{modelValue:e(n).address,"onUpdate:modelValue":s[1]||(s[1]=a=>e(n).address=a),placeholder:"Address",class:"col-span-3",required:""},null,8,["modelValue"])]),o("div",Pe,[l(e(u),{class:"text-right"},{default:t(()=>s[20]||(s[20]=[i("Position")])),_:1}),l(e(U),{modelValue:e(n).position,"onUpdate:modelValue":s[2]||(s[2]=a=>e(n).position=a),class:"col-span-3",required:""},{default:t(()=>[l(e(k),{class:"w-[180px]"},{default:t(()=>[l(e(D),{placeholder:"Select a position"})]),_:1}),l(e(F),null,{default:t(()=>[l(e(I),null,{default:t(()=>[l(e(A),null,{default:t(()=>s[21]||(s[21]=[i("Positions")])),_:1}),l(e(f),{value:"Mayor"},{default:t(()=>s[22]||(s[22]=[i(" Mayor ")])),_:1}),l(e(f),{value:"Vice Mayor"},{default:t(()=>s[23]||(s[23]=[i(" Vice Mayor ")])),_:1}),l(e(f),{value:"SB Member"},{default:t(()=>s[24]||(s[24]=[i(" SB Member ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Me,[l(e(u),{class:"text-right"},{default:t(()=>s[25]||(s[25]=[i("Status")])),_:1}),l(e(U),{modelValue:e(n).status,"onUpdate:modelValue":s[3]||(s[3]=a=>e(n).status=a),class:"col-span-3",required:""},{default:t(()=>[l(e(k),{class:"w-[180px]"},{default:t(()=>[l(e(D),{placeholder:"Select a status"})]),_:1}),l(e(F),null,{default:t(()=>[l(e(I),null,{default:t(()=>[l(e(A),null,{default:t(()=>s[26]||(s[26]=[i("Status")])),_:1}),l(e(f),{value:"1"},{default:t(()=>s[27]||(s[27]=[i(" Active ")])),_:1}),l(e(f),{value:"2"},{default:t(()=>s[28]||(s[28]=[i(" Inactive ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Be,[l(e(u),{class:"text-right"},{default:t(()=>s[29]||(s[29]=[i("Picture")])),_:1}),l(e(m),{type:"file",class:"col-span-3",onChange:re,accept:"image/*",required:""})]),o("div",Ue,[l(e(u),{class:"text-right"},{default:t(()=>s[30]||(s[30]=[i("Email")])),_:1}),l(e(m),{modelValue:e(n).email,"onUpdate:modelValue":s[4]||(s[4]=a=>e(n).email=a),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),o("div",ke,[l(e(u),{class:"text-start"},{default:t(()=>s[31]||(s[31]=[i("Password")])),_:1}),l(e(m),{modelValue:e(n).password,"onUpdate:modelValue":s[5]||(s[5]=a=>e(n).password=a),placeholder:"Password",type:"password",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(Z),null,{default:t(()=>[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(n).processing},{default:t(()=>s[32]||(s[32]=[i("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(G),{open:O.value,"onUpdate:open":s[13]||(s[13]=a=>O.value=a)},{default:t(()=>[l(e(H),{class:"sm:max-w-[600px]"},{default:t(()=>[l(e(R),null,{default:t(()=>[l(e(X),null,{default:t(()=>s[33]||(s[33]=[i("Edit Official")])),_:1}),l(e(Y),null,{default:t(()=>s[34]||(s[34]=[i(" Update the details of the official ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:W(ae,["prevent"])},[o("div",De,[o("div",Fe,[l(e(u),{class:"text-right"},{default:t(()=>s[35]||(s[35]=[i("Name")])),_:1}),l(e(m),{modelValue:e(r).name,"onUpdate:modelValue":s[7]||(s[7]=a=>e(r).name=a),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),o("div",Ie,[l(e(u),{class:"text-right"},{default:t(()=>s[36]||(s[36]=[i("Address")])),_:1}),l(e(m),{modelValue:e(r).address,"onUpdate:modelValue":s[8]||(s[8]=a=>e(r).address=a),placeholder:"Address",class:"col-span-3",required:""},null,8,["modelValue"])]),o("div",Ae,[l(e(u),{class:"text-right"},{default:t(()=>s[37]||(s[37]=[i("Position")])),_:1}),l(e(U),{modelValue:e(r).position,"onUpdate:modelValue":s[9]||(s[9]=a=>e(r).position=a),class:"col-span-3",required:""},{default:t(()=>[l(e(k),{class:"w-[180px]"},{default:t(()=>[l(e(D),{placeholder:"Select a position"})]),_:1}),l(e(F),null,{default:t(()=>[l(e(I),null,{default:t(()=>[l(e(A),null,{default:t(()=>s[38]||(s[38]=[i("Positions")])),_:1}),l(e(f),{value:"Mayor"},{default:t(()=>s[39]||(s[39]=[i(" Mayor ")])),_:1}),l(e(f),{value:"Vice Mayor"},{default:t(()=>s[40]||(s[40]=[i(" Vice Mayor ")])),_:1}),l(e(f),{value:"SB Member"},{default:t(()=>s[41]||(s[41]=[i(" SB Member ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",ze,[l(e(u),{class:"text-right"},{default:t(()=>s[42]||(s[42]=[i("Status")])),_:1}),l(e(U),{modelValue:e(r).status,"onUpdate:modelValue":s[10]||(s[10]=a=>e(r).status=a),class:"col-span-3",required:""},{default:t(()=>[l(e(k),{class:"w-[180px]"},{default:t(()=>[l(e(D),{placeholder:"Select a status"})]),_:1}),l(e(F),null,{default:t(()=>[l(e(I),null,{default:t(()=>[l(e(A),null,{default:t(()=>s[43]||(s[43]=[i("Status")])),_:1}),l(e(f),{value:"1"},{default:t(()=>s[44]||(s[44]=[i(" Active ")])),_:1}),l(e(f),{value:"2"},{default:t(()=>s[45]||(s[45]=[i(" Inactive ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Ne,[l(e(u),{class:"text-left"},{default:t(()=>s[46]||(s[46]=[i("Change Picture")])),_:1}),l(e(m),{type:"file",class:"col-span-3",onChange:de,accept:"image/*"})]),o("div",je,[l(e(u),{class:"text-right"},{default:t(()=>s[47]||(s[47]=[i("Email")])),_:1}),l(e(m),{modelValue:e(r).email,"onUpdate:modelValue":s[11]||(s[11]=a=>e(r).email=a),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),o("div",Ke,[l(e(u),{class:"text-start"},{default:t(()=>s[48]||(s[48]=[i("Change Password")])),_:1}),l(e(m),{modelValue:e(r).password,"onUpdate:modelValue":s[12]||(s[12]=a=>e(r).password=a),placeholder:"Password",type:"password",class:"col-span-3"},null,8,["modelValue"])])]),l(e(Z),null,{default:t(()=>[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(r).processing},{default:t(()=>s[49]||(s[49]=[i("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(G),{open:P.value,"onUpdate:open":s[14]||(s[14]=a=>P.value=a)},{default:t(()=>[l(e(H),{class:"sm:max-w-[600px]"},{default:t(()=>[l(e(R),null,{default:t(()=>[l(e(X),null,{default:t(()=>s[50]||(s[50]=[i("Delete Official")])),_:1}),l(e(Y),null,{default:t(()=>s[51]||(s[51]=[i(" Are you sure you want to delete this official? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:W(oe,["prevent"])},[l(e(Z),null,{default:t(()=>[l(e(b),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(M).processing},{default:t(()=>s[52]||(s[52]=[i("Delete")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),l(e(ge),null,{default:t(()=>[l(e(_e),null,{default:t(()=>[l(e(z),null,{default:t(()=>[l(e(V),{class:"w-[50px]"},{default:t(()=>s[54]||(s[54]=[o("small",null,"#",-1)])),_:1}),l(e(V),{class:"w-[300px]"},{default:t(()=>s[55]||(s[55]=[o("small",null,"Name",-1)])),_:1}),l(e(V),null,{default:t(()=>s[56]||(s[56]=[o("small",null,"Position",-1)])),_:1}),l(e(V),null,{default:t(()=>s[57]||(s[57]=[o("small",null,"Address",-1)])),_:1}),l(e(V),{class:"text-right"},{default:t(()=>s[58]||(s[58]=[o("small",null,"Status",-1)])),_:1}),l(e(V),{class:"text-right"},{default:t(()=>s[59]||(s[59]=[o("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),l(e(ye),null,{default:t(()=>{var a,w;return[e(Q)?(v(),L(e(z),{key:0},{default:t(()=>[l(e(y),{colspan:"10",class:"text-center"},{default:t(()=>[l(ve)]),_:1})]),_:1})):((a=e(x))==null?void 0:a.officials.length)==0?(v(),L(e(z),{key:1},{default:t(()=>[l(e(y),{colspan:"5"},{default:t(()=>[o("small",Qe,[l(e(Ve),{class:"mr-2 w-5"}),s[60]||(s[60]=i(" No Data Found "))])]),_:1})]),_:1})):(v(!0),B(h,{key:2},fe((w=e(x))==null?void 0:w.officials,(d,c)=>(v(),L(e(z),{key:d.id},{default:t(()=>[l(e(y),null,{default:t(()=>[o("small",null,C(c+1),1)]),_:2},1024),l(e(y),{class:"w-[300px] pr-20"},{default:t(()=>[o("div",Te,[o("img",{src:"/storage/profile/"+d.photo,alt:"Profile",class:"w-10 h-10 rounded-full object-cover"},null,8,Je),o("div",null,[o("div",We,C(d.name),1),o("small",Le,C(d.user.email),1)])])]),_:2},1024),l(e(y),null,{default:t(()=>[i(C(d.position),1)]),_:2},1024),l(e(y),null,{default:t(()=>[i(C(d.address),1)]),_:2},1024),l(e(y),{class:"text-right"},{default:t(()=>[d.status==1?(v(),B("span",Ge,"Active")):(v(),B("span",He,"Inactive"))]),_:2},1024),l(e(y),{class:"text-right"},{default:t(()=>[l(e(b),{variant:"link",onClick:g=>te(d.encrypted_id,d.name,d.address,d.position,d.status,d.user.email),class:"ml-2 cursor-pointer"},{default:t(()=>[l(e(be))]),_:2},1032,["onClick"]),l(e(b),{variant:"destructive",onClick:g=>ie(d.encrypted_id),class:"ml-2 cursor-pointer"},{default:t(()=>[l(e(Se))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1})])]),_:1})],64))}});export{ds as default};
