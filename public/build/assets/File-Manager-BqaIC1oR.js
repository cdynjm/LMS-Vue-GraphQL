import{d as h,r as F,C as k,c as j,o as g,a as s,u as e,m as ee,w as a,b as l,e as r,f as S,g as q,h as B,F as A,i as te,t as b,W as se,j as ae}from"./app-DHsF0IA1.js";import{F as le,_ as re,K as c}from"./AppLayout.vue_vue_type_script_setup_true_lang-DE7cgF8p.js";import{_ as E,a as oe,b as V,c as L,d as N,e as T,f as U}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-suuVuAvA.js";import{_ as ne,a as ie,b as $,c as _,d as ue,e as d}from"./TableHeader.vue_vue_type_script_setup_true_lang-BmD9G1Dp.js";import{_ as m}from"./index-6cUSjxrQ.js";import{_ as W,a as I}from"./Label.vue_vue_type_script_setup_true_lang-vnfdSghp.js";import{u as de,a as fe}from"./useQuery-Necv2RVO.js";import{L as ce}from"./loader-circle-ClXyFffX.js";import{C as me}from"./circle-minus-Dxbi3F9c.js";import{P as pe,T as ge}from"./trash-2-DK9zjJZy.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-BBl_mVvc.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BFOrUi-q.js";const _e={class:"p-6 space-y-6"},ye={class:"flex w-full justify-between items-center"},Ce={class:"grid gap-4 py-4"},ve={class:"grid grid-cols-4 items-center gap-4"},xe={class:"grid gap-4 py-4"},be={class:"grid grid-cols-4 items-center gap-4"},$e={class:"text-center text-green-500 flex items-center justify-center"},we={class:"text-center text-red-500 flex items-center justify-center"},De=["onClick"],Fe={class:"flex items-center space-x-3"},ke={class:"font-medium"};function Se(K){const f=new Date(K),w=f.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),D=f.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${w} | ${D}`}const We=h({__name:"File-Manager",setup(K){const f=de(),w=[{title:"File Manager",href:"/admin/file-manager"}],D=async()=>(await ae.post("/graphql",{query:`
    query {
      categories {
        categoriesList {
            encrypted_id
            category
            parentID
            created_at
            totalFiles
        }
      }
    }
  `})).data.data,{isPending:z,error:qe,data:M,isFetching:Ee}=fe({queryKey:["fetchCategories"],queryFn:D}),y=F(!1);function G(){y.value=!0}const p=k({category:""}),H=()=>{p.post(route("create.category"),{onSuccess:()=>{c.success("Category created successfully"),p.reset(),y.value=!1,f.invalidateQueries({queryKey:["fetchCategories"]})},onError:()=>{c.error("Error creating category"),console.error("Error")}})},C=F(!1);function J(u,t){i.id=u,i.category=t,C.value=!0}const i=k({id:"",category:""}),O=()=>{i.patch(route("update.category"),{onSuccess:()=>{c.success("Category updated successfully"),i.reset(),C.value=!1,f.invalidateQueries({queryKey:["fetchCategories"]})},onError:()=>{c.error("Error updating category"),console.error("Error")}})},v=F(!1);function R(u){x.id=u,v.value=!0}const x=k({id:""}),X=()=>{x.delete(route("delete.category"),{onSuccess:()=>{c.success("Category deleted successfully"),x.reset(),v.value=!1,f.invalidateQueries({queryKey:["fetchCategories"]})},onError:()=>{c.error("Deletion Error"),console.error("Error")}})};function Y(u,t={}){se.get(route(u,t))}return(u,t)=>(g(),j(A,null,[s(e(ee),{title:"File Manager"}),s(re,{breadcrumbs:w},{default:a(()=>[l("div",_e,[l("div",ye,[t[17]||(t[17]=l("h6",{class:"flex-1 text-md font-bold"},"Categories",-1)),s(e(E),{open:y.value,"onUpdate:open":t[1]||(t[1]=o=>y.value=o)},{default:a(()=>[s(e(oe),{"as-child":""},{default:a(()=>[s(e(m),{onClick:G,class:"cursor-pointer"},{default:a(()=>t[5]||(t[5]=[r(" + New ")])),_:1})]),_:1}),s(e(V),{class:"sm:max-w-[600px]"},{default:a(()=>[s(e(L),null,{default:a(()=>[s(e(N),null,{default:a(()=>t[6]||(t[6]=[r("Add Category")])),_:1}),s(e(T),null,{default:a(()=>t[7]||(t[7]=[r(" Create a new category for the files ")])),_:1})]),_:1}),l("form",{action:"",onSubmit:S(H,["prevent"])},[l("div",Ce,[l("div",ve,[s(e(W),{class:"text-right"},{default:a(()=>t[8]||(t[8]=[r("Category")])),_:1}),s(e(I),{modelValue:e(p).category,"onUpdate:modelValue":t[0]||(t[0]=o=>e(p).category=o),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),s(e(U),null,{default:a(()=>[s(e(m),{type:"submit",class:"cursor-pointer",disabled:e(p).processing},{default:a(()=>t[9]||(t[9]=[r("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),s(e(E),{open:C.value,"onUpdate:open":t[3]||(t[3]=o=>C.value=o)},{default:a(()=>[s(e(V),{class:"sm:max-w-[600px]"},{default:a(()=>[s(e(L),null,{default:a(()=>[s(e(N),null,{default:a(()=>t[10]||(t[10]=[r("Edit Category")])),_:1}),s(e(T),null,{default:a(()=>t[11]||(t[11]=[r(" Edit the details of the selected category ")])),_:1})]),_:1}),l("form",{action:"",onSubmit:S(O,["prevent"])},[l("div",xe,[l("div",be,[s(e(W),{class:"text-right"},{default:a(()=>t[12]||(t[12]=[r("Category")])),_:1}),s(e(I),{modelValue:e(i).category,"onUpdate:modelValue":t[2]||(t[2]=o=>e(i).category=o),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),s(e(U),null,{default:a(()=>[s(e(m),{type:"submit",class:"cursor-pointer",disabled:e(i).processing},{default:a(()=>t[13]||(t[13]=[r("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),s(e(E),{open:v.value,"onUpdate:open":t[4]||(t[4]=o=>v.value=o)},{default:a(()=>[s(e(V),{class:"sm:max-w-[600px]"},{default:a(()=>[s(e(L),null,{default:a(()=>[s(e(N),null,{default:a(()=>t[14]||(t[14]=[r("Delete Category")])),_:1}),s(e(T),null,{default:a(()=>t[15]||(t[15]=[r(" Are you sure you want to delete this category? This action cannot be undone. ")])),_:1})]),_:1}),l("form",{action:"",onSubmit:S(X,["prevent"])},[s(e(U),null,{default:a(()=>[s(e(m),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(x).processing},{default:a(()=>t[16]||(t[16]=[r("Delete")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),s(e(ne),null,{default:a(()=>[s(e(ie),null,{default:a(()=>[s(e($),null,{default:a(()=>[s(e(_),{class:"w-[50px]"},{default:a(()=>t[18]||(t[18]=[l("small",null,"#",-1)])),_:1}),s(e(_),{class:"w-[300px]"},{default:a(()=>t[19]||(t[19]=[l("small",null,"Category",-1)])),_:1}),s(e(_),null,{default:a(()=>t[20]||(t[20]=[l("small",null,"No. of Files",-1)])),_:1}),s(e(_),null,{default:a(()=>t[21]||(t[21]=[l("small",null,"Creation Date",-1)])),_:1}),s(e(_),{class:"text-right"},{default:a(()=>t[22]||(t[22]=[l("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),s(e(ue),null,{default:a(()=>{var o,P;return[e(z)?(g(),q(e($),{key:0},{default:a(()=>[s(e(d),{colspan:"10",class:"text-center"},{default:a(()=>[l("small",$e,[s(e(ce),{class:"mr-2 w-5"}),t[23]||(t[23]=r(" Loading... "))])]),_:1})]),_:1})):B("",!0),((o=e(M))==null?void 0:o.categories.categoriesList.length)==0?(g(),q(e($),{key:1},{default:a(()=>[s(e(d),{colspan:"5"},{default:a(()=>[l("small",we,[s(e(me),{class:"mr-2 w-5"}),t[24]||(t[24]=r(" No Data Found "))])]),_:1})]),_:1})):B("",!0),(g(!0),j(A,null,te((P=e(M))==null?void 0:P.categories.categoriesList,(n,Z)=>(g(),q(e($),{key:n.id},{default:a(()=>[s(e(d),null,{default:a(()=>[l("small",null,b(Z+1),1)]),_:2},1024),s(e(d),{class:"w-[300px] pr-20"},{default:a(()=>[l("a",{href:"#",onClick:Q=>Y("admin.files",{id:n.encrypted_id})},[l("div",Fe,[l("div",null,[s(e(le),{class:"h-8 w-8 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"})]),l("div",null,[l("div",ke,b(n.category),1)])])],8,De)]),_:2},1024),s(e(d),null,{default:a(()=>[r(b(n.totalFiles),1)]),_:2},1024),s(e(d),null,{default:a(()=>[l("small",null,b(Se(n.created_at)),1)]),_:2},1024),s(e(d),{class:"text-right"},{default:a(()=>[s(e(m),{variant:"link",onClick:Q=>J(n.encrypted_id,n.category),class:"ml-2 cursor-pointer"},{default:a(()=>[s(e(pe))]),_:2},1032,["onClick"]),s(e(m),{variant:"destructive",onClick:Q=>R(n.encrypted_id),class:"ml-2 cursor-pointer"},{default:a(()=>[s(e(ge))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1})])]),_:1})],64))}});export{We as default};
