import{d as we,k as st,v as ut,u as e,o as f,c as x,n as ce,l as ot,r as $,p as rt,q as nt,C as B,a as l,m as dt,w as a,b as u,h as L,e as o,t as p,f as O,g as y,F as P,i as A,P as me,j as it}from"./app-DyVB8uVv.js";import{F as ve,_ as ft,K as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-BMX_0Q05.js";import{_ as K,a as mt,b as Q,c as j,d as Y,e as G,f as h}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DX9rGOsx.js";import{_ as N,a as E,b as q,c as R,d as ee,e as te,f as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-xiuomwAS.js";import{_ as ye,a as xe,b as I,c as w,d as _e,e as v,f as be}from"./Skeleton.vue_vue_type_script_setup_true_lang-DHyk1leJ.js";import{a as pt,_ as b}from"./index-C937B89l.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-DxWFPNyO.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-C8f0Im2x.js";import{u as ct,a as gt,C as Se}from"./Skeleton.vue_vue_type_script_setup_true_lang-DsqJI58h.js";import{u as vt}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DzrdwzEy.js";import{L as H}from"./loader-circle-r136DvmI.js";import{P as De,T as Ve}from"./trash-2-DX8SPkGW.js";import{F as yt}from"./file-text-DBYmkvA-.js";import{E as xt}from"./eye-CzXyyRDz.js";import{A as _t,a as bt}from"./arrow-right-CfIHuNcs.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-D04IC9SS.js";import"./check-BsY_0Q46.js";const pe=we({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(J,{emit:M}){const k=J,F=vt(k,"modelValue",M,{passive:!0,defaultValue:k.defaultValue});return(ae,W)=>st((f(),x("textarea",{"onUpdate:modelValue":W[0]||(W[0]=U=>ot(F)?F.value=U:null),"data-slot":"textarea",class:ce(e(pt)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",k.class))},null,2)),[[ut,e(F)]])}}),St={class:"p-6 space-y-6"},Dt={class:"flex w-full justify-between items-center"},Vt={key:0},wt={class:"flex text-md font-bold items-center"},Ct={class:"grid gap-4 py-4"},kt={class:"grid grid-cols-4 items-center gap-4"},Ft={class:"grid gap-4 py-4"},$t={class:"grid grid-cols-4 items-center gap-4"},Pt={class:"flex flex-col space-y-1"},Ut={class:"flex flex-col space-y-1"},At={class:"flex flex-col space-y-1"},Nt={class:"flex flex-col space-y-1"},Et={class:"space-y-3"},qt=["onClick"],Rt={class:"flex flex-col space-y-1"},Tt={class:"md:col-span-2"},Lt={class:"md:col-span-2"},It={class:"md:col-span-2"},Mt={class:"md:col-span-2"},zt={class:"space-y-3"},Bt=["onClick"],Ot={class:"md:col-span-2"},Kt={class:"md:col-span-2 text-right"},Qt={class:"text-center text-red-500 flex items-center justify-center"},jt={class:"flex items-center space-x-3"},Yt={class:"font-medium"},Gt={class:"flex items-center justify-between space-x-4"},Ht={class:"text-red-500 flex items-center justify-center"},Jt=["href"],Wt={class:"text-wrap text-[13px]"},Xt={class:"text-nowrap"},Zt={class:"text-nowrap"},ht={class:"text-nowrap"},el={key:0},tl={class:"flex justify-between items-center mt-8"};function ll(J){const M=new Date(J),k=M.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),le=M.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${k} | ${le}`}const Sl=we({__name:"Files",props:{id:{}},setup(J){const M=J,k=ct(),le=[{title:"Files",href:"/admin/files/"+M.id}],F=$(1),ae=$(""),W=$([]),U=$({currentPage:1,lastPage:1,hasMorePages:!1}),Ce=async()=>(await it.post("/graphql",{query:`
    query ($id: String!, $page: Int!, $first: Int!) {
      files(id: $id, page: $page, first: $first) {
        categoryName {
          encrypted_id
          category
        }
        authors {
          encrypted_id
          name
        }
        filesListPaginated {
          data {
            encrypted_id
            municipalStatus
            provincialStatus
            title
            firstReadingDate
            secondReadingDate
            thirdReadingDate
            ordinanceNumber
            finalTitle
            enactmentDate
            lceapprovalDate
            transmittalDate
            spslapprovalDate
            postStatus
            publishStatus
            file
            author {
              encrypted_id
              name
            }
            coAuthors {
              official {
                encrypted_id
                name
              }
            }
          }
          paginatorInfo {
            currentPage
            lastPage
            total
            perPage
            hasMorePages
          }
        }
        subCategoriesList {
          encrypted_id
          category
          parentID
          created_at
          totalFiles
        }
      }
    }
  `,variables:{id:M.id,page:F.value,first:20}})).data.data,{data:S,isPending:al,isFetching:ie,isLoading:ke}=gt({queryKey:["fetchFiles",F],queryFn:Ce});rt(()=>{var i,t;(t=(i=S.value)==null?void 0:i.files)!=null&&t.filesListPaginated&&(W.value=S.value.files.filesListPaginated.data,U.value=S.value.files.filesListPaginated.paginatorInfo)});const ge=nt(()=>{const i=ae.value.toLowerCase();return W.value.filter(t=>{var g,s,n,d,D;return((g=t.title)==null?void 0:g.toLowerCase().includes(i))||((n=(s=t.ordinanceNumber)==null?void 0:s.toLowerCase())==null?void 0:n.includes(i))||((D=(d=t.author.name)==null?void 0:d.toLowerCase())==null?void 0:D.includes(i))})}),Fe=()=>{F.value<U.value.lastPage&&F.value++},$e=()=>{F.value>1&&F.value--},se=$(!1);function Pe(i){c.categoryID=i,se.value=!0}const c=B({categoryID:"",municipalStatus:"",title:"",author:"",coauthor:[],file:null}),Ue=()=>{c.post(route("create.file"),{onSuccess:()=>{V.success("File created and uploaded successfully"),c.reset(),se.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Error creating file"),console.error("Error")}})},Ae=async i=>{var d;const t=i.target,g=(d=t.files)==null?void 0:d[0];if(!g)return;const n=2*1024*1024;g.size>n&&(t.value="",V.error("File too large. Please select a smaller file.")),c.file=g,console.log("Selected file:",g)},Ne=()=>{c.coauthor.push("")},Ee=i=>{c.coauthor.splice(i,1)},ue=$(!1);function qe(i,t,g,s,n,d,D,fe,He,Je,We,Xe,Ze,he,et,tt,lt,at){r.id=i,r.categoryID=t,r.municipalStatus=g,r.provincialStatus=s,r.title=n,r.author=d,r.coauthor=D,r.firstReadingDate=fe,r.secondReadingDate=He,r.thirdReadingDate=Je,r.ordinanceNumber=We,r.finalTitle=Xe,r.enactmentDate=Ze,r.lceapprovalDate=he,r.transmittalDate=et,r.spslapprovalDate=tt,r.postStatus=lt,r.publishStatus=at,ue.value=!0}const r=B({id:"",categoryID:"",municipalStatus:"",provincialStatus:"",title:"",author:"",coauthor:[],firstReadingDate:"",secondReadingDate:"",thirdReadingDate:"",ordinanceNumber:"",finalTitle:"",enactmentDate:"",lceapprovalDate:"",transmittalDate:"",spslapprovalDate:"",postStatus:"",publishStatus:"",file:null}),Re=()=>{r.post(route("update.file"),{onSuccess:()=>{V.success("File updated successfully"),r.reset(),ue.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Error creating file"),console.error("Error")}})},Te=async i=>{var d;const t=i.target,g=(d=t.files)==null?void 0:d[0];if(!g)return;const n=2*1024*1024;g.size>n&&(t.value="",V.error("File too large. Please select a smaller file.")),c.file=g,console.log("Selected file:",g)},Le=()=>{r.coauthor.push("")},Ie=i=>{r.coauthor.splice(i,1)};function Me(i){return i.map(t=>t.official.encrypted_id)}const oe=$(!1);function ze(i){X.id=i,oe.value=!0}const X=B({id:""}),Be=()=>{X.delete(route("delete.file"),{onSuccess:()=>{V.success("File deleted successfully"),X.reset(),oe.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Deletion Error"),console.error("Error")}})},re=$(!1);function Oe(i){z.id=i,re.value=!0}const z=B({id:"",category:""}),Ke=()=>{z.post(route("create.subcategory"),{onSuccess:()=>{V.success("Subcategory created successfully"),z.reset(),re.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Error creating category"),console.error("Error")}})},ne=$(!1);function Qe(i,t){T.id=i,T.category=t,ne.value=!0}const T=B({id:"",category:""}),je=()=>{T.patch(route("update.subcategory"),{onSuccess:()=>{V.success("Subcategory updated successfully"),T.reset(),ne.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Error updating category"),console.error("Error")}})},de=$(!1);function Ye(i){Z.id=i,de.value=!0}const Z=B({id:""}),Ge=()=>{Z.delete(route("delete.subcategory"),{onSuccess:()=>{V.success("Subcategory deleted successfully"),Z.reset(),de.value=!1,k.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{V.error("Deletion Error"),console.error("Error")}})};return(i,t)=>(f(),x(P,null,[l(e(dt),{title:"Files"}),l(ft,{breadcrumbs:le},{default:a(()=>{var g;return[u("div",St,[u("div",Dt,[u("div",null,[!e(ke)&&!e(ie)?(f(),x("div",Vt,[u("h6",wt,[l(e(ve),{class:"h-8 w-8 mr-2 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"}),o(" "+p((g=e(S))==null?void 0:g.files.categoryName.category),1)])])):L("",!0)]),l(e(K),{open:re.value,"onUpdate:open":t[2]||(t[2]=s=>re.value=s)},{default:a(()=>[l(e(mt),{"as-child":""},{default:a(()=>[l(e(b),{onClick:t[0]||(t[0]=s=>{var n;return Oe((n=e(S))==null?void 0:n.files.categoryName.encrypted_id)}),class:"cursor-pointer"},{default:a(()=>t[29]||(t[29]=[o(" + New ")])),_:1})]),_:1}),l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[30]||(t[30]=[o("Add Category")])),_:1}),l(e(G),null,{default:a(()=>{var s;return[t[31]||(t[31]=o(" Create a sub-category for ")),u("b",null,p((s=e(S))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),u("form",{action:"",onSubmit:O(Ke,["prevent"])},[u("div",Ct,[u("div",kt,[l(e(m),{class:"text-right"},{default:a(()=>t[32]||(t[32]=[o("Category")])),_:1}),l(e(C),{modelValue:e(z).category,"onUpdate:modelValue":t[1]||(t[1]=s=>e(z).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(h),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(z).processing},{default:a(()=>[e(z).processing?(f(),y(e(H),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[33]||(t[33]=o(" Save"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(K),{open:ne.value,"onUpdate:open":t[4]||(t[4]=s=>ne.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[34]||(t[34]=[o("Edit Category")])),_:1}),l(e(G),null,{default:a(()=>t[35]||(t[35]=[o(" Edit the details of the selected category ")])),_:1})]),_:1}),u("form",{action:"",onSubmit:O(je,["prevent"])},[u("div",Ft,[u("div",$t,[l(e(m),{class:"text-right"},{default:a(()=>t[36]||(t[36]=[o("Category")])),_:1}),l(e(C),{modelValue:e(T).category,"onUpdate:modelValue":t[3]||(t[3]=s=>e(T).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(h),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(T).processing},{default:a(()=>[e(T).processing?(f(),y(e(H),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[37]||(t[37]=o(" Save"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(K),{open:de.value,"onUpdate:open":t[5]||(t[5]=s=>de.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[38]||(t[38]=[o("Delete Subcategory")])),_:1}),l(e(G),null,{default:a(()=>t[39]||(t[39]=[o(" Are you sure you want to delete this category? This action cannot be undone. ")])),_:1})]),_:1}),u("form",{action:"",onSubmit:O(Ge,["prevent"])},[l(e(h),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(Z).processing},{default:a(()=>[e(Z).processing?(f(),y(e(H),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[40]||(t[40]=o(" Delete"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(K),{open:se.value,"onUpdate:open":t[9]||(t[9]=s=>se.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[800px] w-full"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[41]||(t[41]=[o("Add New File")])),_:1}),l(e(G),null,{default:a(()=>{var s;return[t[42]||(t[42]=o(" Create a new file for ")),u("b",null,p((s=e(S))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),u("form",{onSubmit:O(Ue,["prevent"]),class:"space-y-6"},[u("div",Pt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[43]||(t[43]=[o("Municipal Status")])),_:1}),l(e(N),{modelValue:e(c).municipalStatus,"onUpdate:modelValue":t[6]||(t[6]=s=>e(c).municipalStatus=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(R),null,{default:a(()=>[l(e(ee),null,{default:a(()=>[l(e(te),null,{default:a(()=>t[44]||(t[44]=[o("Status")])),_:1}),l(e(_),{value:"1"},{default:a(()=>t[45]||(t[45]=[o("Draft Ordinance")])),_:1}),l(e(_),{value:"2"},{default:a(()=>t[46]||(t[46]=[o("Approved Ordinance")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),u("div",Ut,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[47]||(t[47]=[o("Title of Ordinance")])),_:1}),l(e(pe),{modelValue:e(c).title,"onUpdate:modelValue":t[7]||(t[7]=s=>e(c).title=s),class:"w-full",required:""},null,8,["modelValue"])]),u("div",At,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[48]||(t[48]=[o("Author")])),_:1}),l(e(N),{modelValue:e(c).author,"onUpdate:modelValue":t[8]||(t[8]=s=>e(c).author=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(R),null,{default:a(()=>{var s;return[l(e(te),null,{default:a(()=>t[49]||(t[49]=[o("Authors")])),_:1}),(f(!0),x(P,null,A((s=e(S))==null?void 0:s.files.authors,n=>(f(),y(e(ee),null,{default:a(()=>[l(e(_),{value:n.encrypted_id},{default:a(()=>[o(p(n.name),1)]),_:2},1032,["value"])]),_:2},1024))),256))]}),_:1})]),_:1},8,["modelValue"])]),u("div",Nt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[50]||(t[50]=[o("Co Authors")])),_:1}),u("div",Et,[(f(!0),x(P,null,A(e(c).coauthor,(s,n)=>(f(),x("div",{key:n,class:"flex items-center gap-2"},[l(e(N),{modelValue:e(c).coauthor[n],"onUpdate:modelValue":d=>e(c).coauthor[n]=d,required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(R),null,{default:a(()=>[l(e(te),null,{default:a(()=>t[51]||(t[51]=[o("Authors")])),_:1}),l(e(ee),null,{default:a(()=>{var d;return[(f(!0),x(P,null,A((d=e(S))==null?void 0:d.files.authors,D=>(f(),y(e(_),{key:D.encrypted_id,value:D.encrypted_id},{default:a(()=>[o(p(D.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),u("button",{type:"button",onClick:d=>Ee(n),class:"text-red-500 hover:text-red-700 text-sm cursor-pointer"}," ✕ ",8,qt)]))),128)),u("button",{type:"button",onClick:Ne,class:"text-blue-500 hover:text-blue-700 text-sm cursor-pointer"}," + Add ")])]),u("div",Rt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[52]||(t[52]=[o("Upload a File")])),_:1}),l(e(C),{type:"file",class:"col-span-3",onChange:Ae,accept:".pdf",required:""})]),l(e(h),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(c).processing},{default:a(()=>[e(c).processing?(f(),y(e(H),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[53]||(t[53]=o(" Save "))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(K),{open:ue.value,"onUpdate:open":t[25]||(t[25]=s=>ue.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[800px] w-full max-h-[90vh] overflow-y-auto"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[54]||(t[54]=[o("Edit File")])),_:1}),l(e(G),null,{default:a(()=>t[55]||(t[55]=[o("Edit the selected file's details below.")])),_:1})]),_:1}),u("form",{onSubmit:O(Re,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[56]||(t[56]=[o("Municipal Status")])),_:1}),l(e(N),{modelValue:e(r).municipalStatus,"onUpdate:modelValue":t[10]||(t[10]=s=>e(r).municipalStatus=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(R),null,{default:a(()=>[l(e(_),{value:"1"},{default:a(()=>t[57]||(t[57]=[o("Draft Ordinance")])),_:1}),l(e(_),{value:"2"},{default:a(()=>t[58]||(t[58]=[o("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[59]||(t[59]=[o("Provincial Status")])),_:1}),l(e(N),{modelValue:e(r).provincialStatus,"onUpdate:modelValue":t[11]||(t[11]=s=>e(r).provincialStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(R),null,{default:a(()=>[l(e(_),{value:"0"},{default:a(()=>t[60]||(t[60]=[o("No Status Yet")])),_:1}),l(e(_),{value:"1"},{default:a(()=>t[61]||(t[61]=[o("Disapproved Ordinance")])),_:1}),l(e(_),{value:"2"},{default:a(()=>t[62]||(t[62]=[o("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),u("div",Tt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[63]||(t[63]=[o("Title of Ordinance")])),_:1}),l(e(pe),{modelValue:e(r).title,"onUpdate:modelValue":t[12]||(t[12]=s=>e(r).title=s),class:"w-full",required:""},null,8,["modelValue"])]),u("div",Lt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[64]||(t[64]=[o("Ordinance Number")])),_:1}),l(e(C),{modelValue:e(r).ordinanceNumber,"onUpdate:modelValue":t[13]||(t[13]=s=>e(r).ordinanceNumber=s),type:"text",class:"w-full"},null,8,["modelValue"])]),u("div",It,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[65]||(t[65]=[o("Final Title")])),_:1}),l(e(pe),{modelValue:e(r).finalTitle,"onUpdate:modelValue":t[14]||(t[14]=s=>e(r).finalTitle=s),class:"w-full"},null,8,["modelValue"])]),u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[66]||(t[66]=[o("Author")])),_:1}),l(e(N),{modelValue:e(r).author,"onUpdate:modelValue":t[15]||(t[15]=s=>e(r).author=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(R),null,{default:a(()=>{var s;return[(f(!0),x(P,null,A((s=e(S))==null?void 0:s.files.authors,n=>(f(),y(e(_),{key:n.encrypted_id,value:n.encrypted_id},{default:a(()=>[o(p(n.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1},8,["modelValue"])]),u("div",Mt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[67]||(t[67]=[o("Co Authors")])),_:1}),u("div",zt,[(f(!0),x(P,null,A(e(r).coauthor,(s,n)=>(f(),x("div",{key:n,class:"flex items-center gap-2"},[l(e(N),{modelValue:e(r).coauthor[n],"onUpdate:modelValue":d=>e(r).coauthor[n]=d,required:"",class:"flex-1"},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a co-author"})]),_:1}),l(e(R),null,{default:a(()=>{var d;return[(f(!0),x(P,null,A((d=e(S))==null?void 0:d.files.authors,D=>(f(),y(e(_),{key:D.encrypted_id,value:D.encrypted_id},{default:a(()=>[o(p(D.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),u("button",{type:"button",onClick:d=>Ie(n),class:"text-red-500 cursor-pointer"},"✕",8,Bt)]))),128)),u("button",{type:"button",onClick:Le,class:"text-blue-500 text-sm cursor-pointer"}," + Add ")])]),u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[68]||(t[68]=[o("1st Reading Date")])),_:1}),l(e(C),{modelValue:e(r).firstReadingDate,"onUpdate:modelValue":t[16]||(t[16]=s=>e(r).firstReadingDate=s),type:"date"},null,8,["modelValue"])]),u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[69]||(t[69]=[o("2nd Reading Date")])),_:1}),l(e(C),{modelValue:e(r).secondReadingDate,"onUpdate:modelValue":t[17]||(t[17]=s=>e(r).secondReadingDate=s),type:"date"},null,8,["modelValue"])]),u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[70]||(t[70]=[o("3rd Reading Date")])),_:1}),l(e(C),{modelValue:e(r).thirdReadingDate,"onUpdate:modelValue":t[18]||(t[18]=s=>e(r).thirdReadingDate=s),type:"date"},null,8,["modelValue"])]),u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[71]||(t[71]=[o("Enactment Date")])),_:1}),l(e(C),{modelValue:e(r).enactmentDate,"onUpdate:modelValue":t[19]||(t[19]=s=>e(r).enactmentDate=s),type:"date"},null,8,["modelValue"])]),u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[72]||(t[72]=[o("LCE Approval Date")])),_:1}),l(e(C),{modelValue:e(r).lceapprovalDate,"onUpdate:modelValue":t[20]||(t[20]=s=>e(r).lceapprovalDate=s),type:"date"},null,8,["modelValue"])]),u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[73]||(t[73]=[o("Transmittal Date")])),_:1}),l(e(C),{modelValue:e(r).transmittalDate,"onUpdate:modelValue":t[21]||(t[21]=s=>e(r).transmittalDate=s),type:"date"},null,8,["modelValue"])]),u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[74]||(t[74]=[o("SPSL Approval Date")])),_:1}),l(e(C),{modelValue:e(r).spslapprovalDate,"onUpdate:modelValue":t[22]||(t[22]=s=>e(r).spslapprovalDate=s),type:"date"},null,8,["modelValue"])]),u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[75]||(t[75]=[o("Post Status")])),_:1}),l(e(N),{modelValue:e(r).postStatus,"onUpdate:modelValue":t[23]||(t[23]=s=>e(r).postStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(R),null,{default:a(()=>[l(e(ee),null,{default:a(()=>[l(e(te),null,{default:a(()=>t[76]||(t[76]=[o("Status")])),_:1}),l(e(_),{value:"0"},{default:a(()=>t[77]||(t[77]=[o("Not Yet")])),_:1}),l(e(_),{value:"1"},{default:a(()=>t[78]||(t[78]=[o("Posted")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),u("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[79]||(t[79]=[o("Publish Status")])),_:1}),l(e(N),{modelValue:e(r).publishStatus,"onUpdate:modelValue":t[24]||(t[24]=s=>e(r).publishStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(R),null,{default:a(()=>[l(e(ee),null,{default:a(()=>[l(e(te),null,{default:a(()=>t[80]||(t[80]=[o("Status")])),_:1}),l(e(_),{value:"0"},{default:a(()=>t[81]||(t[81]=[o("Not Yet")])),_:1}),l(e(_),{value:"1"},{default:a(()=>t[82]||(t[82]=[o("Published")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),u("div",Ot,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[83]||(t[83]=[o("Update File")])),_:1}),l(e(C),{type:"file",onChange:Te,accept:".pdf"})]),u("div",Kt,[l(e(b),{type:"submit",class:"cursor-pointer",disabled:e(r).processing},{default:a(()=>[e(r).processing?(f(),y(e(H),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[84]||(t[84]=o(" Save "))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"]),l(e(K),{open:oe.value,"onUpdate:open":t[26]||(t[26]=s=>oe.value=s)},{default:a(()=>[l(e(Q),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(j),null,{default:a(()=>[l(e(Y),null,{default:a(()=>t[85]||(t[85]=[o("Delete File")])),_:1}),l(e(G),null,{default:a(()=>t[86]||(t[86]=[o(" Are you sure you want to delete this file? This action cannot be undone. ")])),_:1})]),_:1}),u("form",{action:"",onSubmit:O(Be,["prevent"])},[l(e(h),null,{default:a(()=>[l(e(b),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(X).processing},{default:a(()=>[e(X).processing?(f(),y(e(H),{key:0,class:"h-4 w-4 animate-spin"})):L("",!0),t[87]||(t[87]=o(" Delete"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),l(e(ye),null,{default:a(()=>[l(e(xe),null,{default:a(()=>[l(e(I),null,{default:a(()=>[l(e(w),{class:"w-[50px]"},{default:a(()=>t[88]||(t[88]=[u("small",null,"#",-1)])),_:1}),l(e(w),{class:"w-[300px]"},{default:a(()=>t[89]||(t[89]=[u("small",null,"Category",-1)])),_:1}),l(e(w),null,{default:a(()=>t[90]||(t[90]=[u("small",null,"No. of Files",-1)])),_:1}),l(e(w),null,{default:a(()=>t[91]||(t[91]=[u("small",null,"Creation Date",-1)])),_:1}),l(e(w),{class:"text-right"},{default:a(()=>t[92]||(t[92]=[u("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),l(e(_e),null,{default:a(()=>{var s,n;return[e(ie)?(f(),y(e(I),{key:0},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[l(be)]),_:1})]),_:1})):((s=e(S))==null?void 0:s.files.subCategoriesList.length)==0?(f(),y(e(I),{key:1},{default:a(()=>[l(e(v),{colspan:"5"},{default:a(()=>[u("small",Qt,[l(e(Se),{class:"mr-2 w-5"}),t[93]||(t[93]=o(" No Data Found "))])]),_:1})]),_:1})):(f(!0),x(P,{key:2},A((n=e(S))==null?void 0:n.files.subCategoriesList,(d,D)=>(f(),y(e(I),{key:d.id},{default:a(()=>[l(e(v),null,{default:a(()=>[u("small",null,p(D+1),1)]),_:2},1024),l(e(v),{class:"w-[300px] pr-20"},{default:a(()=>[l(e(me),{href:i.route("admin.files",{id:d.encrypted_id}),prefetch:""},{default:a(()=>[u("div",jt,[u("div",null,[l(e(ve),{class:"h-8 w-8 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"})]),u("div",null,[u("div",Yt,p(d.category),1)])])]),_:2},1032,["href"])]),_:2},1024),l(e(v),null,{default:a(()=>[o(p(d.totalFiles),1)]),_:2},1024),l(e(v),null,{default:a(()=>[u("small",null,p(ll(d.created_at)),1)]),_:2},1024),l(e(v),{class:"text-right"},{default:a(()=>[l(e(b),{variant:"link",onClick:fe=>Qe(d.encrypted_id,d.category),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(De))]),_:2},1032,["onClick"]),l(e(b),{variant:"destructive",onClick:fe=>Ye(d.encrypted_id),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(Ve))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1}),u("div",Gt,[l(e(C),{modelValue:ae.value,"onUpdate:modelValue":t[27]||(t[27]=s=>ae.value=s),placeholder:"Search... (if no results, go to next page)",class:"w-full max-w-md text-sm"},null,8,["modelValue"]),l(e(b),{onClick:t[28]||(t[28]=s=>{var n;return Pe((n=e(S))==null?void 0:n.files.categoryName.encrypted_id)}),class:"cursor-pointer"},{default:a(()=>t[94]||(t[94]=[o(" + New ")])),_:1})]),l(e(ye),null,{default:a(()=>[l(e(xe),null,{default:a(()=>[l(e(I),null,{default:a(()=>[l(e(w),{class:"w-[50px]"},{default:a(()=>t[95]||(t[95]=[u("small",null,"#",-1)])),_:1}),l(e(w),{class:"w-[50px]"},{default:a(()=>t[96]||(t[96]=[u("small",null,"File",-1)])),_:1}),l(e(w),{class:"w-[300px]"},{default:a(()=>t[97]||(t[97]=[u("small",null,"Title",-1)])),_:1}),l(e(w),null,{default:a(()=>t[98]||(t[98]=[u("small",null,"Ordinance Number",-1)])),_:1}),l(e(w),null,{default:a(()=>t[99]||(t[99]=[u("small",null,"Author",-1)])),_:1}),l(e(w),null,{default:a(()=>t[100]||(t[100]=[u("small",null,"Mun. Status",-1)])),_:1}),l(e(w),null,{default:a(()=>t[101]||(t[101]=[u("small",null,"Prov. Status",-1)])),_:1}),l(e(w),{class:"text-right"},{default:a(()=>t[102]||(t[102]=[u("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),l(e(_e),null,{default:a(()=>[e(ie)?(f(),y(e(I),{key:0},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[l(be)]),_:1})]),_:1})):ge.value.length===0?(f(),y(e(I),{key:1},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[u("small",Ht,[l(e(Se),{class:"mr-2 w-5"}),t[103]||(t[103]=o(" No Data Found "))])]),_:1})]),_:1})):(f(!0),x(P,{key:2},A(ge.value,(s,n)=>(f(),y(e(I),{key:s.encrypted_id},{default:a(()=>[l(e(v),null,{default:a(()=>[u("small",null,p(n+1),1)]),_:2},1024),l(e(v),null,{default:a(()=>[u("a",{href:`/storage/files/${s.file}`,target:"_blank"},[l(e(yt),{class:"w-5 h-5 text-green-500"})],8,Jt)]),_:2},1024),l(e(v),{class:"pr-5"},{default:a(()=>[l(e(me),{href:i.route("admin.view-file",{id:s.encrypted_id}),prefetch:""},{default:a(()=>[u("div",Wt,p(s.title),1)]),_:2},1032,["href"])]),_:2},1024),l(e(v),null,{default:a(()=>[u("small",Xt,p(s.ordinanceNumber??"-"),1)]),_:2},1024),l(e(v),{class:"pr-5"},{default:a(()=>[u("div",Zt,[u("b",null,p(s.author.name),1)]),t[105]||(t[105]=u("div",null,[u("small",{class:"text-blue-500"},"Co Authors:")],-1)),(f(!0),x(P,null,A(s.coAuthors,d=>(f(),x("div",{key:d.official.name},[u("small",ht,p(d.official.name),1)]))),128)),s.coAuthors.length==0?(f(),x("div",el,t[104]||(t[104]=[u("small",null,"None",-1)]))):L("",!0)]),_:2},1024),l(e(v),null,{default:a(()=>[u("small",{class:ce(s.municipalStatus==1?"text-wrap text-red-500":"text-wrap text-green-500")},p(s.municipalStatus==1?"Draft":"Approved"),3)]),_:2},1024),l(e(v),null,{default:a(()=>[u("small",{class:ce(s.provincialStatus==1?"text-wrap text-red-500":s.provincialStatus==2?"text-wrap text-green-500":"text-wrap text-gray-500")},p(s.provincialStatus==null?"-":s.provincialStatus==1?"Disapproved":"Approved"),3)]),_:2},1024),l(e(v),{class:"text-right"},{default:a(()=>[l(e(me),{href:i.route("admin.view-file",{id:s.encrypted_id}),prefetch:""},{default:a(()=>[l(e(b),{variant:"link",class:"ml-0 cursor-pointer"},{default:a(()=>[l(e(xt))]),_:1})]),_:2},1032,["href"]),l(e(b),{variant:"link",class:"ml-0 cursor-pointer",onClick:d=>qe(s.encrypted_id,s.categoryID,s.municipalStatus,s.provincialStatus,s.title,s.author.encrypted_id,Me(s.coAuthors),s.firstReadingDate,s.secondReadingDate,s.thirdReadingDate,s.ordinanceNumber,s.finalTitle,s.enactmentDate,s.lceapprovalDate,s.transmittalDate,s.spslapprovalDate,s.postStatus,s.publishStatus)},{default:a(()=>[l(e(De))]),_:2},1032,["onClick"]),l(e(b),{variant:"destructive",class:"ml-0 cursor-pointer",onClick:d=>ze(s.encrypted_id)},{default:a(()=>[l(e(Ve))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),u("div",tl,[l(e(b),{disabled:U.value.currentPage<=1,onClick:$e,class:"cursor-pointer"},{default:a(()=>[l(e(_t))]),_:1},8,["disabled"]),u("small",null," Pages "+p(U.value.currentPage)+" of "+p(U.value.lastPage),1),l(e(b),{disabled:U.value.currentPage>=U.value.lastPage,onClick:Fe,class:"cursor-pointer"},{default:a(()=>[l(e(bt))]),_:1},8,["disabled"])])])]}),_:1})],64))}});export{Sl as default};
