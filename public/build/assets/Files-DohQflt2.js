import{d as Ve,j as at,v as st,u as e,o as f,c as y,n as me,k as ot,r as F,l as ut,p as nt,C as z,a as l,m as rt,w as a,b as o,q as ce,e as u,t as p,f as B,F as $,h as A,g as P,W as dt,i as it}from"./app-BLASXCO6.js";import{F as ge,_ as ft,K as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bkv1_C0t.js";import{_ as O,a as mt,b as K,c as Q,d as j,e as Y,f as H}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-BJa50CUp.js";import{_ as N,a as E,b as q,c as T,d as J,e as X,f as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-CpQcx9F0.js";import{_ as ve,a as ye,b as R,c as V,d as xe,e as v,f as _e}from"./Skeleton.vue_vue_type_script_setup_true_lang-BDWwP4nv.js";import{a as pt,_}from"./index-CAXxJZ2B.js";import{_ as m,a as C}from"./Label.vue_vue_type_script_setup_true_lang-CzB3dMdK.js";import{u as ct,a as gt}from"./Skeleton.vue_vue_type_script_setup_true_lang-CvHEk0s1.js";import{u as vt}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BTalJwBX.js";import{C as be}from"./circle-minus-DRw9kFtQ.js";import{P as Se,T as De}from"./trash-2-BXVL5QOV.js";import{F as yt,A as xt,a as _t}from"./file-text-eUHZXFo3.js";import{E as bt}from"./eye-BM4K57Zz.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-chHT-hHQ.js";import"./check-tUSYDPNH.js";const fe=Ve({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(W,{emit:I}){const w=W,k=vt(w,"modelValue",I,{passive:!0,defaultValue:w.defaultValue});return(h,G)=>at((f(),y("textarea",{"onUpdate:modelValue":G[0]||(G[0]=U=>ot(k)?k.value=U:null),"data-slot":"textarea",class:me(e(pt)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",w.class))},null,2)),[[st,e(k)]])}}),St={class:"p-6 space-y-6"},Dt={class:"flex w-full justify-between items-center"},Vt={key:0},Ct={class:"flex text-md font-bold items-center"},wt={class:"grid gap-4 py-4"},kt={class:"grid grid-cols-4 items-center gap-4"},Ft={class:"grid gap-4 py-4"},$t={class:"grid grid-cols-4 items-center gap-4"},Pt={class:"flex flex-col space-y-1"},Ut={class:"flex flex-col space-y-1"},At={class:"flex flex-col space-y-1"},Nt={class:"flex flex-col space-y-1"},Et={class:"space-y-3"},qt=["onClick"],Tt={class:"flex flex-col space-y-1"},Rt={class:"md:col-span-2"},It={class:"md:col-span-2"},Lt={class:"md:col-span-2"},Mt={class:"md:col-span-2"},zt={class:"space-y-3"},Bt=["onClick"],Ot={class:"md:col-span-2"},Kt={class:"md:col-span-2 text-right"},Qt={class:"text-center text-red-500 flex items-center justify-center"},jt=["onClick"],Yt={class:"flex items-center space-x-3"},Wt={class:"font-medium"},Gt={class:"flex items-center justify-between space-x-4"},Ht={class:"text-red-500 flex items-center justify-center"},Jt=["href"],Xt=["onClick"],Zt={class:"text-wrap text-[13px]"},ht={class:"text-nowrap"},el={class:"text-nowrap"},tl={class:"text-nowrap"},ll={key:0},al=["onClick"],sl={class:"flex justify-between items-center mt-8"};function ol(W){const I=new Date(W),w=I.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Z=I.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${w} | ${Z}`}const Dl=Ve({__name:"Files",props:{id:{}},setup(W){const I=W,w=ct(),Z=[{title:"Files",href:"/admin/files/"+I.id}],k=F(1),h=F(""),G=F([]),U=F({currentPage:1,lastPage:1,hasMorePages:!1}),Ce=async()=>(await it.post("/graphql",{query:`
    query ($id: String!, $page: Int!, $first: Int!) {
      files(id: $id, page: $page, first: $first) {
        categoryName {
          encrypted_id
          category
        }
        authors {
          encrypted_id
          name
        }
        filesListPaginated {
          data {
            encrypted_id
            municipalStatus
            provincialStatus
            title
            firstReadingDate
            secondReadingDate
            thirdReadingDate
            ordinanceNumber
            finalTitle
            enactmentDate
            lceapprovalDate
            transmittalDate
            spslapprovalDate
            postStatus
            publishStatus
            file
            author {
              encrypted_id
              name
            }
            coAuthors {
              official {
                encrypted_id
                name
              }
            }
          }
          paginatorInfo {
            currentPage
            lastPage
            total
            perPage
            hasMorePages
          }
        }
        subCategoriesList {
          encrypted_id
          category
          parentID
          created_at
          totalFiles
        }
      }
    }
  `,variables:{id:I.id,page:k.value,first:20}})).data.data,{data:b,isPending:ul,isFetching:de,isLoading:we}=gt({queryKey:["fetchFiles",k],queryFn:Ce});ut(()=>{var i,t;(t=(i=b.value)==null?void 0:i.files)!=null&&t.filesListPaginated&&(G.value=b.value.files.filesListPaginated.data,U.value=b.value.files.filesListPaginated.paginatorInfo)});const pe=nt(()=>{const i=h.value.toLowerCase();return G.value.filter(t=>{var g,s,d,r,S;return((g=t.title)==null?void 0:g.toLowerCase().includes(i))||((d=(s=t.ordinanceNumber)==null?void 0:s.toLowerCase())==null?void 0:d.includes(i))||((S=(r=t.author.name)==null?void 0:r.toLowerCase())==null?void 0:S.includes(i))})}),ke=()=>{k.value<U.value.lastPage&&k.value++},Fe=()=>{k.value>1&&k.value--},ee=F(!1);function $e(i){c.categoryID=i,ee.value=!0}const c=z({categoryID:"",municipalStatus:"",title:"",author:"",coauthor:[],file:null}),Pe=()=>{c.post(route("create.file"),{onSuccess:()=>{D.success("File created and uploaded successfully"),c.reset(),ee.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Error creating file"),console.error("Error")}})},Ue=async i=>{var r;const t=i.target,g=(r=t.files)==null?void 0:r[0];if(!g)return;const d=2*1024*1024;g.size>d&&(t.value="",D.error("File too large. Please select a smaller file.")),c.file=g,console.log("Selected file:",g)},Ae=()=>{c.coauthor.push("")},Ne=i=>{c.coauthor.splice(i,1)},te=F(!1);function Ee(i,t,g,s,d,r,S,re,We,Ge,He,Je,Xe,Ze,he,et,tt,lt){n.id=i,n.categoryID=t,n.municipalStatus=g,n.provincialStatus=s,n.title=d,n.author=r,n.coauthor=S,n.firstReadingDate=re,n.secondReadingDate=We,n.thirdReadingDate=Ge,n.ordinanceNumber=He,n.finalTitle=Je,n.enactmentDate=Xe,n.lceapprovalDate=Ze,n.transmittalDate=he,n.spslapprovalDate=et,n.postStatus=tt,n.publishStatus=lt,te.value=!0}const n=z({id:"",categoryID:"",municipalStatus:"",provincialStatus:"",title:"",author:"",coauthor:[],firstReadingDate:"",secondReadingDate:"",thirdReadingDate:"",ordinanceNumber:"",finalTitle:"",enactmentDate:"",lceapprovalDate:"",transmittalDate:"",spslapprovalDate:"",postStatus:"",publishStatus:"",file:null}),qe=()=>{n.post(route("update.file"),{onSuccess:()=>{D.success("File updated successfully"),n.reset(),te.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Error creating file"),console.error("Error")}})},Te=async i=>{var r;const t=i.target,g=(r=t.files)==null?void 0:r[0];if(!g)return;const d=2*1024*1024;g.size>d&&(t.value="",D.error("File too large. Please select a smaller file.")),c.file=g,console.log("Selected file:",g)},Re=()=>{n.coauthor.push("")},Ie=i=>{n.coauthor.splice(i,1)};function Le(i){return i.map(t=>t.official.encrypted_id)}const le=F(!1);function Me(i){ae.id=i,le.value=!0}const ae=z({id:""}),ze=()=>{ae.delete(route("delete.file"),{onSuccess:()=>{D.success("File deleted successfully"),ae.reset(),le.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Deletion Error"),console.error("Error")}})},se=F(!1);function Be(i){M.id=i,se.value=!0}const M=z({id:"",category:""}),Oe=()=>{M.post(route("create.subcategory"),{onSuccess:()=>{D.success("Subcategory created successfully"),M.reset(),se.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Error creating category"),console.error("Error")}})},oe=F(!1);function Ke(i,t){L.id=i,L.category=t,oe.value=!0}const L=z({id:"",category:""}),Qe=()=>{L.patch(route("update.subcategory"),{onSuccess:()=>{D.success("Subcategory updated successfully"),L.reset(),oe.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Error updating category"),console.error("Error")}})},ue=F(!1);function je(i){ne.id=i,ue.value=!0}const ne=z({id:""}),Ye=()=>{ne.delete(route("delete.subcategory"),{onSuccess:()=>{D.success("Subcategory deleted successfully"),ne.reset(),ue.value=!1,w.invalidateQueries({queryKey:["fetchFiles"]})},onError:()=>{D.error("Deletion Error"),console.error("Error")}})};function ie(i,t={}){dt.get(route(i,t))}return(i,t)=>(f(),y($,null,[l(e(rt),{title:"Files"}),l(ft,{breadcrumbs:Z},{default:a(()=>{var g;return[o("div",St,[o("div",Dt,[o("div",null,[!e(we)&&!e(de)?(f(),y("div",Vt,[o("h6",Ct,[l(e(ge),{class:"h-8 w-8 mr-2 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"}),u(" "+p((g=e(b))==null?void 0:g.files.categoryName.category),1)])])):ce("",!0)]),l(e(O),{open:se.value,"onUpdate:open":t[2]||(t[2]=s=>se.value=s)},{default:a(()=>[l(e(mt),{"as-child":""},{default:a(()=>[l(e(_),{onClick:t[0]||(t[0]=s=>{var d;return Be((d=e(b))==null?void 0:d.files.categoryName.encrypted_id)}),class:"cursor-pointer"},{default:a(()=>t[29]||(t[29]=[u(" + New ")])),_:1})]),_:1}),l(e(K),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[30]||(t[30]=[u("Add Category")])),_:1}),l(e(Y),null,{default:a(()=>{var s;return[t[31]||(t[31]=u(" Create a sub-category for ")),o("b",null,p((s=e(b))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),o("form",{action:"",onSubmit:B(Oe,["prevent"])},[o("div",wt,[o("div",kt,[l(e(m),{class:"text-right"},{default:a(()=>t[32]||(t[32]=[u("Category")])),_:1}),l(e(C),{modelValue:e(M).category,"onUpdate:modelValue":t[1]||(t[1]=s=>e(M).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(H),null,{default:a(()=>[l(e(_),{type:"submit",class:"cursor-pointer",disabled:e(M).processing},{default:a(()=>t[33]||(t[33]=[u("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(O),{open:oe.value,"onUpdate:open":t[4]||(t[4]=s=>oe.value=s)},{default:a(()=>[l(e(K),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[34]||(t[34]=[u("Edit Category")])),_:1}),l(e(Y),null,{default:a(()=>t[35]||(t[35]=[u(" Edit the details of the selected category ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:B(Qe,["prevent"])},[o("div",Ft,[o("div",$t,[l(e(m),{class:"text-right"},{default:a(()=>t[36]||(t[36]=[u("Category")])),_:1}),l(e(C),{modelValue:e(L).category,"onUpdate:modelValue":t[3]||(t[3]=s=>e(L).category=s),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(H),null,{default:a(()=>[l(e(_),{type:"submit",class:"cursor-pointer",disabled:e(L).processing},{default:a(()=>t[37]||(t[37]=[u("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(O),{open:ue.value,"onUpdate:open":t[5]||(t[5]=s=>ue.value=s)},{default:a(()=>[l(e(K),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[38]||(t[38]=[u("Delete Subcategory")])),_:1}),l(e(Y),null,{default:a(()=>t[39]||(t[39]=[u(" Are you sure you want to delete this category? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:B(Ye,["prevent"])},[l(e(H),null,{default:a(()=>[l(e(_),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(ne).processing},{default:a(()=>t[40]||(t[40]=[u("Delete")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(O),{open:ee.value,"onUpdate:open":t[9]||(t[9]=s=>ee.value=s)},{default:a(()=>[l(e(K),{class:"sm:max-w-[800px] w-full"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[41]||(t[41]=[u("Add New File")])),_:1}),l(e(Y),null,{default:a(()=>{var s;return[t[42]||(t[42]=u(" Create a new file for ")),o("b",null,p((s=e(b))==null?void 0:s.files.categoryName.category),1)]}),_:1})]),_:1}),o("form",{onSubmit:B(Pe,["prevent"]),class:"space-y-6"},[o("div",Pt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[43]||(t[43]=[u("Municipal Status")])),_:1}),l(e(N),{modelValue:e(c).municipalStatus,"onUpdate:modelValue":t[6]||(t[6]=s=>e(c).municipalStatus=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(J),null,{default:a(()=>[l(e(X),null,{default:a(()=>t[44]||(t[44]=[u("Status")])),_:1}),l(e(x),{value:"1"},{default:a(()=>t[45]||(t[45]=[u("Draft Ordinance")])),_:1}),l(e(x),{value:"2"},{default:a(()=>t[46]||(t[46]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Ut,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[47]||(t[47]=[u("Title of Ordinance")])),_:1}),l(e(fe),{modelValue:e(c).title,"onUpdate:modelValue":t[7]||(t[7]=s=>e(c).title=s),class:"w-full",required:""},null,8,["modelValue"])]),o("div",At,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[48]||(t[48]=[u("Author")])),_:1}),l(e(N),{modelValue:e(c).author,"onUpdate:modelValue":t[8]||(t[8]=s=>e(c).author=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(T),null,{default:a(()=>{var s;return[l(e(X),null,{default:a(()=>t[49]||(t[49]=[u("Authors")])),_:1}),(f(!0),y($,null,A((s=e(b))==null?void 0:s.files.authors,d=>(f(),P(e(J),null,{default:a(()=>[l(e(x),{value:d.encrypted_id},{default:a(()=>[u(p(d.name),1)]),_:2},1032,["value"])]),_:2},1024))),256))]}),_:1})]),_:1},8,["modelValue"])]),o("div",Nt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[50]||(t[50]=[u("Co Authors")])),_:1}),o("div",Et,[(f(!0),y($,null,A(e(c).coauthor,(s,d)=>(f(),y("div",{key:d,class:"flex items-center gap-2"},[l(e(N),{modelValue:e(c).coauthor[d],"onUpdate:modelValue":r=>e(c).coauthor[d]=r,required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(X),null,{default:a(()=>t[51]||(t[51]=[u("Authors")])),_:1}),l(e(J),null,{default:a(()=>{var r;return[(f(!0),y($,null,A((r=e(b))==null?void 0:r.files.authors,S=>(f(),P(e(x),{key:S.encrypted_id,value:S.encrypted_id},{default:a(()=>[u(p(S.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o("button",{type:"button",onClick:r=>Ne(d),class:"text-red-500 hover:text-red-700 text-sm cursor-pointer"}," ✕ ",8,qt)]))),128)),o("button",{type:"button",onClick:Ae,class:"text-blue-500 hover:text-blue-700 text-sm cursor-pointer"}," + Add ")])]),o("div",Tt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[52]||(t[52]=[u("Upload a File")])),_:1}),l(e(C),{type:"file",class:"col-span-3",onChange:Ue,accept:".pdf",required:""})]),l(e(H),null,{default:a(()=>[l(e(_),{type:"submit",class:"cursor-pointer",disabled:e(c).processing},{default:a(()=>t[53]||(t[53]=[u(" Save ")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(O),{open:te.value,"onUpdate:open":t[25]||(t[25]=s=>te.value=s)},{default:a(()=>[l(e(K),{class:"sm:max-w-[800px] w-full max-h-[90vh] overflow-y-auto"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[54]||(t[54]=[u("Edit File")])),_:1}),l(e(Y),null,{default:a(()=>t[55]||(t[55]=[u("Edit the selected file's details below.")])),_:1})]),_:1}),o("form",{onSubmit:B(qe,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[56]||(t[56]=[u("Municipal Status")])),_:1}),l(e(N),{modelValue:e(n).municipalStatus,"onUpdate:modelValue":t[10]||(t[10]=s=>e(n).municipalStatus=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(x),{value:"1"},{default:a(()=>t[57]||(t[57]=[u("Draft Ordinance")])),_:1}),l(e(x),{value:"2"},{default:a(()=>t[58]||(t[58]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[59]||(t[59]=[u("Provincial Status")])),_:1}),l(e(N),{modelValue:e(n).provincialStatus,"onUpdate:modelValue":t[11]||(t[11]=s=>e(n).provincialStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(x),{value:"0"},{default:a(()=>t[60]||(t[60]=[u("No Status Yet")])),_:1}),l(e(x),{value:"1"},{default:a(()=>t[61]||(t[61]=[u("Disapproved Ordinance")])),_:1}),l(e(x),{value:"2"},{default:a(()=>t[62]||(t[62]=[u("Approved Ordinance")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Rt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[63]||(t[63]=[u("Title of Ordinance")])),_:1}),l(e(fe),{modelValue:e(n).title,"onUpdate:modelValue":t[12]||(t[12]=s=>e(n).title=s),class:"w-full",required:""},null,8,["modelValue"])]),o("div",It,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[64]||(t[64]=[u("Ordinance Number")])),_:1}),l(e(C),{modelValue:e(n).ordinanceNumber,"onUpdate:modelValue":t[13]||(t[13]=s=>e(n).ordinanceNumber=s),type:"text",class:"w-full"},null,8,["modelValue"])]),o("div",Lt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[65]||(t[65]=[u("Final Title")])),_:1}),l(e(fe),{modelValue:e(n).finalTitle,"onUpdate:modelValue":t[14]||(t[14]=s=>e(n).finalTitle=s),class:"w-full"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[66]||(t[66]=[u("Author")])),_:1}),l(e(N),{modelValue:e(n).author,"onUpdate:modelValue":t[15]||(t[15]=s=>e(n).author=s),required:""},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select an author"})]),_:1}),l(e(T),null,{default:a(()=>{var s;return[(f(!0),y($,null,A((s=e(b))==null?void 0:s.files.authors,d=>(f(),P(e(x),{key:d.encrypted_id,value:d.encrypted_id},{default:a(()=>[u(p(d.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:1},8,["modelValue"])]),o("div",Mt,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[67]||(t[67]=[u("Co Authors")])),_:1}),o("div",zt,[(f(!0),y($,null,A(e(n).coauthor,(s,d)=>(f(),y("div",{key:d,class:"flex items-center gap-2"},[l(e(N),{modelValue:e(n).coauthor[d],"onUpdate:modelValue":r=>e(n).coauthor[d]=r,required:"",class:"flex-1"},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a co-author"})]),_:1}),l(e(T),null,{default:a(()=>{var r;return[(f(!0),y($,null,A((r=e(b))==null?void 0:r.files.authors,S=>(f(),P(e(x),{key:S.encrypted_id,value:S.encrypted_id},{default:a(()=>[u(p(S.name),1)]),_:2},1032,["value"]))),128))]}),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),o("button",{type:"button",onClick:r=>Ie(d),class:"text-red-500 cursor-pointer"},"✕",8,Bt)]))),128)),o("button",{type:"button",onClick:Re,class:"text-blue-500 text-sm cursor-pointer"}," + Add ")])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[68]||(t[68]=[u("1st Reading Date")])),_:1}),l(e(C),{modelValue:e(n).firstReadingDate,"onUpdate:modelValue":t[16]||(t[16]=s=>e(n).firstReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[69]||(t[69]=[u("2nd Reading Date")])),_:1}),l(e(C),{modelValue:e(n).secondReadingDate,"onUpdate:modelValue":t[17]||(t[17]=s=>e(n).secondReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[70]||(t[70]=[u("3rd Reading Date")])),_:1}),l(e(C),{modelValue:e(n).thirdReadingDate,"onUpdate:modelValue":t[18]||(t[18]=s=>e(n).thirdReadingDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[71]||(t[71]=[u("Enactment Date")])),_:1}),l(e(C),{modelValue:e(n).enactmentDate,"onUpdate:modelValue":t[19]||(t[19]=s=>e(n).enactmentDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[72]||(t[72]=[u("LCE Approval Date")])),_:1}),l(e(C),{modelValue:e(n).lceapprovalDate,"onUpdate:modelValue":t[20]||(t[20]=s=>e(n).lceapprovalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[73]||(t[73]=[u("Transmittal Date")])),_:1}),l(e(C),{modelValue:e(n).transmittalDate,"onUpdate:modelValue":t[21]||(t[21]=s=>e(n).transmittalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[74]||(t[74]=[u("SPSL Approval Date")])),_:1}),l(e(C),{modelValue:e(n).spslapprovalDate,"onUpdate:modelValue":t[22]||(t[22]=s=>e(n).spslapprovalDate=s),type:"date"},null,8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[75]||(t[75]=[u("Post Status")])),_:1}),l(e(N),{modelValue:e(n).postStatus,"onUpdate:modelValue":t[23]||(t[23]=s=>e(n).postStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(J),null,{default:a(()=>[l(e(X),null,{default:a(()=>t[76]||(t[76]=[u("Status")])),_:1}),l(e(x),{value:"0"},{default:a(()=>t[77]||(t[77]=[u("Not Yet")])),_:1}),l(e(x),{value:"1"},{default:a(()=>t[78]||(t[78]=[u("Posted")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",null,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[79]||(t[79]=[u("Publish Status")])),_:1}),l(e(N),{modelValue:e(n).publishStatus,"onUpdate:modelValue":t[24]||(t[24]=s=>e(n).publishStatus=s)},{default:a(()=>[l(e(E),{class:"w-full"},{default:a(()=>[l(e(q),{placeholder:"Select a status"})]),_:1}),l(e(T),null,{default:a(()=>[l(e(J),null,{default:a(()=>[l(e(X),null,{default:a(()=>t[80]||(t[80]=[u("Status")])),_:1}),l(e(x),{value:"0"},{default:a(()=>t[81]||(t[81]=[u("Not Yet")])),_:1}),l(e(x),{value:"1"},{default:a(()=>t[82]||(t[82]=[u("Published")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Ot,[l(e(m),{class:"text-sm font-medium text-gray-700"},{default:a(()=>t[83]||(t[83]=[u("Update File")])),_:1}),l(e(C),{type:"file",onChange:Te,accept:".pdf"})]),o("div",Kt,[l(e(_),{type:"submit",class:"cursor-pointer",disabled:e(n).processing},{default:a(()=>t[84]||(t[84]=[u(" Save Changes ")])),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"]),l(e(O),{open:le.value,"onUpdate:open":t[26]||(t[26]=s=>le.value=s)},{default:a(()=>[l(e(K),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(j),null,{default:a(()=>t[85]||(t[85]=[u("Delete File")])),_:1}),l(e(Y),null,{default:a(()=>t[86]||(t[86]=[u(" Are you sure you want to delete this file? This action cannot be undone. ")])),_:1})]),_:1}),o("form",{action:"",onSubmit:B(ze,["prevent"])},[l(e(H),null,{default:a(()=>[l(e(_),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(ae).processing},{default:a(()=>t[87]||(t[87]=[u("Delete")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),l(e(ve),null,{default:a(()=>[l(e(ye),null,{default:a(()=>[l(e(R),null,{default:a(()=>[l(e(V),{class:"w-[50px]"},{default:a(()=>t[88]||(t[88]=[o("small",null,"#",-1)])),_:1}),l(e(V),{class:"w-[300px]"},{default:a(()=>t[89]||(t[89]=[o("small",null,"Category",-1)])),_:1}),l(e(V),null,{default:a(()=>t[90]||(t[90]=[o("small",null,"No. of Files",-1)])),_:1}),l(e(V),null,{default:a(()=>t[91]||(t[91]=[o("small",null,"Creation Date",-1)])),_:1}),l(e(V),{class:"text-right"},{default:a(()=>t[92]||(t[92]=[o("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),l(e(xe),null,{default:a(()=>{var s,d;return[e(de)?(f(),P(e(R),{key:0},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[l(_e)]),_:1})]),_:1})):((s=e(b))==null?void 0:s.files.subCategoriesList.length)==0?(f(),P(e(R),{key:1},{default:a(()=>[l(e(v),{colspan:"5"},{default:a(()=>[o("small",Qt,[l(e(be),{class:"mr-2 w-5"}),t[93]||(t[93]=u(" No Data Found "))])]),_:1})]),_:1})):(f(!0),y($,{key:2},A((d=e(b))==null?void 0:d.files.subCategoriesList,(r,S)=>(f(),P(e(R),{key:r.id},{default:a(()=>[l(e(v),null,{default:a(()=>[o("small",null,p(S+1),1)]),_:2},1024),l(e(v),{class:"w-[300px] pr-20"},{default:a(()=>[o("a",{href:"#",onClick:re=>ie("admin.files",{id:r.encrypted_id})},[o("div",Yt,[o("div",null,[l(e(ge),{class:"h-8 w-8 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"})]),o("div",null,[o("div",Wt,p(r.category),1)])])],8,jt)]),_:2},1024),l(e(v),null,{default:a(()=>[u(p(r.totalFiles),1)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",null,p(ol(r.created_at)),1)]),_:2},1024),l(e(v),{class:"text-right"},{default:a(()=>[l(e(_),{variant:"link",onClick:re=>Ke(r.encrypted_id,r.category),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(Se))]),_:2},1032,["onClick"]),l(e(_),{variant:"destructive",onClick:re=>je(r.encrypted_id),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(De))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1}),o("div",Gt,[l(e(C),{modelValue:h.value,"onUpdate:modelValue":t[27]||(t[27]=s=>h.value=s),placeholder:"Search... (if no results, go to next page)",class:"w-full max-w-md text-sm"},null,8,["modelValue"]),l(e(_),{onClick:t[28]||(t[28]=s=>{var d;return $e((d=e(b))==null?void 0:d.files.categoryName.encrypted_id)}),class:"cursor-pointer"},{default:a(()=>t[94]||(t[94]=[u(" + New ")])),_:1})]),l(e(ve),null,{default:a(()=>[l(e(ye),null,{default:a(()=>[l(e(R),null,{default:a(()=>[l(e(V),{class:"w-[50px]"},{default:a(()=>t[95]||(t[95]=[o("small",null,"#",-1)])),_:1}),l(e(V),{class:"w-[50px]"},{default:a(()=>t[96]||(t[96]=[o("small",null,"File",-1)])),_:1}),l(e(V),{class:"w-[300px]"},{default:a(()=>t[97]||(t[97]=[o("small",null,"Title",-1)])),_:1}),l(e(V),null,{default:a(()=>t[98]||(t[98]=[o("small",null,"Ordinance Number",-1)])),_:1}),l(e(V),null,{default:a(()=>t[99]||(t[99]=[o("small",null,"Author",-1)])),_:1}),l(e(V),null,{default:a(()=>t[100]||(t[100]=[o("small",null,"Mun. Status",-1)])),_:1}),l(e(V),null,{default:a(()=>t[101]||(t[101]=[o("small",null,"Prov. Status",-1)])),_:1}),l(e(V),{class:"text-right"},{default:a(()=>t[102]||(t[102]=[o("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),l(e(xe),null,{default:a(()=>[e(de)?(f(),P(e(R),{key:0},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[l(_e)]),_:1})]),_:1})):pe.value.length===0?(f(),P(e(R),{key:1},{default:a(()=>[l(e(v),{colspan:"10",class:"text-center"},{default:a(()=>[o("small",Ht,[l(e(be),{class:"mr-2 w-5"}),t[103]||(t[103]=u(" No Data Found "))])]),_:1})]),_:1})):(f(!0),y($,{key:2},A(pe.value,(s,d)=>(f(),P(e(R),{key:s.encrypted_id},{default:a(()=>[l(e(v),null,{default:a(()=>[o("small",null,p(d+1),1)]),_:2},1024),l(e(v),null,{default:a(()=>[o("a",{href:`/storage/files/${s.file}`,target:"_blank"},[l(e(yt),{class:"w-5 h-5 text-green-500"})],8,Jt)]),_:2},1024),l(e(v),{class:"pr-5"},{default:a(()=>[o("a",{href:"#",onClick:r=>ie("admin.view-file",{id:s.encrypted_id})},[o("div",Zt,p(s.title),1)],8,Xt)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",ht,p(s.ordinanceNumber??"-"),1)]),_:2},1024),l(e(v),{class:"pr-5"},{default:a(()=>[o("div",el,[o("b",null,p(s.author.name),1)]),t[105]||(t[105]=o("div",null,[o("small",{class:"text-blue-500"},"Co Authors:")],-1)),(f(!0),y($,null,A(s.coAuthors,r=>(f(),y("div",{key:r.official.name},[o("small",tl,p(r.official.name),1)]))),128)),s.coAuthors.length==0?(f(),y("div",ll,t[104]||(t[104]=[o("small",null,"None",-1)]))):ce("",!0)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",{class:me(s.municipalStatus==1?"text-wrap text-red-500":"text-wrap text-green-500")},p(s.municipalStatus==1?"Draft":"Approved"),3)]),_:2},1024),l(e(v),null,{default:a(()=>[o("small",{class:me(s.provincialStatus==1?"text-wrap text-red-500":s.provincialStatus==2?"text-wrap text-green-500":"text-wrap text-gray-500")},p(s.provincialStatus==null?"-":s.provincialStatus==1?"Disapproved":"Approved"),3)]),_:2},1024),l(e(v),{class:"text-right"},{default:a(()=>[o("a",{href:"#",onClick:r=>ie("admin.view-file",{id:s.encrypted_id})},[l(e(_),{variant:"link",class:"ml-0 cursor-pointer"},{default:a(()=>[l(e(bt))]),_:1})],8,al),l(e(_),{variant:"link",class:"ml-0 cursor-pointer",onClick:r=>Ee(s.encrypted_id,s.categoryID,s.municipalStatus,s.provincialStatus,s.title,s.author.encrypted_id,Le(s.coAuthors),s.firstReadingDate,s.secondReadingDate,s.thirdReadingDate,s.ordinanceNumber,s.finalTitle,s.enactmentDate,s.lceapprovalDate,s.transmittalDate,s.spslapprovalDate,s.postStatus,s.publishStatus)},{default:a(()=>[l(e(Se))]),_:2},1032,["onClick"]),l(e(_),{variant:"destructive",class:"ml-0 cursor-pointer",onClick:r=>Me(s.encrypted_id)},{default:a(()=>[l(e(De))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),o("div",sl,[l(e(_),{disabled:U.value.currentPage<=1,onClick:Fe,class:"cursor-pointer"},{default:a(()=>[l(e(xt))]),_:1},8,["disabled"]),o("small",null," Pages "+p(U.value.currentPage)+" of "+p(U.value.lastPage),1),l(e(_),{disabled:U.value.currentPage>=U.value.lastPage,onClick:ke,class:"cursor-pointer"},{default:a(()=>[l(e(_t))]),_:1},8,["disabled"])])])]}),_:1})],64))}});export{Dl as default};
