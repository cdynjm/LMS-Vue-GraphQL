import{d as A,r as g,p as B,q as O,c as i,o as l,a as s,b as t,w as o,u as n,m as I,J as V,e as u,P as Q,h as U,F as x,i as w,g as W,t as r,n as $,j as z}from"./app-DDRyNQH8.js";import{_ as N}from"./index-DgDgMFAF.js";import{F as J,_ as K}from"./NavFooter.vue_vue_type_script_setup_true_lang-Cr5DyGY0.js";import{d as P,_,a as D,c as j,b as Y}from"./CardTitle.vue_vue_type_script_setup_true_lang-BTyHk7f2.js";import{_ as G,C as M,a as H}from"./SkeletonBox.vue_vue_type_script_setup_true_lang-ZaAeUA76.js";import{u as R,a as X,C as S}from"./Skeleton.vue_vue_type_script_setup_true_lang-DgslM6U9.js";import{_ as Z,F as ee}from"./SkeletonCard.vue_vue_type_script_setup_true_lang-CHo9IBvL.js";import{_ as te}from"./Pagination.vue_vue_type_script_setup_true_lang-CIhVBpOv.js";import{P as se}from"./pen-BmOKi2fk.js";const ae={class:"flex min-h-screen flex-col items-center bg-[#FDFDFC] p-6 text-[#1b1b18] dark:bg-[#0a0a0a] lg:justify-center lg:p-8"},ne={class:"not-has-[nav]:hidden mb-6 w-full lg:px-40"},oe={class:"flex items-center justify-between gap-4 w-full"},le={class:"flex items-center gap-4"},ie={class:"min-h-screen flex flex-col w-full"},re={class:"flex-1 w-full lg:px-20 lg:pt-10"},de={class:"mx-5"},ce={class:"flex justify-center items-center gap-2 md:mb-0"},ue={key:0,class:"grid grid-cols-1 gap-4"},pe={class:"grid grid-cols-1 xl:grid-cols-3 gap-4"},me={class:"flex items-center space-x-4 rounded-md border p-4"},fe=["src"],ge={class:"flex-1 space-y-1"},xe={class:"text-sm font-medium leading-none"},_e={class:"text-[13px] text-muted-foreground"},he={class:"text-[14px] font-bold text-gray-600"},ve={class:"text-[14px]"},be={class:"mb-4 grid grid-cols-[25px_minmax(0,1fr)] items-start pb-0 last:mb-0 last:pb-0"},ye={class:"space-y-1"},we={class:"text-sm font-medium leading-none"},Pe={class:"text-[12px] text-muted-foreground"},Se={class:"text-gray-500 text-[13px] flex items-center gap-2"},ke={key:0},Fe={key:1},Le={class:"text-gray-500 text-[13px] flex items-center gap-2"},Ce={key:0},$e={key:1},Ne={class:"text-gray-500"},De=["href"];function je(k){const d=new Date(k),h=d.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),m=d.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${h} | ${m}`}const We=A({__name:"Welcome",setup(k){R();const d=g(1),h=g(""),m=g([]),f=g({currentPage:1,lastPage:1,hasMorePages:!1}),q=async()=>(await z.post("/graphql",{query:`
    query ($page: Int, $first: Int!)  {
      welcome(page: $page, first: $first) {
        filesListPaginated {
          data {
            municipalStatus
            provincialStatus
            title
            ordinanceNumber
            finalTitle
            file
            updated_at
            author {
                name
                photo
                position
            }
            coAuthors {
                official {
                    name
                    position
                }
            }
            category {
                category
            }
          }
          paginatorInfo {
            currentPage
            lastPage
            total
            perPage
            hasMorePages
          }
        }
      }
    }
  `,variables:{page:d.value,first:10}})).data.data,{data:v,isPending:F,isFetching:Me,isLoading:qe}=X({queryKey:["guestFetchFiles",d],queryFn:q});B(()=>{var c,e;(e=(c=v.value)==null?void 0:c.welcome)!=null&&e.filesListPaginated&&(m.value=v.value.welcome.filesListPaginated.data,f.value=v.value.welcome.filesListPaginated.paginatorInfo)});const L=O(()=>{const c=h.value.toLowerCase();return m.value.filter(e=>{var a,b,p,y,C;return((a=e.title)==null?void 0:a.toLowerCase().includes(c))||((p=(b=e.ordinanceNumber)==null?void 0:b.toLowerCase())==null?void 0:p.includes(c))||((C=(y=e.author.name)==null?void 0:y.toLowerCase())==null?void 0:C.includes(c))})}),T=()=>{d.value<f.value.lastPage&&d.value++},E=()=>{d.value>1&&d.value--};return(c,e)=>(l(),i(x,null,[s(n(I),{title:"Welcome"},{default:o(()=>e[0]||(e[0]=[t("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1),t("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1)])),_:1}),t("div",ae,[t("header",ne,[t("nav",oe,[e[3]||(e[3]=V('<div class="flex items-center gap-3"><img draggable="false" src="/app-logo.jpg" alt="Logo" class="h-10 w-auto"><div class="flex flex-col leading-tight"><div class="hidden sm:flex flex-col"><span class="text-base font-semibold text-[#1b1b18] text-[14px] dark:text-white"> Legislative MS </span><span class="text-sm text-gray-500 text-[12px] dark:text-gray-400"> Legislative Management System </span></div><span class="block sm:hidden text-base font-semibold text-[#1b1b18] dark:text-white"> LMS </span></div></div>',1)),t("div",le,[s(n(Q),{href:c.route("login"),class:"inline-block rounded-sm border border-transparent px-5 py-1.5 text-sm leading-normal text-[#1b1b18] hover:border-[#19140035] dark:text-[#EDEDEC] dark:hover:border-[#3E3E3A]"},{default:o(()=>e[1]||(e[1]=[u(" Log in ")])),_:1},8,["href"]),s(N,{class:"inline-block rounded-sm"},{default:o(()=>e[2]||(e[2]=[u(" LMS ")])),_:1})])])]),t("div",ie,[t("main",re,[s(n(_),{class:"shadow-none mb-4 py-2"},{default:o(()=>[t("div",de,[s(n(P),{class:"text-center font-bold md:flex items-center gap-2 justify-center md:justify-between"},{default:o(()=>[t("div",ce,[s(n(J),{class:"mb-[2px] w-5 h-auto"}),e[4]||(e[4]=u(" List of Ordinances "))]),e[5]||(e[5]=t("div",{class:"md:flex hidden"}," Municpality of Bontoc ",-1))]),_:1})])]),_:1}),L.value.length==0&&!n(F)?(l(),i("div",ue,[s(n(_),{class:"shadow-none"},{default:o(()=>[s(n(P),{class:"text-red-500 flex items-center justify-center text-[12px] gap-2"},{default:o(()=>[s(n(S),{class:"w-5 h-auto"}),e[6]||(e[6]=u(" No Data Found "))]),_:1})]),_:1})])):U("",!0),t("div",pe,[n(F)?(l(),i(x,{key:0},w(3,a=>s(n(_),{class:"shadow-none"},{default:o(()=>[s(n(D),{class:"text-[14px]"},{default:o(()=>[s(Z)]),_:1}),s(n(j),{class:"grid gap-4"},{default:o(()=>[s(G)]),_:1})]),_:1})),64)):(l(!0),i(x,{key:1},w(L.value,(a,b)=>(l(),W(n(_),{class:"shadow-none flex flex-col h-full"},{default:o(()=>[s(n(D),{class:"text-[14px]"},{default:o(()=>[s(n(Y),null,{default:o(()=>e[7]||(e[7]=[u("Ordinance Number")])),_:1}),s(n(P),null,{default:o(()=>[u(r(a.ordinanceNumber!=null?a.ordinanceNumber:"-"),1)]),_:2},1024),t("div",me,[t("img",{draggable:"false",src:"/storage/profile/"+a.author.photo,class:"w-10 h-10 rounded-full object-cover"},null,8,fe),t("div",ge,[t("p",xe,r(a.author.name),1),t("p",_e,r(a.author.position),1)]),s(n(se),{class:"h-auto w-5"})])]),_:2},1024),s(n(j),{class:"grid gap-4"},{default:o(()=>[t("div",he,r(a.category.category),1),t("div",null,[t("p",ve,r(a.finalTitle==null?a.title:a.finalTitle),1)]),t("div",null,[e[9]||(e[9]=t("div",{class:"text-[14px] mb-4 font-bold text-blue-500"},"Co-Authors",-1)),(l(!0),i(x,null,w(a.coAuthors,(p,y)=>(l(),i("div",be,[e[8]||(e[8]=t("span",{class:"flex h-2 w-2 translate-y-1 rounded-full bg-sky-500"},null,-1)),t("div",ye,[t("p",we,r(p.official.name),1),t("p",Pe,r(p.official.position),1)])]))),256))]),t("div",Se,[a.municipalStatus==1?(l(),i("div",ke,[s(n(S),{class:"w-5 h-5 text-red-500"})])):(l(),i("div",Fe,[s(n(M),{class:"w-5 h-5 text-green-500"})])),e[10]||(e[10]=u(" Municipal Status: ")),t("span",{class:$(a.municipalStatus==1?"text-red-500":"text-green-500")},r(a.municipalStatus==1?"Draft Ordinance":"Approved Ordinance"),3)]),t("div",Le,[a.provincialStatus==null||a.provincialStatus==1?(l(),i("div",Ce,[s(n(S),{class:"w-5 h-5 text-red-500"})])):(l(),i("div",$e,[s(n(M),{class:"w-5 h-5 text-green-500"})])),e[11]||(e[11]=u(" Provincial Status: ")),t("span",{class:$([a.provincialStatus==1?"text-red-500":a.provincialStatus==2?"text-green-500":"text-gray-500"])},r(a.provincialStatus==1?"Disapproved":a.provincialStatus==2?"Approved Ordinance":"No Status Yet"),3)]),t("small",Ne,r(je(a.updated_at)),1)]),_:2},1024),s(n(H),{class:"mt-auto"},{default:o(()=>[s(N,{class:"w-full text-[12px] cursor-pointer"},{default:o(()=>[t("a",{href:"/storage/files/"+a.file,class:"flex items-center gap-2",target:"_blank"},[s(n(ee)),e[12]||(e[12]=u(" Open PDF File "))],8,De)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),s(te,{"current-page":f.value.currentPage,"last-page":f.value.lastPage,onNext:T,onPrevious:E},null,8,["current-page","last-page"])]),s(K)])])],64))}});export{We as default};
