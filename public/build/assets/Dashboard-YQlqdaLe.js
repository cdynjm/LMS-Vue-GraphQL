import{a as b,U as A,_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-K1ApVHlv.js";import{d as M,c as i,o as r,a as e,u as t,m as T,w as s,b as o,h as U,g as u,e as l,t as d,F as v,i as k,n as N,j as L}from"./app-BLU4ttrX.js";import{u as V,a as I,C}from"./Skeleton.vue_vue_type_script_setup_true_lang-CAliuopL.js";import{_ as p,a as _,b as g,c,d as S}from"./CardTitle.vue_vue_type_script_setup_true_lang-CRIUfPdE.js";import{_ as Q,C as q,a as z}from"./SkeletonBox.vue_vue_type_script_setup_true_lang-DLm4uaQt.js";import{_ as h,F as O}from"./SkeletonCard.vue_vue_type_script_setup_true_lang-DuSgOzP2.js";import{c as E,_ as H}from"./index-BD-X4HFx.js";import{F as P}from"./NavFooter.vue_vue_type_script_setup_true_lang-BcmdaPBr.js";import{P as K}from"./pen-DXZqiGYS.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BuV8ecZ_.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=E("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Y={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 p-4"},G={class:"text-2xl font-bold"},J={class:"text-2xl font-bold"},W={class:"text-2xl font-bold"},X={class:"text-2xl font-bold"},Z={class:"grid grid-cols-1 gap-4 p-4 py-0"},tt={class:"mx-5"},et={class:"flex justify-center items-center gap-2 md:mb-0"},st={key:0,class:"grid grid-cols-1 gap-4 p-4"},at={class:"grid grid-cols-1 xl:grid-cols-3 gap-4 p-4"},ot={class:"flex items-center space-x-4 rounded-md border p-4"},nt=["src"],rt={class:"flex-1 space-y-1"},dt={class:"text-sm font-medium leading-none"},lt={class:"text-[13px] text-muted-foreground"},it={class:"text-[14px] font-bold text-gray-600"},ct={class:"text-[14px]"},ut={class:"mb-4 grid grid-cols-[25px_minmax(0,1fr)] items-start pb-0 last:mb-0 last:pb-0"},ft={class:"space-y-1"},pt={class:"text-sm font-medium leading-none"},mt={class:"text-[12px] text-muted-foreground"},_t={class:"text-gray-500 text-[13px] flex items-center gap-2"},xt={key:0},gt={key:1},ht={class:"text-gray-500 text-[13px] flex items-center gap-2"},yt={key:0},bt={key:1},vt={class:"text-gray-500"},wt=["href"];function kt(D){const y=new Date(D),w=y.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),f=y.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${w} | ${f}`}const Ut=M({__name:"Dashboard",setup(D){const y=[{title:"Dashboard",href:"/admin/dashboard"}];V();const w=async()=>(await L.post("/graphql",{query:`
        query {
            dashboard {
                adminsCount
                officialsCount
                categoriesCount
                filesCount
                files {
                    municipalStatus
                    provincialStatus
                    title
                    ordinanceNumber
                    finalTitle
                    file
                    updated_at
                    author {
                        name
                        photo
                        position
                    }
                    coAuthors {
                        official {
                            name
                            position
                        }
                    }
                    category {
                        category
                    }
                }
            }
        }
    `})).data.data,{isPending:f,data:m,error:Ct,isFetching:St}=I({queryKey:["fetchDashboard"],queryFn:w});return(x,n)=>(r(),i(v,null,[e(t(T),{title:"Dashboard"}),e(B,{breadcrumbs:y},{default:s(()=>{var $,F;return[o("div",Y,[e(b,{href:x.route("admin.management"),prefetch:""},{default:s(()=>[e(t(p),{class:"pt-0 shadow-none"},{default:s(()=>[e(t(_),{class:"flex items-center justify-between bg-green-50 py-2"},{default:s(()=>[e(t(g),{class:"text-[13px]"},{default:s(()=>n[0]||(n[0]=[l("Admins")])),_:1}),e(t(R),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(f)?(r(),u(t(c),{key:0},{default:s(()=>[e(h)]),_:1})):(r(),u(t(c),{key:1},{default:s(()=>{var a;return[o("p",G,d((a=t(m))==null?void 0:a.dashboard.adminsCount),1)]}),_:1}))]),_:1})]),_:1},8,["href"]),e(b,{href:x.route("admin.file-manager"),prefetch:""},{default:s(()=>[e(t(p),{class:"pt-0 shadow-none"},{default:s(()=>[e(t(_),{class:"flex items-center justify-between bg-blue-50 py-2"},{default:s(()=>[e(t(g),{class:"text-[13px]"},{default:s(()=>n[1]||(n[1]=[l("Categories")])),_:1}),e(t(P),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(f)?(r(),u(t(c),{key:0},{default:s(()=>[e(h)]),_:1})):(r(),u(t(c),{key:1},{default:s(()=>{var a;return[o("p",J,d((a=t(m))==null?void 0:a.dashboard.categoriesCount),1)]}),_:1}))]),_:1})]),_:1},8,["href"]),e(b,{href:x.route("admin.file-manager"),prefetch:""},{default:s(()=>[e(t(p),{class:"pt-0 shadow-none"},{default:s(()=>[e(t(_),{class:"flex items-center justify-between bg-red-50 py-2"},{default:s(()=>[e(t(g),{class:"text-[13px]"},{default:s(()=>n[2]||(n[2]=[l("Files")])),_:1}),e(t(O),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(f)?(r(),u(t(c),{key:0},{default:s(()=>[e(h)]),_:1})):(r(),u(t(c),{key:1},{default:s(()=>{var a;return[o("p",W,d((a=t(m))==null?void 0:a.dashboard.filesCount),1)]}),_:1}))]),_:1})]),_:1},8,["href"]),e(b,{href:x.route("admin.elected-officials"),prefetch:""},{default:s(()=>[e(t(p),{class:"pt-0 shadow-none"},{default:s(()=>[e(t(_),{class:"flex items-center justify-between bg-orange-50 py-2"},{default:s(()=>[e(t(g),{class:"text-[13px]"},{default:s(()=>n[3]||(n[3]=[l("Officials")])),_:1}),e(t(A),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(f)?(r(),u(t(c),{key:0},{default:s(()=>[e(h)]),_:1})):(r(),u(t(c),{key:1},{default:s(()=>{var a;return[o("p",X,d((a=t(m))==null?void 0:a.dashboard.officialsCount),1)]}),_:1}))]),_:1})]),_:1},8,["href"])]),o("div",Z,[e(t(p),{class:"shadow-none py-2"},{default:s(()=>[o("div",tt,[e(t(S),{class:"text-center font-bold md:flex items-center gap-2 justify-center md:justify-between"},{default:s(()=>[o("div",et,[e(t(P),{class:"mb-[2px] w-5 h-auto"}),n[4]||(n[4]=l(" Recent Ordinances "))]),n[5]||(n[5]=o("div",{class:"md:flex hidden"}," Municpality of Bontoc ",-1))]),_:1})])]),_:1})]),(($=t(m))==null?void 0:$.dashboard.files.length)===0&&!t(f)?(r(),i("div",st,[e(t(p),{class:"shadow-none"},{default:s(()=>[e(t(S),{class:"text-red-500 flex items-center justify-center text-[12px] gap-2"},{default:s(()=>[e(t(C),{class:"w-5 h-auto"}),n[6]||(n[6]=l(" No Data Found "))]),_:1})]),_:1})])):U("",!0),o("div",at,[t(f)?(r(),i(v,{key:0},k(3,a=>e(t(p),{class:"shadow-none"},{default:s(()=>[e(t(_),{class:"text-[14px]"},{default:s(()=>[e(h)]),_:1}),e(t(c),{class:"grid gap-4"},{default:s(()=>[e(Q)]),_:1})]),_:1})),64)):(r(!0),i(v,{key:1},k((F=t(m))==null?void 0:F.dashboard.files,(a,Dt)=>(r(),u(t(p),{class:"shadow-none flex flex-col h-full"},{default:s(()=>[e(t(_),{class:"text-[14px]"},{default:s(()=>[e(t(g),null,{default:s(()=>n[7]||(n[7]=[l("Ordinance Number")])),_:1}),e(t(S),null,{default:s(()=>[l(d(a.ordinanceNumber!=null?a.ordinanceNumber:"-"),1)]),_:2},1024),o("div",ot,[o("img",{draggable:"false",src:"/storage/profile/"+a.author.photo,class:"w-10 h-10 rounded-full object-cover"},null,8,nt),o("div",rt,[o("p",dt,d(a.author.name),1),o("p",lt,d(a.author.position),1)]),e(t(K),{class:"h-auto w-5"})])]),_:2},1024),e(t(c),{class:"grid gap-4"},{default:s(()=>[o("div",it,d(a.category.category),1),o("div",null,[o("p",ct,d(a.finalTitle==null?a.title:a.finalTitle),1)]),o("div",null,[n[9]||(n[9]=o("div",{class:"text-[14px] mb-4 font-bold text-blue-500"},"Co-Authors",-1)),(r(!0),i(v,null,k(a.coAuthors,(j,$t)=>(r(),i("div",ut,[n[8]||(n[8]=o("span",{class:"flex h-2 w-2 translate-y-1 rounded-full bg-sky-500"},null,-1)),o("div",ft,[o("p",pt,d(j.official.name),1),o("p",mt,d(j.official.position),1)])]))),256))]),o("div",_t,[a.municipalStatus==1?(r(),i("div",xt,[e(t(C),{class:"w-5 h-5 text-red-500"})])):(r(),i("div",gt,[e(t(q),{class:"w-5 h-5 text-green-500"})])),n[10]||(n[10]=l(" Municipal Status: ")),o("span",{class:N(a.municipalStatus==1?"text-red-500":"text-green-500")},d(a.municipalStatus==1?"Draft Ordinance":"Approved Ordinance"),3)]),o("div",ht,[a.provincialStatus==null||a.provincialStatus==1?(r(),i("div",yt,[e(t(C),{class:"w-5 h-5 text-red-500"})])):(r(),i("div",bt,[e(t(q),{class:"w-5 h-5 text-green-500"})])),n[11]||(n[11]=l(" Provincial Status: ")),o("span",{class:N([a.provincialStatus==1?"text-red-500":a.provincialStatus==2?"text-green-500":"text-gray-500"])},d(a.provincialStatus==1?"Disapproved":a.provincialStatus==2?"Approved Ordinance":"No Status Yet"),3)]),o("small",vt,d(kt(a.updated_at)),1)]),_:2},1024),e(t(z),{class:"mt-auto"},{default:s(()=>[e(t(H),{class:"w-full text-[12px] cursor-pointer"},{default:s(()=>[o("a",{href:"/storage/files/"+a.file,class:"flex items-center gap-2",target:"_blank"},[e(t(O)),n[12]||(n[12]=l(" Open PDF File "))],8,wt)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))])]}),_:1})],64))}});export{Ut as default};
