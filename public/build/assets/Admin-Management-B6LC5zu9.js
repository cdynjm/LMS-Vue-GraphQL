import{d as X,r as q,C as E,c as Q,o as g,a as s,u as e,m as Y,w as t,b as n,e as o,f as k,g as C,F as j,h as Z,t as b,i as h}from"./app-BLASXCO6.js";import{_ as ee,K as m}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bkv1_C0t.js";import{_ as D,a as le,b as U,c as S,d as F,e as N,f as P}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-BJa50CUp.js";import{_ as se,a as te,b as V,c as y,d as ae,e as u,f as ne}from"./Skeleton.vue_vue_type_script_setup_true_lang-BDWwP4nv.js";import{_ as f}from"./index-CAXxJZ2B.js";import{_ as p,a as c}from"./Label.vue_vue_type_script_setup_true_lang-CzB3dMdK.js";import{u as oe,a as de}from"./Skeleton.vue_vue_type_script_setup_true_lang-CvHEk0s1.js";import{C as re}from"./circle-minus-DRw9kFtQ.js";import{P as ie,T as ue}from"./trash-2-BXVL5QOV.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-chHT-hHQ.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BTalJwBX.js";const me={class:"p-6 space-y-6"},fe={class:"flex w-full justify-between items-center"},pe={class:"grid gap-4 py-4"},ce={class:"grid grid-cols-4 items-center gap-4"},_e={class:"grid grid-cols-4 items-center gap-4"},ge={class:"grid grid-cols-4 items-center gap-4"},ye={class:"grid gap-4 py-4"},ve={class:"grid grid-cols-4 items-center gap-4"},xe={class:"grid grid-cols-4 items-center gap-4"},we={class:"grid grid-cols-4 items-center gap-4"},Ae={class:"text-center text-red-500 flex items-center justify-center"},Me=X({__name:"Admin-Management",setup(be){const $=oe(),B=[{title:"Admin Management",href:"/admin/admin-management"}],T=async()=>(await h.post("/graphql",{query:`
    query {
      admins {
        encrypted_id
        name
        email
        role
      }
    }
  `})).data.data,{isPending:Ve,error:$e,data:K,isFetching:J}=de({queryKey:["fetchAdmins"],queryFn:T}),v=q(!1);function L(){v.value=!0}const r=E({name:"",email:"",password:""}),R=()=>{r.post(route("create.admin"),{onSuccess:()=>{m.success("Admin account created successfully"),r.reset(),v.value=!1,$.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{m.error("Email already exists"),console.error("Error")}})},x=q(!1);function z(_,l,a){d.id=_,d.name=l,d.email=a,x.value=!0}const d=E({id:"",name:"",email:"",password:""}),G=()=>{d.patch(route("update.admin"),{onSuccess:()=>{m.success("Admin account updated successfully"),d.reset(),x.value=!1,$.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{m.error("Email already exists"),console.error("Error")}})},w=q(!1);function H(_){A.id=_,w.value=!0}const A=E({id:""}),I=()=>{A.delete(route("delete.admin"),{onSuccess:()=>{m.success("Admin account deleted successfully"),A.reset(),w.value=!1,$.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{m.error("Deletion Error"),console.error("Error")}})};return(_,l)=>(g(),Q(j,null,[s(e(Y),{title:"Admin Management"}),s(ee,{breadcrumbs:B},{default:t(()=>[n("div",me,[n("div",fe,[l[25]||(l[25]=n("h6",{class:"flex-1 text-md font-bold"},"Administrators",-1)),s(e(D),{open:v.value,"onUpdate:open":l[3]||(l[3]=a=>v.value=a)},{default:t(()=>[s(e(le),{"as-child":""},{default:t(()=>[s(e(f),{onClick:L,class:"cursor-pointer"},{default:t(()=>l[9]||(l[9]=[o(" + New ")])),_:1})]),_:1}),s(e(U),{class:"sm:max-w-[600px]"},{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(F),null,{default:t(()=>l[10]||(l[10]=[o("Add Admin")])),_:1}),s(e(N),null,{default:t(()=>l[11]||(l[11]=[o(" Enter details for a new admin ")])),_:1})]),_:1}),n("form",{action:"",onSubmit:k(R,["prevent"])},[n("div",pe,[n("div",ce,[s(e(p),{class:"text-right"},{default:t(()=>l[12]||(l[12]=[o("Name")])),_:1}),s(e(c),{modelValue:e(r).name,"onUpdate:modelValue":l[0]||(l[0]=a=>e(r).name=a),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",_e,[s(e(p),{class:"text-right"},{default:t(()=>l[13]||(l[13]=[o("Email")])),_:1}),s(e(c),{modelValue:e(r).email,"onUpdate:modelValue":l[1]||(l[1]=a=>e(r).email=a),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",ge,[s(e(p),{class:"text-start"},{default:t(()=>l[14]||(l[14]=[o("Password")])),_:1}),s(e(c),{modelValue:e(r).password,"onUpdate:modelValue":l[2]||(l[2]=a=>e(r).password=a),placeholder:"Password",type:"password",class:"col-span-3",required:""},null,8,["modelValue"])])]),s(e(P),null,{default:t(()=>[s(e(f),{type:"submit",class:"cursor-pointer",disabled:e(r).processing},{default:t(()=>l[15]||(l[15]=[o("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),s(e(D),{open:x.value,"onUpdate:open":l[7]||(l[7]=a=>x.value=a)},{default:t(()=>[s(e(U),{class:"sm:max-w-[600px]"},{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(F),null,{default:t(()=>l[16]||(l[16]=[o("Edit Admin")])),_:1}),s(e(N),null,{default:t(()=>l[17]||(l[17]=[o(" Update details for the admin ")])),_:1})]),_:1}),n("form",{action:"",onSubmit:k(G,["prevent"])},[n("div",ye,[n("div",ve,[s(e(p),{class:"text-right"},{default:t(()=>l[18]||(l[18]=[o("Name")])),_:1}),s(e(c),{modelValue:e(d).name,"onUpdate:modelValue":l[4]||(l[4]=a=>e(d).name=a),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",xe,[s(e(p),{class:"text-right"},{default:t(()=>l[19]||(l[19]=[o("Email")])),_:1}),s(e(c),{modelValue:e(d).email,"onUpdate:modelValue":l[5]||(l[5]=a=>e(d).email=a),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),n("div",we,[s(e(p),{class:"text-start"},{default:t(()=>l[20]||(l[20]=[o("Change Password")])),_:1}),s(e(c),{modelValue:e(d).password,"onUpdate:modelValue":l[6]||(l[6]=a=>e(d).password=a),placeholder:"Password",type:"password",class:"col-span-3"},null,8,["modelValue"])])]),s(e(P),null,{default:t(()=>[s(e(f),{type:"submit",class:"cursor-pointer",disabled:e(d).processing},{default:t(()=>l[21]||(l[21]=[o("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),s(e(D),{open:w.value,"onUpdate:open":l[8]||(l[8]=a=>w.value=a)},{default:t(()=>[s(e(U),{class:"sm:max-w-[600px]"},{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(F),null,{default:t(()=>l[22]||(l[22]=[o("Delete Admin")])),_:1}),s(e(N),null,{default:t(()=>l[23]||(l[23]=[o(" Are you sure you want to delete this admin? This action cannot be undone. ")])),_:1})]),_:1}),n("form",{action:"",onSubmit:k(I,["prevent"])},[s(e(P),null,{default:t(()=>[s(e(f),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(A).processing},{default:t(()=>l[24]||(l[24]=[o("Delete")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),s(e(se),null,{default:t(()=>[s(e(te),null,{default:t(()=>[s(e(V),null,{default:t(()=>[s(e(y),{class:"w-[50px]"},{default:t(()=>l[26]||(l[26]=[n("small",null,"#",-1)])),_:1}),s(e(y),null,{default:t(()=>l[27]||(l[27]=[n("small",null,"Name",-1)])),_:1}),s(e(y),null,{default:t(()=>l[28]||(l[28]=[n("small",null,"Email",-1)])),_:1}),s(e(y),null,{default:t(()=>l[29]||(l[29]=[n("small",null,"Role",-1)])),_:1}),s(e(y),{class:"text-right"},{default:t(()=>l[30]||(l[30]=[n("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),s(e(ae),null,{default:t(()=>{var a,M;return[e(J)?(g(),C(e(V),{key:0},{default:t(()=>[s(e(u),{colspan:"5",class:"text-center"},{default:t(()=>[s(ne)]),_:1})]),_:1})):((a=e(K))==null?void 0:a.admins.length)==0?(g(),C(e(V),{key:1},{default:t(()=>[s(e(u),{colspan:"10"},{default:t(()=>[n("small",Ae,[s(e(re),{class:"mr-2 w-5"}),l[31]||(l[31]=o(" No Data Found "))])]),_:1})]),_:1})):(g(!0),Q(j,{key:2},Z((M=e(K))==null?void 0:M.admins,(i,O)=>(g(),C(e(V),{key:i.encrypted_id},{default:t(()=>[s(e(u),null,{default:t(()=>[n("small",null,b(O+1),1)]),_:2},1024),s(e(u),null,{default:t(()=>[o(b(i.name),1)]),_:2},1024),s(e(u),null,{default:t(()=>[o(b(i.email),1)]),_:2},1024),s(e(u),null,{default:t(()=>[o(b(i.role==1?"Admin":""),1)]),_:2},1024),s(e(u),{class:"text-right"},{default:t(()=>[s(e(f),{variant:"link",class:"ml-2 cursor-pointer",onClick:W=>z(i.encrypted_id,i.name,i.email)},{default:t(()=>[s(e(ie))]),_:2},1032,["onClick"]),s(e(f),{variant:"destructive",onClick:W=>H(i.encrypted_id),class:"ml-2 cursor-pointer"},{default:t(()=>[s(e(ue))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1})])]),_:1})],64))}});export{Me as default};
