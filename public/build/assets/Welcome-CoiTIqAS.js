import{d as E,r as f,p as j,q as B,c as d,o as r,a,b as e,w as o,u as n,m as I,J as O,e as p,P as V,F as x,i as w,t as l,g as Q,n as S,j as U}from"./app-DyVB8uVv.js";import{_}from"./index-C937B89l.js";import{_ as W}from"./NavFooter.vue_vue_type_script_setup_true_lang-D04IC9SS.js";import{a as L,c as C,_ as F,b as z,d as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-17b9J2b-.js";import{_ as K,C as $,a as R}from"./SkeletonBox.vue_vue_type_script_setup_true_lang-DWuSttI3.js";import{u as Y,a as G,C as D}from"./Skeleton.vue_vue_type_script_setup_true_lang-DsqJI58h.js";import{_ as H,P as X,F as Z}from"./SkeletonCard.vue_vue_type_script_setup_true_lang-BhWMyBQg.js";import{A as ee,a as te}from"./arrow-right-CfIHuNcs.js";const se={class:"flex min-h-screen flex-col items-center bg-[#FDFDFC] p-6 text-[#1b1b18] dark:bg-[#0a0a0a] lg:justify-center lg:p-8"},ae={class:"not-has-[nav]:hidden mb-6 w-full lg:px-40"},ne={class:"flex items-center justify-between gap-4 w-full"},oe={class:"flex items-center gap-4"},le={class:"min-h-screen flex flex-col w-full"},re={class:"flex-1 w-full lg:px-20 lg:pt-10"},ie={class:"grid grid-cols-1 xl:grid-cols-3 gap-4"},ce={class:"flex items-center space-x-4 rounded-md border p-4"},de=["src"],ue={class:"flex-1 space-y-1"},pe={class:"text-sm font-medium leading-none"},me={class:"text-[13px] text-muted-foreground"},ge={class:"text-[14px] font-bold text-gray-600"},fe={class:"text-[14px]"},xe={class:"mb-4 grid grid-cols-[25px_minmax(0,1fr)] items-start pb-0 last:mb-0 last:pb-0"},_e={class:"space-y-1"},he={class:"text-sm font-medium leading-none"},ve={class:"text-[12px] text-muted-foreground"},be={class:"text-gray-500 text-[13px] flex items-center gap-2"},ye={key:0},we={key:1},Pe={class:"text-gray-500 text-[13px] flex items-center gap-2"},ke={key:0},Se={key:1},Le={class:"text-gray-500"},Ce=["href"],Fe={class:"flex justify-between items-center mt-8"};function $e(P){const i=new Date(P),h=i.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${h} | ${g}`}const Oe=E({__name:"Welcome",setup(P){Y();const i=f(1),h=f(""),g=f([]),u=f({currentPage:1,lastPage:1,hasMorePages:!1}),N=async()=>(await U.post("/graphql",{query:`
    query ($page: Int, $first: Int!)  {
      welcome(page: $page, first: $first) {
        filesListPaginated {
          data {
            municipalStatus
            provincialStatus
            title
            ordinanceNumber
            finalTitle
            file
            updated_at
            author {
                name
                photo
                position
            }
            coAuthors {
                official {
                    name
                    position
                }
            }
            category {
                category
            }
          }
          paginatorInfo {
            currentPage
            lastPage
            total
            perPage
            hasMorePages
          }
        }
      }
    }
  `,variables:{page:i.value,first:20}})).data.data,{data:v,isPending:De,isFetching:A,isLoading:Ne}=G({queryKey:["guestFetchFiles",i],queryFn:N});j(()=>{var c,t;(t=(c=v.value)==null?void 0:c.welcome)!=null&&t.filesListPaginated&&(g.value=v.value.welcome.filesListPaginated.data,u.value=v.value.welcome.filesListPaginated.paginatorInfo)});const q=B(()=>{const c=h.value.toLowerCase();return g.value.filter(t=>{var s,b,m,y,k;return((s=t.title)==null?void 0:s.toLowerCase().includes(c))||((m=(b=t.ordinanceNumber)==null?void 0:b.toLowerCase())==null?void 0:m.includes(c))||((k=(y=t.author.name)==null?void 0:y.toLowerCase())==null?void 0:k.includes(c))})}),M=()=>{i.value<u.value.lastPage&&i.value++},T=()=>{i.value>1&&i.value--};return(c,t)=>(r(),d(x,null,[a(n(I),{title:"Welcome"},{default:o(()=>t[0]||(t[0]=[e("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1),e("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1)])),_:1}),e("div",se,[e("header",ae,[e("nav",ne,[t[3]||(t[3]=O('<div class="flex items-center gap-3"><img src="/app-logo.jpg" alt="Logo" class="h-10 w-auto"><div class="flex flex-col leading-tight"><div class="hidden sm:flex flex-col"><span class="text-base font-semibold text-[#1b1b18] text-[14px] dark:text-white"> Legislative MS </span><span class="text-sm text-gray-500 text-[12px] dark:text-gray-400"> Legislative Management System </span></div><span class="block sm:hidden text-base font-semibold text-[#1b1b18] dark:text-white"> LMS </span></div></div>',1)),e("div",oe,[a(n(V),{href:c.route("login"),class:"inline-block rounded-sm border border-transparent px-5 py-1.5 text-sm leading-normal text-[#1b1b18] hover:border-[#19140035] dark:text-[#EDEDEC] dark:hover:border-[#3E3E3A]"},{default:o(()=>t[1]||(t[1]=[p(" Log in ")])),_:1},8,["href"]),a(_,{class:"inline-block rounded-sm"},{default:o(()=>t[2]||(t[2]=[p(" LMS ")])),_:1})])])]),e("div",le,[e("main",re,[e("div",ie,[n(A)?(r(),d(x,{key:0},w(3,s=>a(n(F),{class:"shadow-none"},{default:o(()=>[a(n(L),{class:"text-[14px]"},{default:o(()=>[a(H)]),_:1}),a(n(C),{class:"grid gap-4"},{default:o(()=>[a(K)]),_:1})]),_:1})),64)):(r(!0),d(x,{key:1},w(q.value,(s,b)=>(r(),Q(n(F),{class:"shadow-none flex flex-col h-full"},{default:o(()=>[a(n(L),{class:"text-[14px]"},{default:o(()=>[a(n(z),null,{default:o(()=>t[4]||(t[4]=[p("Ordinance Number")])),_:1}),a(n(J),null,{default:o(()=>[p(l(s.ordinanceNumber!=null?s.ordinanceNumber:"-"),1)]),_:2},1024),e("div",ce,[e("img",{src:"/storage/profile/"+s.author.photo,class:"w-10 h-10 rounded-full object-cover"},null,8,de),e("div",ue,[e("p",pe,l(s.author.name),1),e("p",me,l(s.author.position),1)]),a(n(X),{class:"h-auto w-5"})])]),_:2},1024),a(n(C),{class:"grid gap-4"},{default:o(()=>[e("div",ge,l(s.category.category),1),e("div",null,[e("p",fe,l(s.finalTitle==null?s.title:s.finalTitle),1)]),e("div",null,[t[6]||(t[6]=e("div",{class:"text-[14px] mb-4 font-bold text-blue-500"},"Co-Authors",-1)),(r(!0),d(x,null,w(s.coAuthors,(m,y)=>(r(),d("div",xe,[t[5]||(t[5]=e("span",{class:"flex h-2 w-2 translate-y-1 rounded-full bg-sky-500"},null,-1)),e("div",_e,[e("p",he,l(m.official.name),1),e("p",ve,l(m.official.position),1)])]))),256))]),e("div",be,[s.municipalStatus==1?(r(),d("div",ye,[a(n(D),{class:"w-5 h-5 text-red-500"})])):(r(),d("div",we,[a(n($),{class:"w-5 h-5 text-green-500"})])),t[7]||(t[7]=p(" Municipal Status: ")),e("span",{class:S(s.municipalStatus==1?"text-red-500":"text-green-500")},l(s.municipalStatus==1?"Draft Ordinance":"Approved Ordinance"),3)]),e("div",Pe,[s.provincialStatus==null||s.provincialStatus==1?(r(),d("div",ke,[a(n(D),{class:"w-5 h-5 text-red-500"})])):(r(),d("div",Se,[a(n($),{class:"w-5 h-5 text-green-500"})])),t[8]||(t[8]=p(" Provincial Status: ")),e("span",{class:S([s.provincialStatus==1?"text-red-500":s.provincialStatus==2?"text-green-500":"text-gray-500"])},l(s.provincialStatus==1?"Disapproved":s.provincialStatus==2?"Approved Ordinance":"No Status Yet"),3)]),e("small",Le,l($e(s.updated_at)),1)]),_:2},1024),a(n(R),{class:"mt-auto"},{default:o(()=>[a(_,{class:"w-full text-[12px] cursor-pointer"},{default:o(()=>[e("a",{href:"/storage/files/"+s.file,class:"flex items-center gap-2",target:"_blank"},[a(n(Z)),t[9]||(t[9]=p(" Open PDF File "))],8,Ce)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),e("div",Fe,[a(_,{disabled:u.value.currentPage<=1,onClick:T,class:"cursor-pointer"},{default:o(()=>[a(n(ee))]),_:1},8,["disabled"]),e("small",null," Pages "+l(u.value.currentPage)+" of "+l(u.value.lastPage),1),a(_,{disabled:u.value.currentPage>=u.value.lastPage,onClick:M,class:"cursor-pointer"},{default:o(()=>[a(n(te))]),_:1},8,["disabled"])])]),a(W)])])],64))}});export{Oe as default};
