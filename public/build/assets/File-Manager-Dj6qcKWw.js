import{d as Z,r as F,C as S,c as j,o as u,a as t,u as e,m as ee,w as a,b as l,e as r,f as q,g as p,h as E,F as A,i as te,t as $,P as se,j as ae}from"./app-GRqBZMjc.js";import{_ as le,K as g}from"./AppLayout.vue_vue_type_script_setup_true_lang-9TLh6anP.js";import{_ as V,a as re,b as N,c as L,d as P,e as U,f as K}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-Bhv6gbBm.js";import{_ as oe,a as ne,b as w,c as C,d as ie,e as d,f as ue}from"./Skeleton.vue_vue_type_script_setup_true_lang-D5cQhWyB.js";import{_}from"./index-vWOFmHOK.js";import{_ as h}from"./Input.vue_vue_type_script_setup_true_lang-74Cw-skh.js";import{_ as I}from"./Label.vue_vue_type_script_setup_true_lang-C_3EFTP-.js";import{u as de,a as fe,C as ce}from"./Skeleton.vue_vue_type_script_setup_true_lang-DzjwEdNu.js";import{L as T}from"./loader-circle-C3z9O4bL.js";import{F as me}from"./NavFooter.vue_vue_type_script_setup_true_lang-BAyLt7ny.js";import{P as pe,T as ge}from"./trash-2-BoX7hGXv.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CgS9jI4z.js";const _e={class:"p-4 space-y-6"},ye={class:"flex w-full justify-between items-center"},Ce={class:"grid gap-4 py-4"},ve={class:"grid grid-cols-4 items-center gap-4"},xe={class:"grid gap-4 py-4"},be={class:"grid grid-cols-4 items-center gap-4"},$e={class:"text-center text-red-500 flex items-center justify-center"},we={class:"flex items-center space-x-3"},ke={class:"font-medium"};function De(M){const f=new Date(M),k=f.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),D=f.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${k} | ${D}`}const je=Z({__name:"File-Manager",setup(M){const f=de(),k=[{title:"File Manager",href:"/admin/file-manager"}],D=async()=>(await ae.post("/graphql",{query:`
    query {
      categories {
        categoriesList {
            encrypted_id
            category
            parentID
            created_at
            totalFiles
        }
      }
    }
  `})).data.data,{isPending:z,error:Fe,data:Q,isFetching:Se}=fe({queryKey:["fetchCategories"],queryFn:D}),v=F(!1);function G(){v.value=!0}const c=S({category:""}),H=()=>{c.post(route("create.category"),{onSuccess:()=>{g.success("Category created successfully"),c.reset(),v.value=!1,f.invalidateQueries({queryKey:["fetchCategories"]})},onError:()=>{g.error("Error creating category"),console.error("Error")}})},x=F(!1);function J(m,s){n.id=m,n.category=s,x.value=!0}const n=S({id:"",category:""}),O=()=>{n.patch(route("update.category"),{onSuccess:()=>{g.success("Category updated successfully"),n.reset(),x.value=!1,f.invalidateQueries({queryKey:["fetchCategories"]})},onError:()=>{g.error("Error updating category"),console.error("Error")}})},b=F(!1);function R(m){y.id=m,b.value=!0}const y=S({id:""}),W=()=>{y.delete(route("delete.category"),{onSuccess:()=>{g.success("Category deleted successfully"),y.reset(),b.value=!1,f.invalidateQueries({queryKey:["fetchCategories"]})},onError:()=>{g.error("Deletion Error"),console.error("Error")}})};return(m,s)=>(u(),j(A,null,[t(e(ee),{title:"File Manager"}),t(le,{breadcrumbs:k},{default:a(()=>[l("div",_e,[l("div",ye,[s[17]||(s[17]=l("h6",{class:"flex-1 text-md font-bold"},"Categories",-1)),t(e(V),{open:v.value,"onUpdate:open":s[1]||(s[1]=o=>v.value=o)},{default:a(()=>[t(e(re),{"as-child":""},{default:a(()=>[t(e(_),{onClick:G,class:"cursor-pointer"},{default:a(()=>s[5]||(s[5]=[r(" + New ")])),_:1})]),_:1}),t(e(N),{class:"sm:max-w-[600px]"},{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(P),null,{default:a(()=>s[6]||(s[6]=[r("Add Category")])),_:1}),t(e(U),null,{default:a(()=>s[7]||(s[7]=[r(" Create a new category for the files ")])),_:1})]),_:1}),l("form",{action:"",onSubmit:q(H,["prevent"])},[l("div",Ce,[l("div",ve,[t(e(I),{class:"text-right"},{default:a(()=>s[8]||(s[8]=[r("Category")])),_:1}),t(e(h),{modelValue:e(c).category,"onUpdate:modelValue":s[0]||(s[0]=o=>e(c).category=o),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),t(e(K),null,{default:a(()=>[t(e(_),{type:"submit",class:"cursor-pointer",disabled:e(c).processing},{default:a(()=>[e(c).processing?(u(),p(e(T),{key:0,class:"h-4 w-4 animate-spin"})):E("",!0),s[9]||(s[9]=r(" Save"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),t(e(V),{open:x.value,"onUpdate:open":s[3]||(s[3]=o=>x.value=o)},{default:a(()=>[t(e(N),{class:"sm:max-w-[600px]"},{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(P),null,{default:a(()=>s[10]||(s[10]=[r("Edit Category")])),_:1}),t(e(U),null,{default:a(()=>s[11]||(s[11]=[r(" Edit the details of the selected category ")])),_:1})]),_:1}),l("form",{action:"",onSubmit:q(O,["prevent"])},[l("div",xe,[l("div",be,[t(e(I),{class:"text-right"},{default:a(()=>s[12]||(s[12]=[r("Category")])),_:1}),t(e(h),{modelValue:e(n).category,"onUpdate:modelValue":s[2]||(s[2]=o=>e(n).category=o),placeholder:"Category Name",class:"col-span-3",required:""},null,8,["modelValue"])])]),t(e(K),null,{default:a(()=>[t(e(_),{type:"submit",class:"cursor-pointer",disabled:e(n).processing},{default:a(()=>[e(n).processing?(u(),p(e(T),{key:0,class:"h-4 w-4 animate-spin"})):E("",!0),s[13]||(s[13]=r(" Save"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),t(e(V),{open:b.value,"onUpdate:open":s[4]||(s[4]=o=>b.value=o)},{default:a(()=>[t(e(N),{class:"sm:max-w-[600px]"},{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(P),null,{default:a(()=>s[14]||(s[14]=[r("Delete Category")])),_:1}),t(e(U),null,{default:a(()=>s[15]||(s[15]=[r(" Are you sure you want to delete this category? This action cannot be undone. ")])),_:1})]),_:1}),l("form",{action:"",onSubmit:q(W,["prevent"])},[t(e(K),null,{default:a(()=>[t(e(_),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(y).processing},{default:a(()=>[e(y).processing?(u(),p(e(T),{key:0,class:"h-4 w-4 animate-spin"})):E("",!0),s[16]||(s[16]=r(" Delete"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),t(e(oe),null,{default:a(()=>[t(e(ne),null,{default:a(()=>[t(e(w),null,{default:a(()=>[t(e(C),{class:"w-[50px]"},{default:a(()=>s[18]||(s[18]=[l("small",null,"#",-1)])),_:1}),t(e(C),{class:"w-[300px]"},{default:a(()=>s[19]||(s[19]=[l("small",null,"Category",-1)])),_:1}),t(e(C),null,{default:a(()=>s[20]||(s[20]=[l("small",null,"No. of Files",-1)])),_:1}),t(e(C),null,{default:a(()=>s[21]||(s[21]=[l("small",null,"Creation Date",-1)])),_:1}),t(e(C),{class:"text-right"},{default:a(()=>s[22]||(s[22]=[l("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),t(e(ie),null,{default:a(()=>{var o,B;return[e(z)?(u(),p(e(w),{key:0},{default:a(()=>[t(e(d),{colspan:"10",class:"text-center"},{default:a(()=>[t(ue)]),_:1})]),_:1})):((o=e(Q))==null?void 0:o.categories.categoriesList.length)===0?(u(),p(e(w),{key:1},{default:a(()=>[t(e(d),{colspan:"5"},{default:a(()=>[l("small",$e,[t(e(ce),{class:"mr-2 w-5"}),s[23]||(s[23]=r(" No Data Found "))])]),_:1})]),_:1})):(u(!0),j(A,{key:2},te((B=e(Q))==null?void 0:B.categories.categoriesList,(i,X)=>(u(),p(e(w),{key:i.id},{default:a(()=>[t(e(d),null,{default:a(()=>[l("small",null,$(X+1),1)]),_:2},1024),t(e(d),{class:"w-[300px] pr-20"},{default:a(()=>[t(e(se),{href:m.route("admin.files",{id:i.encrypted_id}),prefetch:""},{default:a(()=>[l("div",we,[l("div",null,[t(e(me),{class:"h-8 w-8 flex-shrink-0 rounded-full border p-1 text-blue-500",fill:"currentColor"})]),l("div",null,[l("div",ke,$(i.category),1)])])]),_:2},1032,["href"])]),_:2},1024),t(e(d),null,{default:a(()=>[r($(i.totalFiles),1)]),_:2},1024),t(e(d),null,{default:a(()=>[l("small",null,$(De(i.created_at)),1)]),_:2},1024),t(e(d),{class:"text-right"},{default:a(()=>[t(e(_),{variant:"link",onClick:Y=>J(i.encrypted_id,i.category),class:"ml-2 cursor-pointer"},{default:a(()=>[t(e(pe))]),_:2},1032,["onClick"]),t(e(_),{variant:"destructive",onClick:Y=>R(i.encrypted_id),class:"ml-2 cursor-pointer"},{default:a(()=>[t(e(ge))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1})])]),_:1})],64))}});export{je as default};
