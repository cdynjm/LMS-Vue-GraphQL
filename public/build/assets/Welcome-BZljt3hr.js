import{d as I,r as x,q as j,s as B,k as S,c as d,o as i,a as s,b as e,w as o,u as n,m as O,K as V,e as p,P as Q,F as h,i as P,t as l,g as K,n as C,j as U}from"./app-B1wYHys8.js";import{_ as v}from"./index-DZEPmnre.js";import{_ as W}from"./NavFooter.vue_vue_type_script_setup_true_lang-B80LdtZ9.js";import{a as L,c as F,_ as $,b as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-DPWQNsnv.js";import{_ as R}from"./CardDescription.vue_vue_type_script_setup_true_lang-CR51Os6a.js";import{_ as Y,C as D,a as G}from"./SkeletonBox.vue_vue_type_script_setup_true_lang-BRg0mGtC.js";import{u as H,a as J,C as N}from"./Skeleton.vue_vue_type_script_setup_true_lang-DFYDqr58.js";import{_ as X}from"./SkeletonCard.vue_vue_type_script_setup_true_lang-Dfwh4DRb.js";import{A as Z,a as ee}from"./arrow-right-BwXlo2LI.js";const te={class:"flex min-h-screen flex-col items-center bg-[#FDFDFC] p-6 text-[#1b1b18] dark:bg-[#0a0a0a] lg:justify-center lg:p-8"},se={class:"not-has-[nav]:hidden mb-6 w-full lg:px-40"},ae={class:"flex items-center justify-between gap-4 w-full"},ne={class:"flex items-center gap-4"},oe={class:"min-h-screen flex flex-col w-full"},le={class:"flex-1 w-full lg:px-20 lg:pt-10"},ie={class:"grid grid-cols-1 xl:grid-cols-3 gap-4"},re={class:"flex items-center space-x-4 rounded-md border p-4"},ce=["src"],de={class:"flex-1 space-y-1"},ue={class:"text-sm font-medium leading-none"},pe={class:"text-[13px] text-muted-foreground"},me={class:"text-[14px]"},fe={class:"mb-4 grid grid-cols-[25px_minmax(0,1fr)] items-start pb-0 last:mb-0 last:pb-0"},ge={class:"space-y-1"},_e={class:"text-sm font-medium leading-none"},xe={class:"text-[12px] text-muted-foreground"},he={class:"text-gray-500 text-[13px] flex items-center gap-2"},ve={key:0},be={key:1},ye={class:"text-gray-500 text-[13px] flex items-center gap-2"},we={key:0},Pe={key:1},ke={class:"text-gray-500"},Se=["href"],Ce={class:"flex justify-between items-center mt-8"};function Le(k){const r=new Date(k),b=r.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),f=r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${b} | ${f}`}const Oe=I({__name:"Welcome",setup(k){H();const r=x(1),b=x(""),f=x([]),u=x({currentPage:1,lastPage:1,hasMorePages:!1}),A=async()=>(await U.post("/graphql",{query:`
    query ($page: Int, $first: Int!)  {
      welcome(page: $page, first: $first) {
        filesListPaginated {
          data {
            municipalStatus
            provincialStatus
            title
            ordinanceNumber
            finalTitle
            file
            updated_at
            author {
                name
                photo
                position
            }
            coAuthors {
                official {
                    name
                    position
                }
            }
          }
          paginatorInfo {
            currentPage
            lastPage
            total
            perPage
            hasMorePages
          }
        }
      }
    }
  `,variables:{page:r.value,first:20}})).data.data,{data:y,isPending:Fe,isFetching:q,isLoading:$e}=J({queryKey:["guestFetchFiles",r],queryFn:A});j(()=>{var c,t;(t=(c=y.value)==null?void 0:c.welcome)!=null&&t.filesListPaginated&&(f.value=y.value.welcome.filesListPaginated.data,u.value=y.value.welcome.filesListPaginated.paginatorInfo)});const M=B(()=>{const c=b.value.toLowerCase();return f.value.filter(t=>{var g,_,a,w,m;return((g=t.title)==null?void 0:g.toLowerCase().includes(c))||((a=(_=t.ordinanceNumber)==null?void 0:_.toLowerCase())==null?void 0:a.includes(c))||((m=(w=t.author.name)==null?void 0:w.toLowerCase())==null?void 0:m.includes(c))})}),T=()=>{r.value<u.value.lastPage&&r.value++},E=()=>{r.value>1&&r.value--};return(c,t)=>{const g=S("PenIcon"),_=S("File");return i(),d(h,null,[s(n(O),{title:"Welcome"},{default:o(()=>t[0]||(t[0]=[e("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1),e("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1)])),_:1}),e("div",te,[e("header",se,[e("nav",ae,[t[3]||(t[3]=V('<div class="flex items-center gap-3"><img src="/app-logo.jpg" alt="Logo" class="h-10 w-auto"><div class="flex flex-col leading-tight"><div class="hidden sm:flex flex-col"><span class="text-base font-semibold text-[#1b1b18] text-[14px] dark:text-white"> Legislative MS </span><span class="text-sm text-gray-500 text-[12px] dark:text-gray-400"> Legislative Management System </span></div><span class="block sm:hidden text-base font-semibold text-[#1b1b18] dark:text-white"> LMS </span></div></div>',1)),e("div",ne,[s(n(Q),{href:c.route("login"),class:"inline-block rounded-sm border border-transparent px-5 py-1.5 text-sm leading-normal text-[#1b1b18] hover:border-[#19140035] dark:text-[#EDEDEC] dark:hover:border-[#3E3E3A]"},{default:o(()=>t[1]||(t[1]=[p(" Log in ")])),_:1},8,["href"]),s(v,{class:"inline-block rounded-sm"},{default:o(()=>t[2]||(t[2]=[p(" LMS ")])),_:1})])])]),e("div",oe,[e("main",le,[e("div",ie,[n(q)?(i(),d(h,{key:0},P(3,a=>s(n($),{class:"shadow-none"},{default:o(()=>[s(n(L),{class:"text-[14px]"},{default:o(()=>[s(X)]),_:1}),s(n(F),{class:"grid gap-4"},{default:o(()=>[s(Y)]),_:1})]),_:1})),64)):(i(!0),d(h,{key:1},P(M.value,(a,w)=>(i(),K(n($),{class:"shadow-none flex flex-col h-full"},{default:o(()=>[s(n(L),{class:"text-[14px]"},{default:o(()=>[s(n(z),null,{default:o(()=>t[4]||(t[4]=[p("Ordinance Number")])),_:1}),s(n(R),null,{default:o(()=>[p(l(a.ordinanceNumber!=null?a.ordinanceNumber:"-"),1)]),_:2},1024),e("div",re,[e("img",{src:"/storage/profile/"+a.author.photo,class:"w-10 h-10 rounded-full object-cover"},null,8,ce),e("div",de,[e("p",ue,l(a.author.name),1),e("p",pe,l(a.author.position),1)]),s(g,{class:"h-auto w-5"})])]),_:2},1024),s(n(F),{class:"grid gap-4"},{default:o(()=>[e("div",null,[e("p",me,l(a.finalTitle==null?a.title:a.finalTitle),1)]),e("div",null,[t[6]||(t[6]=e("div",{class:"text-[14px] mb-4 font-bold text-blue-500"},"Co-Authors",-1)),(i(!0),d(h,null,P(a.coAuthors,(m,De)=>(i(),d("div",fe,[t[5]||(t[5]=e("span",{class:"flex h-2 w-2 translate-y-1 rounded-full bg-sky-500"},null,-1)),e("div",ge,[e("p",_e,l(m.official.name),1),e("p",xe,l(m.official.position),1)])]))),256))]),e("div",he,[a.municipalStatus==1?(i(),d("div",ve,[s(n(N),{class:"w-5 h-5 text-red-500"})])):(i(),d("div",be,[s(n(D),{class:"w-5 h-5 text-green-500"})])),t[7]||(t[7]=p(" Municipal Status: ")),e("span",{class:C(a.municipalStatus==1?"text-red-500":"text-green-500")},l(a.municipalStatus==1?"Draft Ordinance":"Approved Ordinance"),3)]),e("div",ye,[a.provincialStatus==null||a.provincialStatus==1?(i(),d("div",we,[s(n(N),{class:"w-5 h-5 text-red-500"})])):(i(),d("div",Pe,[s(n(D),{class:"w-5 h-5 text-green-500"})])),t[8]||(t[8]=p(" Provincial Status: ")),e("span",{class:C([a.provincialStatus==1?"text-red-500":a.provincialStatus==2?"text-green-500":"text-gray-500"])},l(a.provincialStatus==1?"Disapproved":a.provincialStatus==2?"Approved Ordinance":"No Status Yet"),3)]),e("small",ke,l(Le(a.updated_at)),1)]),_:2},1024),s(n(G),{class:"mt-auto"},{default:o(()=>[s(v,{class:"w-full text-[12px] cursor-pointer"},{default:o(()=>[e("a",{href:"/storage/files/"+a.file,class:"flex items-center gap-2",target:"_blank"},[s(_),t[9]||(t[9]=p(" Open PDF File "))],8,Se)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),e("div",Ce,[s(v,{disabled:u.value.currentPage<=1,onClick:E,class:"cursor-pointer"},{default:o(()=>[s(n(Z))]),_:1},8,["disabled"]),e("small",null," Pages "+l(u.value.currentPage)+" of "+l(u.value.lastPage),1),s(v,{disabled:u.value.currentPage>=u.value.lastPage,onClick:T,class:"cursor-pointer"},{default:o(()=>[s(n(ee))]),_:1},8,["disabled"])])]),s(W)])])],64)}}});export{Oe as default};
